

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="刘嘉琪">
  <meta name="keywords" content="">
  
  <title>前端工程化--webpack - jiaqi&#39;blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"github.com","root":"/","version":"1.8.11","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>前端学习笔记</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="前端工程化--webpack">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-08-04 19:38" pubdate>
        2021年8月4日 晚上
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      4.7k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      60
       分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">前端工程化--webpack</h1>
            
            <div class="markdown-body">
              <h1 id="前端工程化"><a href="#前端工程化" class="headerlink" title="前端工程化"></a>前端工程化</h1><p>前端工程化指的是：在企业级的前端项目开发中，把前端开发所需的工具、技术、流程、经验等进行规范化、标准化。</p>
<p>最终落实到细节上，就是实现前端的“4 个现代化”：<strong>模块化、组件化、规范化、自动化</strong>。</p>
<p>目前主流的前端工程化解决方案：</p>
<ul>
<li><p>webpack（ <a target="_blank" rel="noopener" href="https://www.webpackjs.com/">https://www.webpackjs.com/</a> ）</p>
</li>
<li><p>parcel（ <a target="_blank" rel="noopener" href="https://zh.parceljs.org/">https://zh.parceljs.org/</a> ） </p>
</li>
</ul>
<h1 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h1><h2 id="1-什么是-webpack"><a href="#1-什么是-webpack" class="headerlink" title="1. 什么是 webpack"></a>1. 什么是 webpack</h2><p>概念：webpack 是前端项目工程化的具体解决方案。</p>
<p>主要功能：它提供了友好的前端模块化开发支持，以及代码压缩混淆、处理浏览器端 JavaScript 的兼容性、性能优化等强大的功能。</p>
<p>好处：让程序员把工作的重心放到具体功能的实现上，提高了前端开发效率和项目的可维护性。</p>
<p>注意：目前企业级的前端项目开发中，绝大多数的项目都是基于 webpack 进行打包构建的。  </p>
<h2 id="2-创建列表隔行变色项目"><a href="#2-创建列表隔行变色项目" class="headerlink" title="2. 创建列表隔行变色项目"></a>2. 创建列表隔行变色项目</h2><p>① 新建项目空白目录，并运行 <code>npm init –y</code> 命令，初始化包管理配置文件 package.json</p>
<p>② 新建 <code>src</code> 源代码目录</p>
<p>③ 新建 src / index.html 首页和 src / index.js 脚本文件</p>
<p>④ 初始化首页基本的结构</p>
<p>⑤ 运行 <code>npm install jquery –S</code> 命令，安装 jQuery</p>
<p>⑥ 通过 ES6 模块化的方式导入 jQuery，实现列表隔行变色效果  </p>
<p>但是直接如果在js中通过import 导入jQuery 浏览器会报错！</p>
<p><code>Uncaught SyntaxError: Cannot use import statement outside a module</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 使用es6模板化语法导入jquery</span><br><br><span class="hljs-keyword">import</span> $ <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;jquery&#x27;</span><br><br><span class="hljs-comment">// 隔行变色</span><br>$(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>    $(<span class="hljs-string">&#x27;li:odd&#x27;</span>).css(<span class="hljs-string">&#x27;backgroundColor&#x27;</span>,<span class="hljs-string">&#x27;red&#x27;</span>);<br>    $(<span class="hljs-string">&#x27;li:even&#x27;</span>).css(<span class="hljs-string">&#x27;backgroundColor&#x27;</span>,<span class="hljs-string">&#x27;cyan&#x27;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>但使用webpack打包后的js，可以在浏览器中正常运行。</p>
<h2 id="3-在项目中安装webpack"><a href="#3-在项目中安装webpack" class="headerlink" title="3.在项目中安装webpack"></a>3.在项目中安装webpack</h2><p>在终端运行如下的命令，安装 webpack 相关的两个包：  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install webpack@5.5.1 webpack-cli@4.2.0 -D<br></code></pre></td></tr></table></figure>

<p>需要安装webpack和webpack-cli。</p>
<p>在安装依赖包时，有一些参数需要注意。比如使用-g参数时，表示该依赖包为全局安装</p>
<p>　　<strong>参数</strong>-S, –save表示安装包信息将加入到dependencies（生产阶段的依赖）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install express --save 或 npm install express -S<br></code></pre></td></tr></table></figure>

<p>　　package.json 文件的 dependencies 字段：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;dependencies&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;express&quot;</span>: <span class="hljs-string">&quot;^3.9.0&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>　　<strong>参数</strong>-D, –save-dev表示安装包信息将加入到devDependencies（开发阶段的依赖），所以开发阶段一般使用它</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install express --save-dev 或 npm install express -D<br></code></pre></td></tr></table></figure>

<h2 id="4-在项目中配置-webpack"><a href="#4-在项目中配置-webpack" class="headerlink" title="4.在项目中配置 webpack"></a>4.在项目中配置 webpack</h2><p>① 在项目根目录中，创建名为 webpack.config.js 的 webpack 配置文件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><br>webpack<br>├─ package-lock.json<br>├─ package.json<br>├─ src<br>│  ├─ index.html<br>│  └─ index.js<br>└─ webpack.config.js<br><br></code></pre></td></tr></table></figure>
<p>并初始化如下的基本配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><br><span class="hljs-comment">//webpack.config.js</span><br><span class="hljs-built_in">module</span>.exports=&#123;<br>    <span class="hljs-attr">mode</span>:<span class="hljs-string">&#x27;development&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>② 在 package.json 的 scripts 节点下，新增 dev 脚本如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">//package.json</span><br>&#123;<br>    <span class="hljs-attr">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;dev&quot;</span>:<span class="hljs-string">&quot;webpack&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>‘dev’名字是自定义的，但是webpack是固定的。</p>
<p>③ 在终端中运行 <code>npm run dev</code> 命令，启动 webpack 进行项目的打包构建  </p>
<h3 id="4-1-mode的可选值"><a href="#4-1-mode的可选值" class="headerlink" title="4.1 mode的可选值"></a>4.1 mode的可选值</h3><p>mode 节点的可选值有两个，分别是：<br>① development</p>
<ul>
<li><p>开发环境</p>
</li>
<li><p>不会对打包生成的文件进行代码压缩和性能优化</p>
</li>
<li><p>打包速度快，适合在开发阶段使用</p>
</li>
</ul>
<p>② production</p>
<ul>
<li><p>生产环境</p>
</li>
<li><p>会对打包生成的文件进行代码压缩和性能优化</p>
</li>
<li><p>打包速度很慢，仅适合在项目发布阶段使用  </p>
</li>
</ul>
<h3 id="4-2-webpack-config-js-文件的作用"><a href="#4-2-webpack-config-js-文件的作用" class="headerlink" title="4.2  webpack.config.js 文件的作用"></a>4.2  webpack.config.js 文件的作用</h3><p><strong>webpack.config.js 是 webpack 的配置文件。</strong>webpack 在真正开始打包构建之前，会先读取这个配置文件，从而基于给定的配置，对项目进行打包。</p>
<p>注意：由于 webpack 是<strong>基于 node.js 开发出来的</strong>打包工具，因此在它的配置文件中，支持使用 node.js 相关的语法和模块进行 webpack 的个性化配置。  </p>
<h3 id="4-3-webpack-中的默认约定"><a href="#4-3-webpack-中的默认约定" class="headerlink" title="4.3 webpack 中的默认约定"></a>4.3 webpack 中的默认约定</h3><p>在 webpack 中有如下的默认约定：</p>
<p>① 默认的打包入口文件为 src/index.js</p>
<p>② 默认的输出文件路径为 dist/main.js  </p>
<p>注意：可以在 webpack.config.js 中修改打包的默认约定。</p>
<h3 id="4-4-自定义打包的入口与出口"><a href="#4-4-自定义打包的入口与出口" class="headerlink" title="4.4 自定义打包的入口与出口"></a>4.4 自定义打包的入口与出口</h3><p>在 webpack.config.js 配置文件中，通过 <code>entry </code>节点指定打包的入口。通过 <code>output</code>节点指定打包的出口。</p>
<p>示例代码如下 ：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>    <span class="hljs-comment">// 指定打包的入口文件</span><br>    <span class="hljs-attr">entry</span>: path.join(__dirname, <span class="hljs-string">&#x27;./src/index.js&#x27;</span>),<br>    <span class="hljs-attr">output</span>: &#123;<br>        <span class="hljs-comment">// 输出目录</span><br>        <span class="hljs-attr">path</span>: path.join(__dirname, <span class="hljs-string">&#x27;./dist&#x27;</span>),<br>        <span class="hljs-comment">// 输出文件的名称</span><br>        <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="webpack插件"><a href="#webpack插件" class="headerlink" title="webpack插件"></a>webpack插件</h1><h2 id="1-webpack-插件的作用"><a href="#1-webpack-插件的作用" class="headerlink" title="1. webpack 插件的作用"></a>1. webpack 插件的作用</h2><p>通过安装和配置第三方的插件，可以拓展 webpack 的能力，从而让 webpack 用起来更方便。最常用的webpack 插件有如下两个：  </p>
<p>① webpack-dev-server</p>
<ul>
<li>类似于 node.js 阶段用到的 nodemon 工具</li>
<li>每当修改了源代码，webpack 会自动进行项目的打包和构建</li>
</ul>
<p>② html-webpack-plugin </p>
<ul>
<li>webpack 中的 HTML 插件（类似于一个模板引擎插件）</li>
<li>可以通过此插件自定制 index.html 页面的内容  </li>
</ul>
<h2 id="2-webpack-dev-server"><a href="#2-webpack-dev-server" class="headerlink" title="2. webpack-dev-server"></a>2. webpack-dev-server</h2><p>webpack-dev-server 可以让 webpack 监听项目源代码的变化，从而进行自动打包构建。  </p>
<h3 id="2-1-安装-webpack-dev-server"><a href="#2-1-安装-webpack-dev-server" class="headerlink" title="2.1 安装 webpack-dev-server"></a>2.1 安装 webpack-dev-server</h3><p>运行如下的命令，即可在项目中安装此插件：参数**-D, –save-dev表示安装包信息将加入到devDependencies（开发阶段的依赖），所以开发阶段一般使用它。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install webpack-dev-server@3.11.0 -D<br></code></pre></td></tr></table></figure>

<h3 id="2-2-配置-webpack-dev-server"><a href="#2-2-配置-webpack-dev-server" class="headerlink" title="2.2 配置 webpack-dev-server"></a>2.2 配置 webpack-dev-server</h3><p>① 修改 package.json -&gt; scripts 中的 dev 命令如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;scripts&quot;</span>:&#123;<br>	<span class="hljs-attr">&quot;dev&quot;</span>:<span class="hljs-string">&quot;webpack serve&quot;</span> <span class="hljs-comment">// script节点下的脚本，通过npm run 执行</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>② 再次运行 npm run dev 命令，重新进行项目的打包<br>③ 在浏览器中访问 <a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a> 地址，查看自动打包效果  </p>
<p><img src="https://raw.githubusercontent.com/liujiaqi222/images/master/pics/202108042125081.png" srcset="/img/loading.gif" lazyload alt="image-20210804212537956"></p>
<h3 id="2-3-打包生成的文件哪儿去了？"><a href="#2-3-打包生成的文件哪儿去了？" class="headerlink" title="2.3 打包生成的文件哪儿去了？"></a>2.3 打包生成的文件哪儿去了？</h3><p>① 不配置 webpack-dev-server 的情况下，webpack 打包生成的文件，会存放到实际的物理磁盘上</p>
<ul>
<li><p>严格遵守开发者在 webpack.config.js 中指定配置</p>
</li>
<li><p>根据 output 节点指定路径进行存放</p>
</li>
</ul>
<p>② 配置了 webpack-dev-server 之后，<strong>打包生成的文件存放到了内存中</strong></p>
<ul>
<li><p>不再根据 output 节点指定的路径，存放到实际的物理磁盘上</p>
</li>
<li><p>提高了实时打包输出的性能，因为内存比物理磁盘速度快很多  </p>
</li>
</ul>
<h3 id="2-4-生成到内存中的文件该如何访问？"><a href="#2-4-生成到内存中的文件该如何访问？" class="headerlink" title="2.4 生成到内存中的文件该如何访问？"></a>2.4 生成到内存中的文件该如何访问？</h3><p>webpack-dev-server 生成到内存中的文件，<em><strong>默认放到了项目的根目录中</strong></em>，而且是<strong>虚拟的、不可见的。</strong></p>
<p>如我可以直接在<a target="_blank" rel="noopener" href="http://localhost:8080/bundle.js%E8%AE%BF%E9%97%AE%E5%88%B0bundle%E6%96%87%E4%BB%B6%E3%80%82">http://localhost:8080/bundle.js访问到bundle文件。</a></p>
<p><img src="https://raw.githubusercontent.com/liujiaqi222/images/master/pics/202108042137421.png" srcset="/img/loading.gif" lazyload alt="image-20210804213748360"></p>
<p>但是如果我打开<a target="_blank" rel="noopener" href="http://localhost:8080/%EF%BC%8C%E5%8D%B4%E5%8F%91%E7%8E%B0%E5%B9%B6%E6%B2%A1%E6%9C%89bundle.js%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6%E3%80%82%E5%9B%A0%E6%AD%A4bundle.js%E6%96%B9%E5%88%B0%E4%BA%86%E6%A0%B9%E7%9B%AE%E5%BD%95%EF%BC%8C%E4%BD%86%E6%98%AF%E4%B8%8D%E5%8F%AF%E8%A7%81%E8%99%9A%E6%8B%9F%E7%9A%84%E3%80%82">http://localhost:8080/，却发现并没有bundle.js这个文件。因此bundle.js方到了根目录，但是不可见虚拟的。</a></p>
<p><img src="https://raw.githubusercontent.com/liujiaqi222/images/master/pics/202108042139461.png" srcset="/img/loading.gif" lazyload alt="image-20210804213908399"></p>
<ul>
<li>可以直接用 / 表示项目根目录，后面跟上要访问的文件名称，即可访问内存中的文件</li>
<li>例如 /bundle.js 就表示要访问 webpack-dev-server 生成到内存中的 bundle.js 文件  </li>
</ul>
<img src="https://raw.githubusercontent.com/liujiaqi222/images/master/pics/202108042141449.png" srcset="/img/loading.gif" lazyload alt="image-20210804214105396" style="zoom: 50%;" />

<h2 id="3-html-webpack-plugin"><a href="#3-html-webpack-plugin" class="headerlink" title="3.html-webpack-plugin"></a>3.html-webpack-plugin</h2><p><code>html-webpack-plugin</code> 是 webpack 中的 HTML 插件，可以通过此插件自定制 index.html 页面的内容。<br>需求：通过 html-webpack-plugin 插件，将 src 目录下的 index.html 首页，复制到项目根目录中一份！  </p>
<h3 id="3-1-安装-html-webpack-plugin"><a href="#3-1-安装-html-webpack-plugin" class="headerlink" title="3.1 安装 html-webpack-plugin"></a>3.1 安装 html-webpack-plugin</h3><p>运行如下的命令，即可在项目中安装此插件：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">npm install html-webpack-plugin@<span class="hljs-number">4.5</span><span class="hljs-number">.0</span> -D<br></code></pre></td></tr></table></figure>

<h3 id="3-2-配置-html-webpack-plugin"><a href="#3-2-配置-html-webpack-plugin" class="headerlink" title="3.2 配置 html-webpack-plugin"></a>3.2 配置 html-webpack-plugin</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-comment">// 1.导入HTML插件，得到一个构造函数</span><br><span class="hljs-keyword">const</span> HtmlPlugin=<span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;html-webpack-plugin&#x27;</span>);<br><br><span class="hljs-comment">// 2.创建插件的实例对象</span><br><span class="hljs-keyword">const</span> htmlPlugin=<span class="hljs-keyword">new</span> HtmlPlugin(&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">&#x27;./src/index.html&#x27;</span>, <span class="hljs-comment">//指定要复制的文件路径（原文件的存放路径）,</span><br>    <span class="hljs-attr">filename</span>:<span class="hljs-string">&#x27;./index.html&#x27;</span>  <span class="hljs-comment">//生成的文件存放路径</span><br><br>&#125;)<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>    <span class="hljs-comment">// 3.通过plugins节点，使htmlPlugin插件生效</span><br>    <span class="hljs-attr">plugins</span>:[htmlPlugin]<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="3-3-html-webpack-plugin的注意点"><a href="#3-3-html-webpack-plugin的注意点" class="headerlink" title="3.3 html-webpack-plugin的注意点"></a>3.3 html-webpack-plugin的注意点</h3><p>HTML 插件在生成的 index.html <strong>页面的底部</strong>，<strong>自动注入</strong>了打包的 bundle.js 文件  </p>
<p><img src="https://raw.githubusercontent.com/liujiaqi222/images/master/pics/202108042158066.png" srcset="/img/loading.gif" lazyload alt="image-20210804215836002"></p>
<h2 id="4-devServer-节点"><a href="#4-devServer-节点" class="headerlink" title="4.devServer 节点"></a>4.devServer 节点</h2><p>在 webpack.config.js 配置文件中，可以通过 devServer 节点对 webpack-dev-server 插件进行更多的配置，示例代码如下：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br><br>    <span class="hljs-attr">devServer</span>:&#123;<br>        <span class="hljs-attr">open</span>:<span class="hljs-literal">true</span>, <span class="hljs-comment">//初次打包完成后，自动打开浏览器</span><br>        <span class="hljs-attr">host</span>:<span class="hljs-string">&#x27;127.0.0.1&#x27;</span>, <span class="hljs-comment">// 实时打包前使用的主机地址</span><br>        <span class="hljs-attr">port</span>:<span class="hljs-number">80</span> <span class="hljs-comment">// 实时打包所用的端口号</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="webpack中的loader"><a href="#webpack中的loader" class="headerlink" title="webpack中的loader"></a>webpack中的loader</h1><h2 id="1-loader概述"><a href="#1-loader概述" class="headerlink" title="1.loader概述"></a>1.loader概述</h2><p>在实际开发过程中，webpack 默认只能打包处理以 .js 后缀名结尾的模块。其他<strong>非 .js 后缀名结尾的模块</strong>，webpack 默认处理不了，<strong>需要调用 loader 加载器才可以正常打包</strong>，否则会报错！</p>
<p>loader 加载器的作用：<strong>协助 webpack 打包处理特定的文件模块</strong>。</p>
<p>比如：</p>
<ul>
<li> css-loader 可以打包处理 .css 相关的文件</li>
<li> less-loader 可以打包处理 .less 相关的文件</li>
<li> babel-loader 可以打包处理 webpack 无法处理的高级 JS 语法  </li>
</ul>
<h2 id="2-loader的调用过程"><a href="#2-loader的调用过程" class="headerlink" title="2.loader的调用过程"></a>2.loader的调用过程</h2><p><img src="https://raw.githubusercontent.com/liujiaqi222/images/master/pics/202108042215867.png" srcset="/img/loading.gif" lazyload alt="image-20210804221504744"></p>
<h2 id="3-打包css文件"><a href="#3-打包css文件" class="headerlink" title="3.打包css文件"></a>3.打包css文件</h2><p>① 运行 <code>npm install style-loader css-loader -D</code> 命令，安装处理 css 文件的 loader</p>
<p>② 在 <code>webpack.config.js</code> 的 module / rules 数组中，添加 loader 规则如下  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">entry</span>: <span class="hljs-string">&#x27;./src/index.js&#x27;</span>,<br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span>,<br>    <span class="hljs-attr">path</span>: path.resolve(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>),<br>  &#125;,<br> <span class="hljs-attr">module</span>: &#123; <span class="hljs-comment">//所有第三方模块的匹配规则</span><br>   <span class="hljs-attr">rules</span>: [ <span class="hljs-comment">//文件后缀名的匹配规则</span><br>     &#123;<br>       <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/i</span>,<br>       use: [<span class="hljs-string">&#x27;style-loader&#x27;</span>, <span class="hljs-string">&#x27;css-loader&#x27;</span>],<br>     &#125;,<br>   ],<br> &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>模块 loader 可以链式调用。链中的每个 loader 都将对资源进行转换。<strong>链会逆序执行。</strong> （即多个loader从后往前调用）第一个 loader 将其结果（被转换后的资源）传递给下一个 loader，依此类推。最后，webpack 期望链中的最后的 loader 返回 JavaScript。</p>
<p>应保证 loader 的先后顺序：<a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/style-loader"><code>&#39;style-loader&#39;</code></a> 在前，而 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/css-loader"><code>&#39;css-loader&#39;</code></a> 在后。如果不遵守此约定，webpack 可能会抛出错误。</p>
<p>③在项目中添加一个新的 <code>style.css</code> 文件，并将其 import 到我们的 <code>index.js</code> 中。现在，在此模块执行过程中，含有 CSS 字符串的 <code>&lt;style&gt;</code> 标签，将被插入到 html 文件的 <code>&lt;head&gt;</code> 中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./css/index.css&#x27;</span><br><br><span class="hljs-comment">// 使用es6模板化语法导入jquery</span><br><br><span class="hljs-keyword">import</span> $ <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;jquery&#x27;</span><br><br><span class="hljs-comment">// 隔行变色</span><br>$(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>    $(<span class="hljs-string">&#x27;li:odd&#x27;</span>).css(<span class="hljs-string">&#x27;backgroundColor&#x27;</span>,<span class="hljs-string">&#x27;black&#x27;</span>);<br>    $(<span class="hljs-string">&#x27;li:even&#x27;</span>).css(<span class="hljs-string">&#x27;backgroundColor&#x27;</span>,<span class="hljs-string">&#x27;pink&#x27;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>要查看 webpack 做了什么，请打开控制台检查页面（不要查看页面源代码，它不会显示结果，因为 <code>&lt;style&gt;</code> 标签是由 JavaScript 动态创建的），并查看页面的 head 标签。它应该包含 style 块元素，也就是我们在 <code>index.js</code> 中 import 的 css 文件中的样式。</p>
<h2 id="4-打包处理less文件"><a href="#4-打包处理less文件" class="headerlink" title="4.打包处理less文件"></a>4.打包处理less文件</h2><p>① 运行 <code>npm i less-loader less -D</code> 命令<br>② 在 <code>webpack.config.js</code> 的 module/rules 数组中，添加 loader 规则如下：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">module</span>: &#123;<br>        <span class="hljs-attr">rules</span>: [<br>            &#123;<br>                <span class="hljs-attr">test</span>:<span class="hljs-regexp">/\.less$/</span>,<br>                use:[<span class="hljs-string">&#x27;style-loader&#x27;</span>,<span class="hljs-string">&#x27;css-loader&#x27;</span>,<span class="hljs-string">&#x27;less-loader&#x27;</span>]<br>            &#125;<br>        ]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p>less是less-loader的内置依懒项，全部代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-comment">// 1.导入HTML插件，得到一个构造函数</span><br><span class="hljs-keyword">const</span> HtmlPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;html-webpack-plugin&#x27;</span>);<br><br><span class="hljs-comment">// 2.创建插件的实例对象</span><br><span class="hljs-keyword">const</span> htmlPlugin = <span class="hljs-keyword">new</span> HtmlPlugin(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;./src/index.html&#x27;</span>, <span class="hljs-comment">//指定要复制的文件路径（原文件的存放路径）,</span><br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;./index.html&#x27;</span>  <span class="hljs-comment">//生成的文件存放路径</span><br><br>&#125;)<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>    <span class="hljs-comment">// 指定打包的入口文件</span><br>    <span class="hljs-attr">entry</span>: path.join(__dirname, <span class="hljs-string">&#x27;./src/index.js&#x27;</span>),<br>    <span class="hljs-attr">output</span>: &#123;<br>        <span class="hljs-comment">// 输出目录</span><br>        <span class="hljs-attr">path</span>: path.join(__dirname, <span class="hljs-string">&#x27;./dist&#x27;</span>),<br>        <span class="hljs-comment">// 输出文件的名称</span><br>        <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span><br>    &#125;,<br>    <span class="hljs-comment">// 3.通过plugins节点，使htmlPlugin插件生效</span><br>    <span class="hljs-attr">plugins</span>: [htmlPlugin],<br>    <span class="hljs-attr">devServer</span>: &#123;<br>        <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">host</span>: <span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,<br>        <span class="hljs-attr">port</span>: <span class="hljs-number">80</span><br>    &#125;,<br>    <span class="hljs-comment">// 所有第三方模块的匹配规则</span><br>    <span class="hljs-attr">module</span>: &#123;<br>        <span class="hljs-attr">rules</span>: [<br>            &#123;<br>                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,<br>                use: [<span class="hljs-string">&#x27;style-loader&#x27;</span>,<span class="hljs-string">&#x27;css-loader&#x27;</span>]<br>            &#125;,<br>            &#123;<br>                <span class="hljs-attr">test</span>:<span class="hljs-regexp">/\.less$/</span>,<br>                use:[<span class="hljs-string">&#x27;style-loader&#x27;</span>,<span class="hljs-string">&#x27;css-loader&#x27;</span>,<span class="hljs-string">&#x27;less-loader&#x27;</span>]<br>            &#125;<br>        ]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="5-打包图片"><a href="#5-打包图片" class="headerlink" title="5. 打包图片"></a>5. 打包图片</h2><p>v5已经弃用了<code>file-loader</code>和<code>url-loader</code>，因此需要使用webpack自带的<code>asset modules</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//webpack.config.js</span><br><br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br> <span class="hljs-built_in">module</span>.exports = &#123;<br>   <span class="hljs-attr">entry</span>: <span class="hljs-string">&#x27;./src/index.js&#x27;</span>,<br>   <span class="hljs-attr">output</span>: &#123;<br>     <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span>,<br>     <span class="hljs-attr">path</span>: path.resolve(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>),<br>   &#125;,<br>   <span class="hljs-attr">module</span>: &#123;<br>     <span class="hljs-attr">rules</span>: [<br>       &#123;<br>         <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/i</span>,<br>         use: [<span class="hljs-string">&#x27;style-loader&#x27;</span>, <span class="hljs-string">&#x27;css-loader&#x27;</span>],<br>       &#125;,<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(png|svg|jpg|jpeg|gif)$/i</span>,<br>        type: <span class="hljs-string">&#x27;asset/resource&#x27;</span>,<br>      &#125;,<br>     ],<br>   &#125;,<br> &#125;;<br></code></pre></td></tr></table></figure>

<p>如何实现的：</p>
<p>js：在 <code>import MyImage from &#39;./my-image.png&#39;</code> 时，此图像将被处理并添加到 <code>output</code> 目录，<em>并且</em> <code>MyImage</code> 变量将包含该图像在处理后的最终 url。</p>
<p>css：在使用 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/css-loader">css-loader</a> 时，如前所示，会使用类似过程处理你的 CSS 中的 <code>url(&#39;./my-image.png&#39;)</code>。loader 会识别这是一个本地文件，并将 <code>&#39;./my-image.png&#39;</code> 路径，替换为 <code>output</code> 目录中图像的最终路径。</p>
<p>html：而 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/html-loader">html-loader</a> 以相同的方式处理 <code>&lt;img src=&quot;./my-image.png&quot; /&gt;</code>。</p>
<h2 id="6-loader的另外一种配置方式"><a href="#6-loader的另外一种配置方式" class="headerlink" title="6. loader的另外一种配置方式"></a>6. loader的另外一种配置方式</h2><p>带参数项的 loader 还可以通过对象的方式进行配置：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-attr">test</span>:<span class="hljs-regexp">/\.jpg|png|gif$/</span>,<br>    use:&#123;<br>        <span class="hljs-attr">loader</span>:<span class="hljs-string">&#x27;url-loader&#x27;</span>,<br>        <span class="hljs-attr">options</span>:&#123;<br>            <span class="hljs-attr">limit</span>:<span class="hljs-number">222222</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="7-使用babel处理-js-文件中的高级语法"><a href="#7-使用babel处理-js-文件中的高级语法" class="headerlink" title="7.使用babel处理 js 文件中的高级语法"></a>7.使用babel处理 js 文件中的高级语法</h2><p>webpack 只能打包处理一部分高级的 JavaScript 语法。对于那些 webpack 无法处理的高级 js 语法，需要借助于 babel-loader 进行打包处理。</p>
<h3 id="7-1-安装-babel-loader-相关的包"><a href="#7-1-安装-babel-loader-相关的包" class="headerlink" title="7.1 安装 babel-loader 相关的包"></a>7.1 安装 babel-loader 相关的包</h3><p>运行如下的命令安装对应的依赖包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install babel-loader@8.2.1 @babel/core@7.12.3 @babel/plugin-proposal-class-properties@7.12.1 -D<br></code></pre></td></tr></table></figure>

<h3 id="7-2-配置-babel-loader"><a href="#7-2-配置-babel-loader" class="headerlink" title="7.2 配置 babel-loader"></a>7.2 配置 babel-loader</h3><p>在 webpack.config.js 的 module -&gt; rules 数组中，添加 loader 规则如下：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>    <span class="hljs-comment">// 所有第三方模块的匹配规则</span><br>    <span class="hljs-attr">module</span>: &#123;<br>            &#123;<br>                <span class="hljs-attr">test</span>:<span class="hljs-regexp">/\.js$/</span>,<br>                <span class="hljs-comment">// exclude 为排除项</span><br>                <span class="hljs-comment">// 表示babel-loade无需处理node_modules下的js文件</span><br>                exclude:<span class="hljs-regexp">/node_modules/</span>,<br>                use:&#123;<br>                    <span class="hljs-attr">loader</span>:<span class="hljs-string">&#x27;babel-loader&#x27;</span>,<br>                    <span class="hljs-attr">options</span>:&#123;<br>                        <span class="hljs-comment">// 声明一个babel插件，用于转换class中的高级语法</span><br>                        <span class="hljs-attr">plugins</span>:[<span class="hljs-string">&#x27;@babel/plugin-proposal-class-properties&#x27;</span>]<br>                    &#125;<br>                &#125;<br>            &#125;<br>        ]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="管理输出"><a href="#管理输出" class="headerlink" title="管理输出"></a>管理输出</h1><h1 id="打包发布"><a href="#打包发布" class="headerlink" title="打包发布"></a>打包发布</h1><h2 id="1-为什么要打包发布"><a href="#1-为什么要打包发布" class="headerlink" title="1.为什么要打包发布"></a>1.为什么要打包发布</h2><p>项目开发完成之后，使用 webpack 对项目进行打包发布的主要原因有以下两点：</p>
<p>① 开发环境下，打包生成的文件存放于内存中，无法获取到最终打包生成的文件</p>
<p>② 开发环境下，打包生成的文件不会进行代码压缩和性能优化为了让项目能够在生产环境中高性能的运行，因此需要对项目进行打包发布。  </p>
<h2 id="2-配置-webpack-的打包发布"><a href="#2-配置-webpack-的打包发布" class="headerlink" title="2. 配置 webpack 的打包发布"></a>2. 配置 webpack 的打包发布</h2><p> 在 package.json 文件的 scripts 节点下，新增 build 命令如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;scripts&quot;</span>:&#123;<br>        <span class="hljs-attr">&quot;dev&quot;</span>:<span class="hljs-string">&quot;webpack serve&quot;</span>, <span class="hljs-comment">// 开发环境中，运行dev命令</span><br>        <span class="hljs-attr">&quot;build&quot;</span>:<span class="hljs-string">&quot;webpack --mode production&quot;</span> <span class="hljs-comment">// 项目发布时运行build命令</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>--model</code> 是一个参数项，用来指定 webpack 的运行模式。production 代表生产环境，会对打包生成的文件进行代码压缩和性能优化。<br>注意：通过 –model 指定的参数项，会<strong>覆盖</strong> webpack.config.js 中的 model 选项。 </p>
<h3 id="3-把-JavaScript-文件统一生成到-js-目录中"><a href="#3-把-JavaScript-文件统一生成到-js-目录中" class="headerlink" title="3. 把 JavaScript 文件统一生成到 js 目录中"></a>3. 把 JavaScript 文件统一生成到 js 目录中</h3><p>在 webpack.config.js 配置文件的 output 节点中，进行如下的配置：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-comment">// 1.导入HTML插件，得到一个构造函数</span><br><span class="hljs-keyword">const</span> HtmlPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;html-webpack-plugin&#x27;</span>);<br><br><span class="hljs-comment">// 2.创建插件的实例对象</span><br><span class="hljs-keyword">const</span> htmlPlugin = <span class="hljs-keyword">new</span> HtmlPlugin(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;./src/index.html&#x27;</span>, <span class="hljs-comment">//指定要复制的文件路径（原文件的存放路径）,</span><br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;./index.html&#x27;</span>  <span class="hljs-comment">//生成的文件存放路径</span><br><br>&#125;)<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>    <span class="hljs-comment">// 指定打包的入口文件</span><br>    <span class="hljs-attr">entry</span>: path.join(__dirname, <span class="hljs-string">&#x27;./src/index.js&#x27;</span>),<br>    <span class="hljs-attr">output</span>: &#123;<br>        <span class="hljs-comment">// 输出目录</span><br>        <span class="hljs-attr">path</span>: path.join(__dirname, <span class="hljs-string">&#x27;./dist&#x27;</span>),<br>        <span class="hljs-comment">// 明确告诉webpack把生成的bundle.js文件存放到dist目录下的js文件夹下</span><br>        <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;js/bundle.js&#x27;</span><br>    &#125;,<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="4-把图片文件统一生成到-image-目录中"><a href="#4-把图片文件统一生成到-image-目录中" class="headerlink" title="4.把图片文件统一生成到 image 目录中"></a>4.把图片文件统一生成到 image 目录中</h2><p>修改 webpack.config.js 中的 url-loader 配置项，新增 <code>outputPath</code> 选项即可指定图片文件的输出路径：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>    <span class="hljs-comment">// 所有第三方模块的匹配规则</span><br>    <span class="hljs-attr">module</span>: &#123;<br>        <span class="hljs-attr">rules</span>: [<br>            &#123;<br>                <span class="hljs-attr">test</span>:<span class="hljs-regexp">/\.jpg|png|gif$/</span>,<br>                use:&#123;<br>                    <span class="hljs-attr">loader</span>:<span class="hljs-string">&#x27;url-loader&#x27;</span>,<br>                    <span class="hljs-attr">options</span>:&#123;<br>                        <span class="hljs-attr">limit</span>:<span class="hljs-number">2222</span>,<br>                        <span class="hljs-comment">//明确指出生成的文件存储到dist目录下的image文件夹中</span><br>                        <span class="hljs-attr">outputPath</span>:<span class="hljs-string">&#x27;image&#x27;</span><br>                    &#125;<br>				&#125;<br>            &#125;<br>        ]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="Source-Map"><a href="#Source-Map" class="headerlink" title="Source Map"></a>Source Map</h1><h2 id="1-生产环境中遇到的问题"><a href="#1-生产环境中遇到的问题" class="headerlink" title="1.生产环境中遇到的问题"></a>1.生产环境中遇到的问题</h2><p>前端项目在投入生产环境之前，都需要对 JavaScript 源代码进行压缩混淆，从而减小文件的体积，提高文件的加载效率。此时就不可避免的产生了另一个问题：对压缩混淆之后的代码除错（debug）是一件极其困难的事情  </p>
<p><img src="https://raw.githubusercontent.com/liujiaqi222/images/master/pics/202108051258183.png" srcset="/img/loading.gif" lazyload alt="image-20210805125849106"></p>
<ul>
<li>变量被替换成没有任何语义的名称</li>
<li> 空行和注释被剔除  </li>
</ul>
<h2 id="2-什么是-Source-Map"><a href="#2-什么是-Source-Map" class="headerlink" title="2. 什么是 Source Map"></a>2. 什么是 Source Map</h2><p><strong>Source Map 就是一个信息文件，里面储存着位置信息。也就是说，Source Map 文件中存储着代码压缩混淆前后的对应关系。</strong></p>
<p>有了它，出错的时候，除错工具将直接显示原始代码，而不是转换后的代码，能够极大的方便后期的调试  </p>
<h2 id="3-webpack-开发环境下的-Source-Map"><a href="#3-webpack-开发环境下的-Source-Map" class="headerlink" title="3. webpack 开发环境下的 Source Map"></a>3. webpack 开发环境下的 Source Map</h2><p>在开发环境下，webpack 默认启用了 Source Map 功能。当程序运行出错时，可以直接在控制台提示错误行的位置，并定位到具体的源代码：  </p>
<h3 id="3-1-默认-Source-Map-的问题"><a href="#3-1-默认-Source-Map-的问题" class="headerlink" title="3.1 默认 Source Map 的问题"></a>3.1 默认 Source Map 的问题</h3><p>开发环境下<strong>默认生成的 Source Map记录的是生成后的代码</strong>的位置。会导致运行时报错的行数与源代码的行数不一致的问题。示意图如下：  </p>
<h3 id="3-2-解决默认-Source-Map-的问题"><a href="#3-2-解决默认-Source-Map-的问题" class="headerlink" title="3.2 解决默认 Source Map 的问题"></a>3.2 解决默认 Source Map 的问题</h3><p>开发环境下，推荐在 webpack.config.js 中添加如下的配置，即可保证运行时报错的行数与源代码的行数保持一致：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports=&#123;<br>    <span class="hljs-attr">mode</span>:<span class="hljs-string">&#x27;development&#x27;</span>,<br>    <span class="hljs-comment">//eval-source-map 仅限在开发模式下使用，不建议在生产模式下使用</span><br>    <span class="hljs-comment">//使用此配置生成的source map即可保证运行时报错的行数与源代码的行数保持一致：  </span><br>    <span class="hljs-attr">devtool</span>: <span class="hljs-string">&#x27;eval-source-map&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="4-webpack-生产环境下的-Source-Map"><a href="#4-webpack-生产环境下的-Source-Map" class="headerlink" title="4. webpack 生产环境下的 Source Map"></a>4. webpack 生产环境下的 Source Map</h2><p>在生产环境下，如果省略了 devtool 选项，则最终生成的文件中不包含 Source Map。这能够防止原始代码通过 Source Map 的形式暴露给别有所图之人。  </p>
<h3 id="4-1只定位行数不暴露源码"><a href="#4-1只定位行数不暴露源码" class="headerlink" title="4.1只定位行数不暴露源码"></a>4.1只定位行数不暴露源码</h3><p>在生产环境下，如果只想定位报错的具体行数，且不想暴露源码。此时可以将 devtool 的值设置为<code>nosources-source-map</code>。实际效果如图所示：  </p>
<p><img src="https://raw.githubusercontent.com/liujiaqi222/images/master/pics/202108051314367.png" srcset="/img/loading.gif" lazyload alt="image-20210805131426332"></p>
<h3 id="4-2-定位行数且暴露源码"><a href="#4-2-定位行数且暴露源码" class="headerlink" title="4.2 定位行数且暴露源码"></a>4.2 定位行数且暴露源码</h3><p>在生产环境下，如果想在定位报错行数的同时，展示具体报错的源码。此时可以将 devtool 的值设置为source-map。</p>
<p><img src="https://raw.githubusercontent.com/liujiaqi222/images/master/pics/202108051315878.png" srcset="/img/loading.gif" lazyload alt="image-20210805131530831"></p>
<h2 id="5-Source-Map-的最佳实践"><a href="#5-Source-Map-的最佳实践" class="headerlink" title="5.Source Map 的最佳实践"></a>5.Source Map 的最佳实践</h2><p>① 开发环境下：</p>
<ul>
<li><p>建议把 devtool 的值设置为 eval-source-map</p>
</li>
<li><p>好处：可以精准定位到具体的错误行</p>
</li>
</ul>
<p>② 生产环境下：</p>
<ul>
<li><p>建议关闭 Source Map 或将 devtool 的值设置为 nosources-source-map</p>
</li>
<li><p>好处：防止源码泄露，提高网站的安全性  </p>
</li>
</ul>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/webpack/">webpack</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/08/10/Vue%E5%B0%8F%E6%A1%88%E4%BE%8B-TodoList%E5%92%8C%E8%B4%AD%E7%89%A9%E8%BD%A6/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Vue小案例|TodoList_购物车_table案例</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/08/04/JS%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8AEventLoop%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/">
                        <span class="hidden-mobile">JS模块化_Promise_EventLoop_宏任务和微任务</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script  src="/js/local-search.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
