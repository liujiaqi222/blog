

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="刘嘉琪">
  <meta name="keywords" content="">
  
  <title>JavaScript ES6 学习笔记 - jiaqi&#39;blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"github.com","root":"/","version":"1.8.11","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>前端学习笔记</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="JavaScript ES6 学习笔记">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-06-24 12:19" pubdate>
        2021年6月24日 中午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      20.5k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      290
       分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">JavaScript ES6 学习笔记</h1>
            
            <div class="markdown-body">
              <h1 id="ES6简介"><a href="#ES6简介" class="headerlink" title="ES6简介"></a>ES6简介</h1><p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210530104138.png" srcset="/img/loading.gif" lazyload alt="image-20210530104137712"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210530104352.png" srcset="/img/loading.gif" lazyload alt="image-20210530104351721"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210530104440.png" srcset="/img/loading.gif" lazyload alt="image-20210530104439339"></p>
<h1 id="const"><a href="#const" class="headerlink" title="const"></a>const</h1><p>const就是为了那些一旦初始化就不希望重新赋值的情况设计的。使用 const声明常量，一旦声明，就必须立即初始化。</p>
<p>const声明的常量，允许在<strong>不重新赋值</strong>的情况下修改它的值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> person=&#123;<span class="hljs-attr">gender</span>:<span class="hljs-string">&quot;male&quot;</span>&#125;;<br>person[gender]=<span class="hljs-string">&quot;female&quot;</span>;<br></code></pre></td></tr></table></figure>

<h1 id="let、const、var的区别"><a href="#let、const、var的区别" class="headerlink" title="let、const、var的区别"></a>let、const、var的区别</h1><p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210530131646.png" srcset="/img/loading.gif" lazyload alt="image-20210530131645190"></p>
<p>1.重复声明：已经存在的变量，又声明了一次。</p>
<p>var允许重复声明，let、 const不允许重复声明</p>
<p>2.变量提升</p>
<p>var 会提升变量的声明到当前作用域顶部，但是赋值不会提升；let和const不会变量提升。</p>
<p>3.暂时性死区</p>
<p>只要作用域内存在 let、const，它们所声明的变量或常量就自动“绑定”这个区域，不再受到外部作用域的影响。</p>
<p>let、const存在暂时性死区，var不存在。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> c=<span class="hljs-number">2</span>;<br><span class="hljs-keyword">let</span> d=<span class="hljs-number">2</span>;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">func</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;d&quot;</span>,d);<span class="hljs-comment">//d</span><br>    <span class="hljs-comment">//console.log(&quot;c&quot;,c);//  Cannot access &#x27;c&#x27; before initialization</span><br>    <span class="hljs-keyword">let</span> c=<span class="hljs-number">1</span>;<br>&#125;<br>func(c);<br></code></pre></td></tr></table></figure>

<p>4.window 对象的属性和方法</p>
<p>在全局作用域中，var声明的变量，通过function声明的函数会自动变为window对象的属性和方法；let、const不会。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> age=<span class="hljs-number">18</span>;<br><span class="hljs-keyword">var</span> add=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;&#125;<br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">window</span>.add) <span class="hljs-comment">//18</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">window</span>.add===add);<span class="hljs-comment">//true    </span><br><span class="hljs-keyword">let</span> height=<span class="hljs-number">158</span>;<br><span class="hljs-keyword">const</span> grow=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;&#125;<br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">window</span>.height); <span class="hljs-comment">//undefined</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">window</span>.grow===grow)<span class="hljs-comment">//false</span><br></code></pre></td></tr></table></figure>

<p>5.块级作用域</p>
<p>var没有块级作用域，let和const有块级作用域。</p>
<h2 id="非常经典的案例"><a href="#非常经典的案例" class="headerlink" title="非常经典的案例"></a>非常经典的案例</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">var</span> btns=<span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">&quot;.btn&quot;</span>);</span><br><span class="javascript"><span class="hljs-comment">//1.var</span></span><br><span class="javascript"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;btns.length;i++)&#123;</span><br><span class="javascript">    btns[i].addEventListener(<span class="hljs-string">&quot;click&quot;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(i); <span class="hljs-comment">//都会输出3</span></span><br><span class="javascript">    &#125;,<span class="hljs-literal">false</span>)</span><br><span class="javascript">&#125; <span class="hljs-comment">//执行for循环的时候，会给所有的btn添加监听(瞬间就能完成)，退出for循环的时候，全局变量i的值为3</span></span><br><span class="javascript"><span class="hljs-comment">//当点击的按钮的时候，自然会输出i=3.</span></span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-comment">//2.闭包</span></span><br><span class="javascript"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;btns.length;i++)&#123;</span><br><span class="javascript">    (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index</span>)</span>&#123;</span><br><span class="javascript">        btns[index].addEventListener(<span class="hljs-string">&quot;click&quot;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(index); </span><br><span class="javascript">    &#125;,<span class="hljs-literal">false</span>)</span><br><span class="javascript">    &#125;)(i)</span><br><span class="javascript">&#125; </span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-comment">//3.let</span></span><br><span class="javascript"><span class="hljs-comment">// //此时的i不再是全局变量</span></span><br><span class="javascript"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;btns.length;i++)&#123;</span><br><span class="javascript">    btns[i].addEventListener(<span class="hljs-string">&quot;click&quot;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(i); </span><br><span class="javascript">    &#125;,<span class="hljs-literal">false</span>)</span><br><span class="javascript">&#125;</span><br></code></pre></td></tr></table></figure>

<p>1.使用var</p>
<img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210530144638.png" srcset="/img/loading.gif" lazyload alt="2.let 和 const 的应用-var" style="zoom: 67%;" />

<p>2.使用闭包</p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210530144714.png" srcset="/img/loading.gif" lazyload alt="3.let 和 const 的应用-闭包"></p>
<p>3.使用let</p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210530144732.png" srcset="/img/loading.gif" lazyload alt="4.let 和 const 的应用-let"></p>
<h1 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">模板字符串使用反引号 (``) 来代替普通字符串中的用双引号和单引号。模板字符串可以包含特定语法（`$&#123;expression&#125;`）的占位符。<br></code></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js">/ <span class="hljs-number">1.</span>认识模板字符串<br><span class="hljs-comment">// 模板字符串使用反引号 (` `) 来代替普通字符串中的用双引号和单引号。</span><br><span class="hljs-keyword">const</span> user1=<span class="hljs-string">&#x27;alex&#x27;</span>;<br><span class="hljs-keyword">const</span> user2=<span class="hljs-string">`alex`</span>;<br><span class="hljs-built_in">console</span>.log(user1,user2,user1===user2); <span class="hljs-comment">//alex alex true</span><br><br><span class="hljs-comment">// 2.模板字符串和一般字符串的区别</span><br><span class="hljs-keyword">const</span> person=&#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;alex&#x27;</span>,<br>    <span class="hljs-attr">age</span>:<span class="hljs-number">18</span>,<br>    <span class="hljs-attr">gender</span>:<span class="hljs-string">&quot;male&quot;</span><br>&#125;<br><span class="hljs-comment">// 一般字符串</span><br><span class="hljs-comment">// const info=&quot;name:&quot;+person.name+&quot;, age:&quot;+person.age+&quot;, gender:&quot;+person.gender;</span><br><span class="hljs-comment">// 模板字符串</span><br><span class="hljs-keyword">const</span> info=<span class="hljs-string">`name:<span class="hljs-subst">$&#123;person.name&#125;</span>, age:<span class="hljs-subst">$&#123;person.age&#125;</span>, gender:<span class="hljs-subst">$&#123;person.gender&#125;</span>`</span>;<br><span class="hljs-built_in">console</span>.log(info);<br></code></pre></td></tr></table></figure>

<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210530154647.png" srcset="/img/loading.gif" lazyload alt="image-20210530154645752"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//1.输出多行字符串</span><br><span class="hljs-comment">// 模板字符串中，所有的空格、换行或缩进都会保留在输出中。</span><br>    <span class="hljs-keyword">const</span> info=<span class="hljs-string">`hello</span><br><span class="hljs-string">world!`</span>;<br>    <span class="hljs-built_in">console</span>.log(info);<br><span class="hljs-comment">//  2. 输出`和\等特殊字符</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">`\``</span>,<span class="hljs-string">`\\`</span>); <span class="hljs-comment">//` \</span><br><br><span class="hljs-comment">// 3. 模板字符串的注入</span><br><span class="hljs-keyword">const</span> name=<span class="hljs-string">&quot;alex&quot;</span>;<br><span class="hljs-keyword">const</span> person=&#123;<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>,<span class="hljs-attr">gender</span>:<span class="hljs-string">&quot;male&quot;</span>&#125;;<br><span class="hljs-keyword">const</span> getSex=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">gender</span>)</span>&#123;<br>    <span class="hljs-keyword">return</span> gender===<span class="hljs-string">&quot;male&quot;</span>?<span class="hljs-string">&quot;男&quot;</span>:<span class="hljs-string">&quot;女&quot;</span>;<br>&#125;<br><span class="hljs-keyword">const</span> alex=<span class="hljs-string">`<span class="hljs-subst">$&#123;name&#125;</span>,<span class="hljs-subst">$&#123;person.age+<span class="hljs-number">2</span>&#125;</span>,<span class="hljs-subst">$&#123;getSex(person.gender)&#125;</span>`</span>;<br><span class="hljs-comment">//alex,20,男</span><br><span class="hljs-built_in">console</span>.log(alex);<br></code></pre></td></tr></table></figure>

<h1 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.认识箭头函数，箭头函数是匿名函数</span><br><br><span class="hljs-keyword">const</span> add=<span class="hljs-function">(<span class="hljs-params">x,y</span>)=&gt;</span>&#123;<span class="hljs-keyword">return</span> x+y&#125;;<br><br><span class="hljs-built_in">console</span>.log(add(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>));<br><br><span class="hljs-comment">// 2.箭头函数的结构</span><br><br><span class="hljs-comment">// 参数=&gt;函数体</span><br></code></pre></td></tr></table></figure>

<p>注意：</p>
<p>1.单个参数时可以去掉参数的圆括号；无参数或者多个参数时不能省略参数圆括号。</p>
<p>2.如果函数体只有return语句，可以直接同时省略函数体的花括号和return关键字。</p>
<p>3.返回值是单行对象时，可以省略return关键词，然后在对象的花括号外面加上圆括号。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.单个参数</span><br><span class="hljs-keyword">const</span> add=<span class="hljs-function"><span class="hljs-params">x</span>=&gt;</span>&#123;<span class="hljs-keyword">return</span> x+<span class="hljs-number">1</span>;&#125;<br><span class="hljs-built_in">console</span>.log(add(<span class="hljs-number">2</span>));<br><br><span class="hljs-comment">// 2.单行函数体</span><br><span class="hljs-keyword">const</span> add2=<span class="hljs-function"><span class="hljs-params">x</span>=&gt;</span>x+<span class="hljs-number">1</span>;<br><span class="hljs-built_in">console</span>.log(add2(<span class="hljs-number">2</span>));<br><br><span class="hljs-comment">// 3.单行对象</span><br><span class="hljs-keyword">const</span> add3=<span class="hljs-function">(<span class="hljs-params">x,y</span>)=&gt;</span>(&#123;<span class="hljs-attr">value</span>:x+y&#125;);<br><span class="hljs-built_in">console</span>.log(add3(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>));<br></code></pre></td></tr></table></figure>

<h2 id="this指向"><a href="#this指向" class="headerlink" title="this指向"></a>this指向</h2><p>1.非箭头函数中this指向问题</p>
<p>只有在函数调用的时候，this指向才能确定；this的指向和函数在哪调用无关，只和函数被谁调用有关</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>); <br>&#125;<br><span class="hljs-comment">// 只有在函数调用的时候，this指向才能确定</span><br><span class="hljs-comment">// this的指向和函数在哪调用无关，只和函数被谁调用有关</span><br>add(); <span class="hljs-comment">// 非严格模式下this指向window，严格模式下是undefined</span><br><span class="hljs-built_in">window</span>.add() <span class="hljs-comment">// window</span><br><br><span class="hljs-keyword">const</span> calc=&#123;<br>    <span class="hljs-attr">add</span>:add<br>&#125;<br>calc.add(); <span class="hljs-comment">//calc</span><br><br><span class="hljs-keyword">const</span> adder=calc.add;<br>adder();<span class="hljs-comment">// 非严格模式下this指向window，严格模式下是undefined</span><br><br><span class="hljs-built_in">document</span>.onclick=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>); <span class="hljs-comment">//this指向绑定的dom，此时为document</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params">name</span>)</span>&#123;<br>    <span class="hljs-built_in">this</span>.name=name;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>);<br>&#125;<br><span class="hljs-keyword">var</span> p=<span class="hljs-keyword">new</span> Person(<span class="hljs-string">&quot;Alex&quot;</span>); <span class="hljs-comment">// this指向实例化生产的对象</span><br></code></pre></td></tr></table></figure>

<p>2.箭头函数中的this指向</p>
<p> 箭头函数没有自己的this，它会沿着作用域链向外查找。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 箭头函数没有自己的this</span><br><span class="hljs-keyword">const</span> calc=&#123;<br>    <span class="hljs-attr">add</span>:<span class="hljs-function">()=&gt;</span>&#123;<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>)&#125;<br>&#125;<br>calc.add(); <span class="hljs-comment">//window</span><br><span class="hljs-comment">// 因为箭头函数没有自己的this，所以它会通过作用域链向外查找至全局作用域，而全局作用中this指向window</span><br><br><br><span class="hljs-keyword">const</span> c=&#123;<br>    <span class="hljs-attr">add</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">const</span> adder=<span class="hljs-function">()=&gt;</span>&#123;<br>            <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>);<br>        &#125;<br>        adder();<br>    &#125;<br>&#125;;<br>c.add(); <span class="hljs-comment">// 指向c对象</span><br><br><span class="hljs-keyword">const</span> addFn=c.add;<br>addFn(); <span class="hljs-comment">// 指向window</span><br></code></pre></td></tr></table></figure>

<p>3.箭头函数不适用的场景</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.作为构造函数</span><br><span class="hljs-comment">// 箭头函数没有this</span><br><span class="hljs-comment">// const Person=()=&gt;&#123;&#125;;</span><br><span class="hljs-comment">// new Person();</span><br><br><span class="hljs-comment">// 2.需要this 指向调用对象的时候</span><br><span class="hljs-built_in">document</span>.onclick=<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>); <span class="hljs-comment">//此时会指向window对象</span><br>&#125;<br><span class="hljs-comment">// 3.需要使用arguments时</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>);<br>&#125;<br>add(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>); <span class="hljs-comment">//[1, 2, callee: ƒ, Symbol(Symbol.iterator): ƒ]</span><br><span class="hljs-keyword">const</span> addFn=<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>);<br>&#125;<br>addFn(); <span class="hljs-comment">//会报错</span><br></code></pre></td></tr></table></figure>

<p>4.箭头函数的应用</p>
<p>如果代码写成下面这样，程序执行会有问题，因为<code>setInterval</code>中的回调函数中的<code>this</code>会指向<code>window</code>对象，导致无法进行加法。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>开始<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;result&quot;</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> btn=<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;btn&quot;</span>);</span><br><span class="javascript">    <span class="hljs-keyword">const</span> result=<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;result&quot;</span>);</span><br><span class="javascript">    <span class="hljs-keyword">const</span> timer=&#123;</span><br><span class="javascript">        <span class="hljs-attr">time</span>:<span class="hljs-number">0</span>,</span><br><span class="javascript">        <span class="hljs-attr">start</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">            btn.addEventListener(</span><br><span class="javascript">                <span class="hljs-string">&quot;click&quot;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">                    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">                        <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>);</span><br><span class="javascript">                        <span class="hljs-built_in">this</span>.time++;</span><br><span class="javascript">                        result.innerHTML=<span class="hljs-built_in">this</span>.time;</span><br><span class="javascript">                    &#125;,<span class="hljs-number">1000</span>);</span><br><span class="javascript">                &#125;</span><br><span class="javascript">            ,<span class="hljs-literal">false</span>);</span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;</span><br><span class="javascript">    timer.start();</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>常规的解决是备份<code>this</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> timer=&#123;<br>    <span class="hljs-attr">time</span>:<span class="hljs-number">0</span>,<br>    <span class="hljs-attr">start</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">var</span> self =<span class="hljs-built_in">this</span>;<br>        btn.addEventListener(<br>            <span class="hljs-string">&quot;click&quot;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>                <span class="hljs-built_in">setInterval</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>                    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>);<br>                    self.time++;<br>                    result.innerHTML=self.time;<br>                &#125;,<span class="hljs-number">1000</span>);<br>            &#125;<br>        ,<span class="hljs-literal">false</span>);<br>    &#125;<br>&#125;<br> timer.start();<br></code></pre></td></tr></table></figure>

<p>但是可以使用<strong>箭头函数</strong>来解决这个问题，箭头函数本身没有<code>this</code>，所以它会向外层的作用域链查找<code>this</code>。</p>
<p>注意，此时也要把<code>addEventListener</code>中的匿名函数改为箭头函数，不然<code>setInterval</code>的箭头函数会向外到<code>addEventListener</code>中的匿名函数找<code>this</code>，而该函数this为绑定的dom节点，从而<code>setInterval</code>的箭头函数会把btn（绑定的dom）当做this。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> timer=&#123;<br>    <span class="hljs-attr">time</span>:<span class="hljs-number">0</span>,<br>    <span class="hljs-attr">start</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>        btn.addEventListener(<br>            <span class="hljs-string">&quot;click&quot;</span>,<span class="hljs-function">()=&gt;</span>&#123;<br>                <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>                    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>);<br>                    <span class="hljs-built_in">this</span>.time++;<br>                    result.innerHTML=<span class="hljs-built_in">this</span>.time;<br>                &#125;,<span class="hljs-number">1000</span>);<br>            &#125;<br>        ,<span class="hljs-literal">false</span>);<br>    &#125;<br>&#125;<br> timer.start();<br></code></pre></td></tr></table></figure>

<p>将这两个部分都改为箭头函数后，<code>setInterval</code>中的匿名函数最终会在<code>start()</code>方法找<code>this</code>。</p>
<p>而注意到最后会调用<code>timer.start()</code>，所以start()中的this就是指向<code>timer</code>, 因此 <code>this.time++;</code> 和<code>result.innerHTML=this.time;</code> 这两句中的<code>this</code> 指向的就是<code>timer</code>。 </p>
<h1 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h1><h2 id="数组解构赋值"><a href="#数组解构赋值" class="headerlink" title="数组解构赋值"></a>数组解构赋值</h2><p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210603194725.png" srcset="/img/loading.gif" lazyload alt="image-20210603194723759"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210603194753.png" srcset="/img/loading.gif" lazyload alt="image-20210603194752249"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210603194905.png" srcset="/img/loading.gif" lazyload alt="image-20210603194903992"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210603195037.png" srcset="/img/loading.gif" lazyload alt="image-20210603195036092"></p>
<h3 id="1-解构赋值的定义"><a href="#1-解构赋值的定义" class="headerlink" title="1.解构赋值的定义"></a>1.解构赋值的定义</h3><p>解析某一数据的结构，将想要的东西提取出来，赋值给变量或常量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><span class="hljs-comment">// const a=arr[0];</span><br><span class="hljs-comment">// const b=arr[1];</span><br><span class="hljs-comment">// const c=arr[2];</span><br><span class="hljs-keyword">const</span> [a, b, c] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><span class="hljs-built_in">console</span>.log(a, b, c); <span class="hljs-comment">//1 2 3</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 模式(结构)匹配,索引值相对应</span><br><span class="hljs-keyword">let</span> [a,b,c]=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];<br><br><span class="hljs-comment">// 如果想要取出1,5,3</span><br><span class="hljs-keyword">const</span> [d,[,,e],f]=[<span class="hljs-number">1</span>,[<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>],<span class="hljs-number">3</span>];<br><span class="hljs-built_in">console</span>.log(d,e,f); <span class="hljs-comment">//1 5 3</span><br></code></pre></td></tr></table></figure>

<h3 id="2-解构赋值的默认值"><a href="#2-解构赋值的默认值" class="headerlink" title="2.解构赋值的默认值"></a>2.解构赋值的默认值</h3><p>只有当一个数组成员严格等于（===） undefined时，它的的默认值才会生生效。如果默认值是表达式时，默认值表达式是惰性求值的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> [a, b] = []; <span class="hljs-comment">//a=undefined,b=undefined</span><br><span class="hljs-keyword">const</span> [c = <span class="hljs-number">1</span>, d = <span class="hljs-number">2</span>] = []; <span class="hljs-comment">//1 2</span><br><br><span class="hljs-comment">//只有当一个数组成员严格等于（===） undefined时，对应的默认值才会生生效。</span><br><span class="hljs-keyword">const</span> [e = <span class="hljs-number">1</span>, f = <span class="hljs-number">2</span>] = [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>] <span class="hljs-comment">//3,4</span><br><span class="hljs-keyword">const</span> [i = <span class="hljs-number">2</span>, j = <span class="hljs-number">6</span>] = [<span class="hljs-number">5</span>] <span class="hljs-comment">//5 6</span><br><span class="hljs-built_in">console</span>.log(a, b, c, d, e, f, i, j); <span class="hljs-comment">//undefined undefined 1 2 3 4 5 6</span><br><br><span class="hljs-comment">// 如果默认值是表达式时，默认值表达式是惰性求值的</span><br><span class="hljs-keyword">const</span> func = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;我被执行了&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;<br>&#125;;<br><span class="hljs-keyword">const</span> [x = func()] = [<span class="hljs-number">1</span>]; <span class="hljs-comment">// 此时函数func并没有执行</span><br><span class="hljs-keyword">const</span> [y=func()]=[];<br><span class="hljs-built_in">console</span>.log(x,y); <span class="hljs-comment">//1 2 </span><br></code></pre></td></tr></table></figure>

<h3 id="3-解构赋值的应用"><a href="#3-解构赋值的应用" class="headerlink" title="3.解构赋值的应用"></a>3.解构赋值的应用</h3><h4 id="类数组可以进行解构赋值"><a href="#类数组可以进行解构赋值" class="headerlink" title="类数组可以进行解构赋值"></a>类数组可以进行解构赋值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 1.常见的类数组的解构赋值</span><br><span class="hljs-comment">// arguments</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">func</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-keyword">const</span> [a,b]=<span class="hljs-built_in">arguments</span>;<br>    <span class="hljs-built_in">console</span>.log(a,b); <span class="hljs-comment">//1 2</span><br>&#125;<br>func(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>); <br><br><span class="hljs-comment">// NodeList</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">&#x27;p&#x27;</span>)); <span class="hljs-comment">//NodeList(3) [p, p, p]</span><br><span class="hljs-keyword">const</span> [p1,p2,p3]=(<span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">&quot;p&quot;</span>));<br><span class="hljs-built_in">console</span>.log(p1,p2,p3);<br></code></pre></td></tr></table></figure>

<h4 id="函数参数的解构赋值"><a href="#函数参数的解构赋值" class="headerlink" title="函数参数的解构赋值"></a>函数参数的解构赋值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> array=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>];<br><span class="hljs-comment">// 不用解构赋值参数的写法如下</span><br><span class="hljs-comment">// const add=arr=&gt;arr[0]+arr[1];</span><br><span class="hljs-comment">// 使用解构赋值</span><br><span class="hljs-keyword">const</span> add=<span class="hljs-function">(<span class="hljs-params">[x,y]</span>)=&gt;</span>x+y;<br><span class="hljs-built_in">console</span>.log(add(array)); <span class="hljs-comment">//3 </span><br><br><span class="hljs-comment">//还可以给形参添加默认值</span><br><span class="hljs-keyword">const</span> add1=<span class="hljs-function">(<span class="hljs-params">[x=<span class="hljs-number">1</span>,y=<span class="hljs-number">3</span>]</span>)=&gt;</span>x+y;<br><span class="hljs-built_in">console</span>.log(add1([])); <span class="hljs-comment">//4</span><br></code></pre></td></tr></table></figure>

<h4 id="交换变量的值"><a href="#交换变量的值" class="headerlink" title="交换变量的值"></a>交换变量的值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> x=<span class="hljs-number">1</span> ,y=<span class="hljs-number">2</span>;<br><span class="hljs-comment">//相当于[x,y] =[2,1]，而不是右边的y赋值给x，x赋值给y</span><br>[x,y]=[y,x];<br><span class="hljs-built_in">console</span>.log(x,y); <span class="hljs-comment">//2 1</span><br></code></pre></td></tr></table></figure>

<h2 id="对象解构赋值"><a href="#对象解构赋值" class="headerlink" title="对象解构赋值"></a>对象解构赋值</h2><p>1.模式匹配，属性名相同的完成赋值，不需要按照顺序</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 1.模式匹配，属性名相同的完成赋值，不需要按照顺序</span><br><span class="hljs-comment">//简写形式</span><br><span class="hljs-keyword">const</span> &#123;age,name&#125;=&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;alex&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;;<br><span class="hljs-built_in">console</span>.log(age,name); <span class="hljs-comment">//18 &quot;alex&quot;</span><br><span class="hljs-comment">// 完整形式</span><br><span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">age</span>:age1,<span class="hljs-attr">name</span>:name1&#125;=&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;alex&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;;<br><span class="hljs-built_in">console</span>.log(name1,age1); <span class="hljs-comment">//alex 18</span><br></code></pre></td></tr></table></figure>

<p>2.对象解构赋值的注意事项</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 1.默认值的生效条件</span><br><span class="hljs-comment">// 对象的数值值严格等于undefined时，对应的默认值才会生效</span><br><span class="hljs-keyword">const</span> &#123;name &#125; = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;alex&quot;</span>&#125;;<br><span class="hljs-built_in">console</span>.log(name); <span class="hljs-comment">//&quot;alex&quot;</span><br><span class="hljs-comment">// 注意默认值的赋值是用等号，而不是用冒号</span><br><span class="hljs-keyword">const</span> &#123;name1=<span class="hljs-string">&quot;billie&quot;</span>,age=<span class="hljs-number">0</span>&#125;=&#123;&#125;;<br><span class="hljs-built_in">console</span>.log(name1);<br><span class="hljs-comment">// 2.如果默认值是表达式，默认值表达式是惰性求值的</span><br><br><span class="hljs-comment">// 3.将一个已经声明的变量用于解构赋值</span><br><span class="hljs-keyword">let</span> x=<span class="hljs-number">1</span>;<br><span class="hljs-comment">// &#123;x&#125;=&#123;x:3&#125;; 会报错，和解决箭头函数的单行语句的返回值是对象一样，在整个外层加上括号</span><br>(&#123;x&#125;=&#123;<span class="hljs-attr">x</span>:<span class="hljs-number">3</span>&#125;);<br><span class="hljs-built_in">console</span>.log(x); <span class="hljs-comment">//3</span><br><br><span class="hljs-comment">// 4.可以取到继承的属性</span><br><span class="hljs-keyword">const</span> &#123;toString&#125;=&#123;&#125;;<br><span class="hljs-built_in">console</span>.log(toString);<span class="hljs-comment">// 并没有输出undefined</span><br><span class="hljs-comment">// toString的属性继承自Object</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.prototype);<br><span class="hljs-keyword">const</span> &#123;a&#125;=&#123;&#125;;<br><span class="hljs-built_in">console</span>.log(a); <span class="hljs-comment">//undefined</span><br></code></pre></td></tr></table></figure>

<p>3.对象解构赋值的应用</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// 函数参数的解构赋值</span><br><span class="hljs-comment">//const info=user=&gt;console.log(user.name,user.age);</span><br><span class="hljs-keyword">const</span> info=<span class="hljs-function">(<span class="hljs-params">&#123;age,name&#125;</span>)=&gt;</span><span class="hljs-built_in">console</span>.log(age,name);<br>info(&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;hh&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">12</span>&#125;);<br></code></pre></td></tr></table></figure>

<h2 id="其他数组类型的解构赋值"><a href="#其他数组类型的解构赋值" class="headerlink" title="其他数组类型的解构赋值"></a>其他数组类型的解构赋值</h2><p>1.字符串的解构赋值</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">//数组形式的解构赋值</span><br><span class="hljs-keyword">const</span> [a,b,,,c]=<span class="hljs-string">&quot;hello&quot;</span>;<br><span class="hljs-built_in">console</span>.log(a,b,c); <span class="hljs-comment">//h e o</span><br><span class="hljs-comment">// 对象形式解构赋值</span><br><span class="hljs-keyword">const</span> &#123;<span class="hljs-number">0</span>:x,<span class="hljs-number">1</span>:y,length&#125;=<span class="hljs-string">&quot;hello&quot;</span>;<br><span class="hljs-built_in">console</span>.log(x,y,length); <span class="hljs-comment">//h e 5</span><br></code></pre></td></tr></table></figure>

<p>2.数值和布尔值的解构赋值(只能按照对象形式解构赋值), 会自动将右侧的数值或布尔值转换为对象</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> &#123;aa,toString&#125;=<span class="hljs-number">123</span>;<br><span class="hljs-built_in">console</span>.log(aa,toString); <span class="hljs-comment">//toString属性是继承而来的</span><br></code></pre></td></tr></table></figure>

<p>3.undefined和null的解构赋值会报错</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// 由于undefined和null，无法转化为对象，所以对它们进行解构赋值都会报错</span><br><span class="hljs-keyword">const</span> &#123;ff&#125;=<span class="hljs-literal">undefined</span>;<br><span class="hljs-built_in">console</span>.log(ff); <span class="hljs-comment">//报错</span><br></code></pre></td></tr></table></figure>



<h1 id="简介表示"><a href="#简介表示" class="headerlink" title="简介表示"></a>简介表示</h1><h2 id="属性和方法的简洁表示"><a href="#属性和方法的简洁表示" class="headerlink" title="属性和方法的简洁表示"></a>属性和方法的简洁表示</h2><h3 id="1-属性的简洁表示"><a href="#1-属性的简洁表示" class="headerlink" title="1.属性的简洁表示"></a>1.属性的简洁表示</h3><p>当键名和变量名(常量名)一样的时候，可以只写一个。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> age=<span class="hljs-number">19</span>;<br><span class="hljs-keyword">const</span> person1=&#123;<br>    <span class="hljs-comment">// age:age, 直接写age</span><br>    age,<br>&#125;        <br><span class="hljs-built_in">console</span>.log(person1.age);<br></code></pre></td></tr></table></figure>

<h3 id="2-方法的简洁表示"><a href="#2-方法的简洁表示" class="headerlink" title="2.方法的简洁表示"></a>2.方法的简洁表示</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> person2=&#123;<br>    <span class="hljs-comment">// speak:function()&#123;&#125;</span><br>    <span class="hljs-function"><span class="hljs-title">speak</span>(<span class="hljs-params"></span>)</span>&#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="方括号语法"><a href="#方括号语法" class="headerlink" title="方括号语法"></a>方括号语法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.方括号语法</span><br><span class="hljs-keyword">const</span> prop=<span class="hljs-string">&quot;age&quot;</span>;<br><span class="hljs-keyword">const</span> person=&#123;&#125;;<br>person[prop]=<span class="hljs-number">18</span>; <span class="hljs-comment">// &#123;age:18&#125;</span><br><span class="hljs-comment">// ES6新增如下</span><br><span class="hljs-keyword">const</span> person1=&#123;<br>    [prop]:<span class="hljs-number">19</span><br>&#125;<br><br><span class="hljs-comment">// 2.方括号可以放[值或者计算可以得到的值(表达式)]</span><br><span class="hljs-keyword">const</span> prop1=<span class="hljs-string">&quot;age&quot;</span>;<br><span class="hljs-keyword">const</span> func=<span class="hljs-function">()=&gt;</span><span class="hljs-string">&#x27;gender&#x27;</span>;<br><span class="hljs-keyword">const</span> person2=&#123;<br>    [prop1]:<span class="hljs-number">18</span>,<br>    [func()]:<span class="hljs-string">&#x27;female&#x27;</span><br>&#125;<br><span class="hljs-comment">// &#123;age: 18, gender: &quot;female&quot;&#125;</span><br><br><span class="hljs-comment">// 3.方括号语法和点语法的区别</span><br><span class="hljs-comment">// 点语法是方括号语法的特殊形式</span><br><span class="hljs-keyword">const</span> person3=[];<br><span class="hljs-comment">// perosn.age 等价于 person[&#x27;age&#x27;]</span><br></code></pre></td></tr></table></figure>

<h1 id="函数默认参数值"><a href="#函数默认参数值" class="headerlink" title="函数默认参数值"></a>函数默认参数值</h1><p><strong>函数默认参数</strong>允许在没有值或<code>undefined</code>被传入时使用默认形参。只有在①不传参数 ②明确传递undefined作为参数 这两种情况下,默认值才会生效。</p>
<h3 id="1-基本概念"><a href="#1-基本概念" class="headerlink" title="1.基本概念"></a>1.基本概念</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.函数参数的默认值</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">multiply</span>(<span class="hljs-params">a,b=<span class="hljs-number">1</span></span>)</span>&#123;<br>    <span class="hljs-keyword">return</span> a*b;<br>&#125;<br><span class="hljs-built_in">console</span>.log(multiply(<span class="hljs-number">3</span>) ) <span class="hljs-comment">//3</span><br><br><span class="hljs-comment">// 2.默认值的生效</span><br><span class="hljs-comment">// ①不传参数 ②明确传递undefined作为参数 只有这两种情况下,默认值才会生效</span><br><span class="hljs-built_in">console</span>.log(multiply(<span class="hljs-number">2</span>,<span class="hljs-literal">undefined</span>)); <span class="hljs-comment">//2</span><br><span class="hljs-built_in">console</span>.log(multiply(<span class="hljs-number">2</span>,<span class="hljs-string">&quot;&quot;</span>)); <span class="hljs-comment">//2*&quot;&quot; 最后结果会被隐形转换为0</span><br><br><span class="hljs-comment">// 3.默认值表达式</span><br><span class="hljs-comment">// 如果默认值是表达式，默认值表达式是惰性求值的</span><br><br><br><span class="hljs-comment">// 4.设置默认值的小技巧</span><br><span class="hljs-comment">// 函数参数的默认值最好从参数列表的右边开始设置。</span><br><br><span class="hljs-keyword">const</span> multiply2=<span class="hljs-function">(<span class="hljs-params">x=<span class="hljs-number">1</span>,y</span>)=&gt;</span>x*y;<br><span class="hljs-comment">// 此时如果想要使用第一个默认值，必须明确传递undefined</span><br><span class="hljs-built_in">console</span>.log(multiply(<span class="hljs-literal">undefined</span>,<span class="hljs-number">2</span>))<br></code></pre></td></tr></table></figure>

<h3 id="2-函数默认参数的应用"><a href="#2-函数默认参数的应用" class="headerlink" title="2.函数默认参数的应用"></a>2.函数默认参数的应用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.接收多参数，如果按照默认写法，传参的时候需要记住参数顺序</span><br><span class="hljs-keyword">const</span> user=<span class="hljs-function">(<span class="hljs-params">name=<span class="hljs-string">&quot;zhangsan&quot;</span>,age=<span class="hljs-number">12</span>,gender=<span class="hljs-string">&quot;female&quot;</span></span>)=&gt;</span><br>    <span class="hljs-built_in">console</span>.log(name,age,gender);<br>user(<span class="hljs-string">&quot;alex&quot;</span>,<span class="hljs-number">18</span>,<span class="hljs-string">&#x27;male&#x27;</span>);<br><br><span class="hljs-comment">// 2. 法一：接收一个对象作为参数</span><br><span class="hljs-keyword">const</span> user1=<span class="hljs-function"><span class="hljs-params">option</span>=&gt;</span><span class="hljs-built_in">console</span>.log(<br>    option.name,option.age,option.gender);<br>user1(&#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;alex&#x27;</span>,<br>    <span class="hljs-attr">age</span>:<span class="hljs-number">18</span>,<br>    <span class="hljs-attr">gender</span>:<span class="hljs-string">&quot;male&quot;</span><br>&#125;);<br><br><span class="hljs-comment">// 3.法二：解构赋值的默认值</span><br><span class="hljs-keyword">const</span> user2=<span class="hljs-function">(<span class="hljs-params">&#123;name=<span class="hljs-string">&quot;zhangsan&quot;</span>,age=<span class="hljs-number">12</span>,gender=<span class="hljs-string">&quot;female&quot;</span>&#125;</span>)=&gt;</span><br><span class="hljs-built_in">console</span>.log(name,age,gender);<br><br>user2(&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;alex&quot;</span>&#125;);<br><span class="hljs-comment">// 但是不能什么都不传，如果什么都不传就相当于传了undefined</span><br><span class="hljs-comment">// 而无法对undefined进行解构赋值</span><br><span class="hljs-comment">// user2();</span><br><br><span class="hljs-comment">// 4.法三：函数参数的默认值</span><br><span class="hljs-comment">// 把&#123;name=&quot;zhangsan&quot;,age=12,gender=&quot;female&quot;&#125;看为option</span><br><span class="hljs-comment">// option的默认参数为&#123;&#125;，当无不传入参数或者传入undefined的时候</span><br><span class="hljs-comment">// option=&#123;&#125; 会把空对象赋值给option，也就是下面一行的解构赋值</span><br><span class="hljs-comment">// &#123;name=&quot;zhangsan&quot;,age=12,gender=&quot;female&quot;&#125;=&#123;&#125;</span><br><br><span class="hljs-keyword">const</span> user3=<span class="hljs-function">(<span class="hljs-params">&#123;name=<span class="hljs-string">&quot;zhangsan&quot;</span>,age=<span class="hljs-number">12</span>,gender=<span class="hljs-string">&quot;female&quot;</span>&#125;=&#123;&#125;</span>)=&gt;</span><br><span class="hljs-built_in">console</span>.log(name,age,gender);<br>user3(); <span class="hljs-comment">//此时不会报错</span><br></code></pre></td></tr></table></figure>

<h1 id="剩余参数与展开语法"><a href="#剩余参数与展开语法" class="headerlink" title="剩余参数与展开语法"></a>剩余参数与展开语法</h1><h2 id="剩余参数"><a href="#剩余参数" class="headerlink" title="剩余参数"></a>剩余参数</h2><h3 id="剩余参数定义"><a href="#剩余参数定义" class="headerlink" title="剩余参数定义"></a>剩余参数定义</h3><p><strong>剩余参数</strong>语法允许我们将一个不定数量的参数表示为一个数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.认识剩余参数</span><br><span class="hljs-comment">// 当不知道参数有多少个，可以用省略号代替，省略号后面接参数名</span><br><span class="hljs-keyword">const</span> add1=<span class="hljs-function">(<span class="hljs-params">x,y,z,...args</span>)=&gt;</span>&#123;&#125;;<br><br><span class="hljs-comment">// 2.剩余参数的本质，剩余参数是一个数组，如果没有值则是空数组</span><br><span class="hljs-keyword">const</span> add2=<span class="hljs-function">(<span class="hljs-params">x,y,z,...args</span>)=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(x,y,args);<br>&#125;;<br>add2(<span class="hljs-number">1</span>); <span class="hljs-comment">//1 undefined []</span><br>add2(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>);  <span class="hljs-comment">//1 2 [4, 5, 6]</span><br><br><span class="hljs-comment">// 3.箭头函数与剩余参数</span><br><span class="hljs-comment">// 箭头函数的参数部分即使只有一个剩余参数，也不能省略括号</span><br><span class="hljs-keyword">const</span> add3=<span class="hljs-function">(<span class="hljs-params">...args</span>)=&gt;</span>&#123;&#125;;<br><br><span class="hljs-comment">// 4.使用剩余参数替代arguments获取实际参数</span><br><span class="hljs-keyword">const</span> add4=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-comment">// 记住箭头函数没有arguments，因为它没有this</span><br>    <span class="hljs-comment">// arguments是类数组，而剩余参数是个数组</span><br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>);<br>&#125;<br>add4(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>);<br><br><span class="hljs-keyword">const</span> add5=<span class="hljs-function">(<span class="hljs-params">...args</span>)=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(args);<br>&#125;<br><span class="hljs-comment">// 5.剩余参数的位置</span><br><span class="hljs-comment">// 剩余参数只能作为最后一个参数</span><br></code></pre></td></tr></table></figure>

<h3 id="剩余参数应用"><a href="#剩余参数应用" class="headerlink" title="剩余参数应用"></a>剩余参数应用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.add函数</span><br><span class="hljs-keyword">const</span> add=<span class="hljs-function">(<span class="hljs-params">...args</span>)=&gt;</span>&#123;<br>    <span class="hljs-keyword">let</span> sum=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span> ;i&lt;args.length;i++)&#123;<br>        sum+=args[i];<br>    &#125;<br>    <span class="hljs-keyword">return</span> sum;<br>&#125;;<br><span class="hljs-built_in">console</span>.log(add(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>));<br><span class="hljs-comment">// 使用reduce方法</span><br><span class="hljs-keyword">const</span> add_reduce=<span class="hljs-function">(<span class="hljs-params">...args</span>)=&gt;</span>&#123;<br>    <span class="hljs-keyword">return</span> args.reduce(<span class="hljs-function">(<span class="hljs-params">total,currentValue</span>)=&gt;</span>&#123; <span class="hljs-keyword">return</span> total+currentValue&#125;);<br>&#125;;<br><span class="hljs-built_in">console</span>.log(add_reduce(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">9</span>));<br><br><br><span class="hljs-comment">// 2.与解构赋值结合使用</span><br><span class="hljs-comment">// 当剩余参数不是作为函数的参数时，剩余参数叫做剩余元素(Rest element)</span><br><br><span class="hljs-comment">// 剩余元素+数组解构赋值</span><br><span class="hljs-keyword">const</span> [num,...args]=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>];<br><span class="hljs-built_in">console</span>.log(num,args); <span class="hljs-comment">//1 [2, 3, 4]</span><br><br><span class="hljs-comment">// 剩余参数+数组解构赋值+箭头函数</span><br><span class="hljs-keyword">const</span> func=<span class="hljs-function">(<span class="hljs-params">[num,...args]</span>)=&gt;</span>&#123;&#125;;<br>func([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]);<br><br><span class="hljs-comment">// 剩余元素+对象解构赋值</span><br><span class="hljs-comment">// 此时剩余元素为数组</span><br><span class="hljs-keyword">const</span> &#123;x,y,...z&#125;=&#123;<span class="hljs-attr">x</span>:<span class="hljs-number">1</span>,<span class="hljs-attr">b</span>:<span class="hljs-number">2</span>,<span class="hljs-attr">y</span>:<span class="hljs-number">3</span>,<span class="hljs-attr">d</span>:<span class="hljs-number">4</span>&#125;;<br><span class="hljs-built_in">console</span>.log(x,y,z); <span class="hljs-comment">//1 3 &#123;b: 2, d: 4&#125;</span><br><br><span class="hljs-comment">// 剩余参数+对象解构赋值+箭头函数</span><br><span class="hljs-keyword">const</span> fun=<span class="hljs-function">(<span class="hljs-params">&#123;m,n,...o&#125;</span>)=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(m,n,o);<br>&#125;;<br>fun(&#123;<span class="hljs-attr">m</span>:<span class="hljs-number">1</span>,<span class="hljs-attr">n</span>:<span class="hljs-number">3</span>,<span class="hljs-attr">p</span>:<span class="hljs-number">3</span>,<span class="hljs-attr">z</span>:<span class="hljs-number">8</span>&#125;);<br></code></pre></td></tr></table></figure>

<h2 id="展开语法"><a href="#展开语法" class="headerlink" title="展开语法"></a>展开语法</h2><p><strong>展开语法(Spread syntax),</strong> 可以在函数调用/数组构造时, 将数组表达式或者string在语法层面展开。</p>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.展开语法</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Math</span>.min(...[<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>])); <span class="hljs-comment">// 相当于Math.min(3,1,2);</span><br><br><span class="hljs-comment">// 2.展开语法和剩余参数的区别</span><br><span class="hljs-comment">// 展开语法[3,1,2]-&gt;3,1,2</span><br><span class="hljs-comment">// 剩余参数 (3,1,2)-&gt;[3,1,2]</span><br><br><span class="hljs-comment">// 剩余参数</span><br><span class="hljs-keyword">const</span> add=<span class="hljs-function">(<span class="hljs-params">...args</span>)=&gt;</span>&#123;<br>    <span class="hljs-comment">// 展开语法</span><br>    <span class="hljs-built_in">console</span>.log(...args);<br>&#125;;<br>add(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>);<br></code></pre></td></tr></table></figure>

<h3 id="展开语法的应用"><a href="#展开语法的应用" class="headerlink" title="展开语法的应用"></a>展开语法的应用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.复制数组</span><br><span class="hljs-keyword">const</span> a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><span class="hljs-keyword">const</span> b = a;<br><span class="hljs-built_in">console</span>.log(a === b); <span class="hljs-comment">//true 引用</span><br><br><span class="hljs-keyword">const</span> c = [...a]; <span class="hljs-comment">//等价于const c=[1,2,3];</span><br><span class="hljs-built_in">console</span>.log(a === c); <span class="hljs-comment">//false</span><br><br><span class="hljs-comment">// 2.合并数组</span><br><span class="hljs-keyword">const</span> m=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>];<br><span class="hljs-keyword">const</span> n=[<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>];<br><span class="hljs-keyword">const</span> i=[<span class="hljs-number">7</span>,...m,...n]; <br><span class="hljs-built_in">console</span>.log(i); <span class="hljs-comment">//[7,1, 2, 3, 4, 5]</span><br><br><span class="hljs-comment">// 3.字符串转数组</span><br><span class="hljs-built_in">console</span>.log(...<span class="hljs-string">&quot;app&quot;</span>); <span class="hljs-comment">// console.log(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;);</span><br><span class="hljs-built_in">console</span>.log([...<span class="hljs-string">&quot;apple&quot;</span>]); <span class="hljs-comment">// [&quot;a&quot;, &quot;p&quot;, &quot;p&quot;, &quot;l&quot;, &quot;e&quot;]</span><br><br><span class="hljs-comment">// 4.常见的类数组转数组</span><br><span class="hljs-comment">// arguments</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">func</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(...arguments); <span class="hljs-comment">//console.log(1,2,3);</span><br>    <span class="hljs-built_in">console</span>.log([...arguments]);<br>&#125;<br>func(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>);<br><span class="hljs-comment">// NodeList</span><br><span class="hljs-built_in">console</span>.log([...document.querySelectorAll(<span class="hljs-string">&quot;p&quot;</span>)]);<br></code></pre></td></tr></table></figure>

<h3 id="对象展开"><a href="#对象展开" class="headerlink" title="对象展开"></a>对象展开</h3><p>对象的展开就是相当于把对象的所有属性罗列出来。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.展开对象</span><br><span class="hljs-comment">// 对象的展开就是相当于把对象的所有属性罗列出来</span><br><span class="hljs-comment">// 对象必须在&#123;&#125;中展开，不能直接展开</span><br><span class="hljs-keyword">const</span> apple=&#123;<br>    <span class="hljs-attr">color</span>:<span class="hljs-string">&quot;red&quot;</span>,<br>    <span class="hljs-attr">taste</span>:<span class="hljs-string">&quot;sweet&quot;</span><br>&#125;<br><span class="hljs-built_in">console</span>.log(&#123;...apple&#125;); <span class="hljs-comment">//&#123;color:&quot;red&quot;,taste:&quot;sweet&quot;&#125;</span><br><br><span class="hljs-comment">// 2.合并对象</span><br><span class="hljs-comment">//新对象拥有全部的属性，相同属性，后者会覆盖前者 </span><br><span class="hljs-keyword">const</span> banana=&#123;<br>    <span class="hljs-attr">color</span>:<span class="hljs-string">&quot;yellow&quot;</span>,<br>    <span class="hljs-attr">category</span>:<span class="hljs-string">&quot;fruit&quot;</span><br>&#125;<br><span class="hljs-built_in">console</span>.log(&#123;...apple,...banana&#125;);<br><span class="hljs-comment">// &#123;color: &quot;yellow&quot;, taste: &quot;sweet&quot;, category: &quot;fruit&quot;&#125;</span><br></code></pre></td></tr></table></figure>

<h3 id="对象展开的注意事项"><a href="#对象展开的注意事项" class="headerlink" title="对象展开的注意事项"></a>对象展开的注意事项</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.空对象的展开</span><br><span class="hljs-comment">// 如果展开空对象，是没有任何效果</span><br><span class="hljs-comment">// 对象的展开，相当于把所有对象的属性罗列出来</span><br><span class="hljs-built_in">console</span>.log(&#123;...&#123;&#125;&#125;); <span class="hljs-comment">//&#123;&#125;</span><br><br><span class="hljs-comment">// 2.非对象的展开</span><br><span class="hljs-comment">// 如果展开的不是对象，则自动会将其转为对象，再将其罗列出来</span><br><span class="hljs-built_in">console</span>.log(&#123;..<span class="hljs-number">.1</span>&#125;); <span class="hljs-comment">//&#123;&#125; 1转为对象后，并没有属性罗列</span><br><span class="hljs-built_in">console</span>.log(&#123;...null&#125;); <span class="hljs-comment">//&#123;&#125;</span><br><span class="hljs-built_in">console</span>.log(&#123;...<span class="hljs-string">&quot;alex&quot;</span>&#125;); <span class="hljs-comment">//&#123;0: &quot;a&quot;, 1: &quot;l&quot;, 2: &quot;e&quot;, 3: &quot;x&quot;&#125;</span><br><span class="hljs-built_in">console</span>.log(&#123;...[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]&#125;); <span class="hljs-comment">//&#123;0: 1, 1: 2&#125;</span><br><br><br><span class="hljs-comment">// 3.含对象属性的对象的</span><br><span class="hljs-comment">// 对象属性会继续被展开</span><br><span class="hljs-keyword">const</span> apple=&#123;<br>    <span class="hljs-attr">feature</span>:&#123;<br>        <span class="hljs-attr">taste</span>:<span class="hljs-string">&quot;甜&quot;</span><br>    &#125;<br>&#125;;<br><span class="hljs-keyword">const</span> pen=&#123;<br>    <span class="hljs-attr">feature</span>:&#123;<br>        <span class="hljs-attr">color</span>:<span class="hljs-string">&quot;black&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">use</span>:<span class="hljs-string">&quot;写字&quot;</span><br>&#125;<br><span class="hljs-built_in">console</span>.log(&#123;...apple&#125;); <span class="hljs-comment">//&#123;feature: &#123;taste:&#x27;甜&#x27;&#125;&#125;</span><br><span class="hljs-built_in">console</span>.log(&#123;...apple,...pen&#125;); <span class="hljs-comment">//&#123;feature: &#123;color:&#x27;black&#x27;&#125;, use: &quot;写字&quot;&#125;</span><br></code></pre></td></tr></table></figure>

<h3 id="对象展开的应用"><a href="#对象展开的应用" class="headerlink" title="对象展开的应用"></a>对象展开的应用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.复制对象</span><br><span class="hljs-keyword">const</span> a=&#123;<span class="hljs-attr">x</span>:<span class="hljs-number">1</span>,<span class="hljs-attr">y</span>:<span class="hljs-number">2</span>&#125;;<br><span class="hljs-keyword">const</span> b=&#123;...a&#125;;<br><span class="hljs-built_in">console</span>.log(a===b); <span class="hljs-comment">//false</span><br><br><span class="hljs-comment">// 2.用户参数和默认参数</span><br><span class="hljs-comment">// 法一： 解构赋值+函数默认参数</span><br><span class="hljs-keyword">const</span> user1=<span class="hljs-function">(<span class="hljs-params">&#123;name=<span class="hljs-string">&quot;zhangsan&quot;</span>,age=<span class="hljs-number">0</span>,gender=<span class="hljs-string">&quot;male&quot;</span>&#125;=&#123;&#125;</span>)=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(name,age,gender);<br>&#125;;<br><span class="hljs-comment">// 法二: 对象展开 +解构赋值</span><br><span class="hljs-keyword">const</span> user2=<span class="hljs-function"><span class="hljs-params">userParm</span>=&gt;</span>&#123;<br>    <span class="hljs-keyword">const</span> defaultParm=&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;zhangsan&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">gender</span>:<span class="hljs-string">&quot;male&quot;</span>&#125;;<br>    <span class="hljs-comment">// 合并默认参数和用户参数，还可以对结果进行解构</span><br>    <span class="hljs-keyword">const</span> &#123;name,age,gender&#125;=&#123;...defaultParm,...userParm&#125;;<br>    <span class="hljs-built_in">console</span>.log(name,age,gender);<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="Set与Map"><a href="#Set与Map" class="headerlink" title="Set与Map"></a>Set与Map</h1><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>Set是一系列<strong>无序、没有重复值</strong>的数据集合。 Set 对象允许你存储任何类型的<strong>唯一值</strong>，无论是原始值或者是对象引用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//创建Set</span><br><span class="hljs-keyword">const</span> s=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>();<br></code></pre></td></tr></table></figure>

<h3 id="Set实例的属性和方法"><a href="#Set实例的属性和方法" class="headerlink" title="Set实例的属性和方法"></a>Set实例的属性和方法</h3><h4 id="1-add方法"><a href="#1-add方法" class="headerlink" title="1.add方法"></a>1.add方法</h4><p>在<code>Set</code>对象尾部添加一个元素，返回该<code>Set</code>对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//创建Set</span><br><span class="hljs-keyword">const</span> s=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>();<br>s.add(<span class="hljs-number">1</span>);<br>s.add(<span class="hljs-number">3</span>);<br>s.add(<span class="hljs-number">4</span>).add(<span class="hljs-number">5</span>);  <span class="hljs-comment">//Set(4) &#123;1, 3, 4, 5&#125;</span><br></code></pre></td></tr></table></figure>

<h4 id="2-has方法"><a href="#2-has方法" class="headerlink" title="2.has方法"></a>2.has方法</h4><p>返回一个布尔值，表示该值在<code>Set</code>中存在与否。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">console</span>.log(s.has(<span class="hljs-number">1</span>)); <span class="hljs-comment">//true</span><br></code></pre></td></tr></table></figure>

<h4 id="3-delete-方法"><a href="#3-delete-方法" class="headerlink" title="3.delete 方法"></a>3.delete 方法</h4><p>移除<code>Set</code>中指定的元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">s.delete(<span class="hljs-number">1</span>); <span class="hljs-comment">//删除元素1</span><br></code></pre></td></tr></table></figure>

<h4 id="4-clear方法"><a href="#4-clear方法" class="headerlink" title="4.clear方法"></a>4.clear方法</h4><p>移除<code>Set</code>对象内的所有元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">s.clear();<br></code></pre></td></tr></table></figure>

<h4 id="5-forEach-方法"><a href="#5-forEach-方法" class="headerlink" title="5.forEach()方法"></a>5.forEach()方法</h4><p><code>forEach</code> 方法会根据集合中元素的插入顺序，依次执行提供的回调函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 按照成员添加进集合的顺序遍历的</span><br><span class="hljs-comment">// 回调函数后面的参数是用来改变上下文的</span><br>s.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value,key,set</span>)</span>&#123;<br>    <span class="hljs-comment">// 在set中，value与key是等价的</span><br>    <span class="hljs-built_in">console</span>.log(value,key,set);<br>&#125;,<span class="hljs-built_in">document</span>);<br><br></code></pre></td></tr></table></figure>

<h3 id="6-size属性"><a href="#6-size属性" class="headerlink" title="6.size属性"></a>6.size属性</h3><p>判断Set实例中有多少元素。</p>
<h3 id="Set的构造函数"><a href="#Set的构造函数" class="headerlink" title="Set的构造函数"></a>Set的构造函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.数组</span><br><span class="hljs-keyword">const</span> s =<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>]);<br><span class="hljs-built_in">console</span>.log(s);  <span class="hljs-comment">//Set(3) &#123;1, 2, 3&#125;</span><br><br><span class="hljs-comment">// 2.字符串、arguments、NodeList、Set</span><br><span class="hljs-comment">//字符串做参数</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(<span class="hljs-string">&quot;hi&quot;</span>)) <span class="hljs-comment">//Set(2) &#123;&quot;h&quot;, &quot;i&quot;&#125;</span><br><br><span class="hljs-comment">//arguments做参数</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fun</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(<span class="hljs-built_in">arguments</span>));<br>&#125;<br>fun(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>);<br><span class="hljs-comment">//NodeList做参数</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(<span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">&#x27;p&#x27;</span>))); <br><span class="hljs-comment">//Set(3) &#123;p, p, p&#125;</span><br><br><span class="hljs-comment">// Set实例做参数</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(s));<br><span class="hljs-comment">//Set(3) &#123;1, 2, 3&#125;</span><br><br><span class="hljs-comment">// 和原来完全相同，但不等于原来的，相当于复制。</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(s)===s); <br><span class="hljs-comment">//false</span><br></code></pre></td></tr></table></figure>

<h2 id="Set重复判定方式"><a href="#Set重复判定方式" class="headerlink" title="Set重复判定方式"></a>Set重复判定方式</h2><p>Set 对重复值的判断基本遵循严格相等(===)， 但是对于NaN的判断与===不同，Set中NaN等于NaN。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// Set实例会把2个NaN看做相等的元素</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-literal">NaN</span>===<span class="hljs-literal">NaN</span> ); <span class="hljs-comment">//false</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-literal">NaN</span>,<span class="hljs-number">2</span>,<span class="hljs-literal">NaN</span>]));<br><span class="hljs-comment">//Set(2) &#123;NaN, 2&#125;</span><br><br><br><span class="hljs-keyword">const</span> s=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>();<br>s.add(&#123;&#125;).add(&#123;&#125;);<br><span class="hljs-built_in">console</span>.log(s); <span class="hljs-comment">//此时s中有2个空对象</span><br></code></pre></td></tr></table></figure>

<h2 id="Set应用"><a href="#Set应用" class="headerlink" title="Set应用"></a>Set应用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.数组或字符串去重时</span><br><span class="hljs-comment">//Set(3) &#123;1, 2, 3&#125;</span><br><span class="hljs-keyword">const</span> s=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>]);<br><span class="hljs-built_in">console</span>.log(s);<br><br><span class="hljs-comment">// 再将Set实例转换为数组</span><br><span class="hljs-comment">// ①使用forEach</span><br><span class="hljs-keyword">let</span> arr=[];<br>s.forEach(<span class="hljs-function">(<span class="hljs-params">value</span>)=&gt;</span>arr.push(value));<br><span class="hljs-comment">// ②使用展开语法</span><br><span class="hljs-built_in">console</span>.log([...s]);<br><br><span class="hljs-comment">// 2.字符串去重</span><br><span class="hljs-keyword">const</span> s1=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(<span class="hljs-string">&#x27;abbacd&#x27;</span>);<br><span class="hljs-comment">// 将s1转为数组后，再用数组的join方法转为字符串</span><br><span class="hljs-built_in">console</span>.log([...s1].join(<span class="hljs-string">&quot;&quot;</span>));<br><br><span class="hljs-comment">// 3.存放dom元素</span><br><span class="hljs-keyword">const</span> s2=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(<span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">&quot;p&quot;</span>));<br><span class="hljs-comment">// 使用forEach改变p标签文本颜色</span><br>s2.forEach(<span class="hljs-function">(<span class="hljs-params">elem</span>)=&gt;</span>elem.style.color=<span class="hljs-string">&#x27;red&#x27;</span>);<br></code></pre></td></tr></table></figure>



<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p><strong><code>Map</code></strong> 对象保存键值对，并且能够记住键的原始插入顺序。任何值(对象或者<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Primitive">原始值</a>) 都可以作为一个键或一个值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.Map和对象本质上都是键值对的集合</span><br><span class="hljs-comment">// 对象</span><br><span class="hljs-keyword">const</span> person=&#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;alex&quot;</span>,<br>    <span class="hljs-attr">age</span>:<span class="hljs-number">19</span><br>&#125;<br><span class="hljs-comment">// Map</span><br><span class="hljs-keyword">const</span> m=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();<br>m.set(<span class="hljs-string">&#x27;name&#x27;</span>,<span class="hljs-string">&#x27;alex&#x27;</span>);<br>m.set(<span class="hljs-string">&#x27;age&#x27;</span>,<span class="hljs-number">18</span>);<br><span class="hljs-built_in">console</span>.log(m);<br><br><span class="hljs-comment">// 2.Map和对象的区别</span><br><span class="hljs-comment">// 对象一般使用字符串当做键</span><br><span class="hljs-keyword">const</span> obj=&#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;alex&#x27;</span><br>&#125;<br><br><span class="hljs-comment">// Map的键可以为基本数据类型，也可以为引用数据类型。</span><br><span class="hljs-comment">// 基本数据类型：数字、字符串、布尔值、undefined、null</span><br><span class="hljs-comment">// 引用数据类型：对象、数组、Set、Map、函数等</span><br><span class="hljs-keyword">const</span> mm=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();<br>mm.set(<span class="hljs-literal">true</span>,<span class="hljs-string">&#x27;true&#x27;</span>);<br>mm.set(&#123;&#125;,<span class="hljs-string">&#x27;object&#x27;</span>);<br>mm.set(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]),<span class="hljs-string">&#x27;set&#x27;</span>);<br><span class="hljs-built_in">console</span>.log(mm);<br><span class="hljs-comment">// &#123;true =&gt; &quot;true&quot;, &#123;…&#125; =&gt; &quot;object&quot;, Set(2) =&gt; &quot;set&quot;&#125;</span><br></code></pre></td></tr></table></figure>

<h3 id="方法和属性"><a href="#方法和属性" class="headerlink" title="方法和属性"></a>方法和属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.set方法</span><br><span class="hljs-comment">// 使用set添加的新成员，键如果已经存在，后添加的键值对覆盖已有的</span><br><span class="hljs-keyword">const</span> m=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();<br>m.set(<span class="hljs-string">&quot;age&quot;</span>,<span class="hljs-number">18</span>).set(<span class="hljs-literal">true</span>,<span class="hljs-string">&quot;true&quot;</span>).set(<span class="hljs-string">&quot;age&quot;</span>,<span class="hljs-number">20</span>);<br><span class="hljs-built_in">console</span>.log(m);<br><br><span class="hljs-comment">// 2.get方法，用于获取指定成员</span><br><span class="hljs-built_in">console</span>.log(m.get(<span class="hljs-string">&#x27;age&#x27;</span>)); <span class="hljs-comment">//20</span><br><span class="hljs-built_in">console</span>.log(m.get(<span class="hljs-literal">true</span>)); <span class="hljs-comment">//true</span><br><br><span class="hljs-comment">// 3.has方法 用于判断是否有指定的键</span><br><span class="hljs-built_in">console</span>.log(m.has(<span class="hljs-string">&#x27;age&#x27;</span>));<br><br><span class="hljs-comment">// 4.delete方法</span><br><span class="hljs-comment">// 删除不存在的成员，什么都不会发生，也不会报错</span><br>m.delete(<span class="hljs-string">&#x27;age&#x27;</span>);<br><span class="hljs-built_in">console</span>.log(m);<br><br><span class="hljs-comment">// 5.clear方法 删除所有的成员</span><br>m.clear();<br><br><span class="hljs-comment">// 6.forEach()方法</span><br><span class="hljs-keyword">const</span> mm=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();<br>mm.set(<span class="hljs-string">&quot;age&quot;</span>,<span class="hljs-number">12</span>).set(<span class="hljs-string">&quot;gender&quot;</span>,<span class="hljs-string">&quot;male&quot;</span>).set(<span class="hljs-string">&quot;name&quot;</span>,<span class="hljs-string">&quot;xiaoming&quot;</span>);<br>mm.forEach(<span class="hljs-function">(<span class="hljs-params">value,index,map</span>)=&gt;</span><span class="hljs-built_in">console</span>.log(value,index,map==mm));<br><span class="hljs-comment">// 12 &quot;age&quot;  true</span><br><span class="hljs-comment">// male gender true</span><br><span class="hljs-comment">// xiaoming name true</span><br><br><span class="hljs-comment">// 7.size属性</span><br><span class="hljs-built_in">console</span>.log(mm.size); <span class="hljs-comment">//3</span><br></code></pre></td></tr></table></figure>

<h3 id="Map构造函数的参数"><a href="#Map构造函数的参数" class="headerlink" title="Map构造函数的参数"></a>Map构造函数的参数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.只能传二维数组，必须体现键和值</span><br><span class="hljs-keyword">const</span> m1=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-string">&quot;name&quot;</span>,<span class="hljs-string">&quot;alex&quot;</span>],[<span class="hljs-string">&quot;age&quot;</span>,<span class="hljs-number">18</span>]]);<br><span class="hljs-built_in">console</span>.log(m1);<br><span class="hljs-comment">// Map(2) &#123;&quot;name&quot; =&gt; &quot;alex&quot;, &quot;age&quot; =&gt; 18&#125;</span><br><br><span class="hljs-comment">// 2.Set, Map等</span><br><span class="hljs-comment">// Set中也必须体现键和值</span><br><span class="hljs-keyword">const</span> s=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([[<span class="hljs-string">&quot;gender&quot;</span>,<span class="hljs-string">&quot;male&quot;</span>],[<span class="hljs-string">&quot;name&quot;</span>,<span class="hljs-string">&quot;xiaoming&quot;</span>]]);<br><span class="hljs-keyword">const</span> m2=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>(s);<br><span class="hljs-built_in">console</span>.log(m2); <br><span class="hljs-comment">//Map(2) &#123;&quot;gender&quot; =&gt; &quot;male&quot;, &quot;name&quot; =&gt; &quot;xiaoming&quot;&#125;</span><br><br><span class="hljs-keyword">const</span> m3=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>(m1);<br><span class="hljs-built_in">console</span>.log(m3, m3==m1);<br><span class="hljs-comment">//Map(2) &#123;&quot;name&quot; =&gt; &quot;alex&quot;, &quot;age&quot; =&gt; 18&#125; false</span><br></code></pre></td></tr></table></figure>

<h3 id="Map注意事项"><a href="#Map注意事项" class="headerlink" title="Map注意事项"></a>Map注意事项</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.Map中判断键名是否相同</span><br><span class="hljs-comment">// 基本遵循严格相等(===)</span><br><span class="hljs-comment">// 例外就是Map中NaN等于NaN</span><br><br><span class="hljs-keyword">const</span> m1=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();<br>m1.set(<span class="hljs-literal">NaN</span>,<span class="hljs-number">1</span>).set(<span class="hljs-literal">NaN</span>,<span class="hljs-number">2</span>);<br><span class="hljs-built_in">console</span>.log(m1); <span class="hljs-comment">//Map(1) &#123;NaN =&gt; 2&#125;</span><br><br><span class="hljs-comment">// 2.什么时候使用Map什么使用对象</span><br><span class="hljs-comment">// 2.1如果只需要Key-&gt;Value结构</span><br><span class="hljs-comment">// 2.2或者需要除了字符串以为的值做键，使用Map更合适</span><br><span class="hljs-comment">// 只有模拟现实世界的实体的时候才会使用对象</span><br></code></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">const</span> [p1, p2, p3] = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">&#x27;p&#x27;</span>);</span><br><span class="javascript"><span class="hljs-comment">// 二维数组做Map构造函数的参数</span></span><br><span class="javascript"><span class="hljs-keyword">const</span> m = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([</span><br><span class="javascript">    [p1, &#123; <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&quot;yellow&quot;</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-string">&quot;20px&quot;</span> &#125;],</span><br><span class="javascript">    [p2, &#123; <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;pink&quot;</span>, <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&quot;orange&quot;</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-string">&quot;20px&quot;</span> &#125;],</span><br><span class="javascript">    [p3, &#123; <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;green&quot;</span>, <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&quot;blue&quot;</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-string">&quot;20px&quot;</span> &#125;]</span><br><span class="javascript">]);</span><br><span class="javascript">m.forEach(<span class="hljs-function">(<span class="hljs-params">value, key</span>) =&gt;</span> &#123;</span><br><span class="javascript">    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> p <span class="hljs-keyword">in</span> value)&#123;</span><br><span class="javascript">        <span class="hljs-comment">// 有点难理解，多想想还是能理解的</span></span><br><span class="javascript">        key.style[p]=value[p];</span><br><span class="javascript">    &#125;</span><br><span class="javascript">&#125;);</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>SeT/Map总结</p>
<p><img src="https://i.loli.net/2021/06/10/xEzm7YcGRnAQhOs.png" srcset="/img/loading.gif" lazyload alt="image-20210610175416433"></p>
<p><img src="https://i.loli.net/2021/06/10/E1XHQBYURp8IgjC.png" srcset="/img/loading.gif" lazyload alt="image-20210610175506099"></p>
<p><img src="https://i.loli.net/2021/06/10/JNXSG9yTZjbPFdK.png" srcset="/img/loading.gif" lazyload alt="image-20210610175655315"></p>
<p><img src="https://i.loli.net/2021/06/10/aXh4TLvYSuf1qQE.png" srcset="/img/loading.gif" lazyload alt="image-20210610175710050"></p>
<p><img src="https://i.loli.net/2021/06/10/FOBbacWuGtU1I23.png" srcset="/img/loading.gif" lazyload alt="image-20210610175745097"></p>
<p><img src="https://i.loli.net/2021/06/10/drQIFyD9Gmx2YJ7.png" srcset="/img/loading.gif" lazyload alt="image-20210610175848667"></p>
<h1 id="Iterator"><a href="#Iterator" class="headerlink" title="Iterator"></a>Iterator</h1><p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210610180623.png" srcset="/img/loading.gif" lazyload alt="image-20210610180620847"></p>
<h3 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h3><p>Iterator是如下的过程：Symbol.iterator(可遍历对象的生成方法)-&gt;it(可遍历对象)-&gt;next()-&gt;next()-&gt;(知道done为true)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 数组的.__proto__原型中有Symbol.iterator这个方法</span><br><span class="hljs-comment">// 而这个方法不符合命名规范，因此用方括号来调用。</span><br><br><span class="hljs-comment">// Symbol.iterator 可遍历对象的生成方法</span><br><span class="hljs-comment">// it：可遍历对象 (可迭代对象)</span><br><span class="hljs-keyword">const</span> it = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>][<span class="hljs-built_in">Symbol</span>.iterator]();<br><span class="hljs-built_in">console</span>.log(it); <span class="hljs-comment">//Array Iterator &#123;&#125;</span><br><br><span class="hljs-comment">// value表示值，done表示遍历还没有完成</span><br><span class="hljs-built_in">console</span>.log(it.next());<span class="hljs-comment">//&#123;value: 1, done: false&#125;</span><br><span class="hljs-built_in">console</span>.log(it.next()); <span class="hljs-comment">//&#123;value: 2, done: false&#125;</span><br><span class="hljs-built_in">console</span>.log(it.next()); <span class="hljs-comment">//&#123;value: undefined, done: true&#125;</span><br><br><br></code></pre></td></tr></table></figure>

<p>为什么需要Iterator遍历器</p>
<p>遍历数组： for循环、forEach方法 ，遍历对象：for in循环。Iterator 遍历器是一个统一的遍历方式</p>
<h3 id="for-of-用法"><a href="#for-of-用法" class="headerlink" title="for of 用法"></a>for of 用法</h3><p>for of将下面Iterator过程封装起来。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> arr=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];<br><span class="hljs-keyword">const</span> it =arr[<span class="hljs-built_in">Symbol</span>.iterator]();<br><span class="hljs-keyword">let</span> next=it.next();<br><span class="hljs-keyword">while</span>(!next.done)&#123;<br>    <span class="hljs-built_in">console</span>.log(next.value);<br>    next=it.next();<br>&#125;<br></code></pre></td></tr></table></figure>

<p>for of循环只会遍历出那些done为false时对应的value值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i <span class="hljs-keyword">of</span> arr)&#123;<br>    <span class="hljs-built_in">console</span>.log(i);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>for of可以和break、continue一起使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> arr2=[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>];<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">of</span> arr2)&#123;<br>    <span class="hljs-keyword">if</span>(i===<span class="hljs-number">7</span>)&#123;<br>        <span class="hljs-keyword">break</span>;<br>    &#125;<br>    <span class="hljs-built_in">console</span>.log(i);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>在for of循环中获取索引值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// keys()得到的是索引的可遍历对象，可以遍历出索引值</span><br><span class="hljs-keyword">const</span> arr3=[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>];<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> keys <span class="hljs-keyword">of</span> arr3.keys())&#123;<br>    <span class="hljs-built_in">console</span>.log(keys); <span class="hljs-comment">//</span><br>&#125;<br><span class="hljs-comment">// values()得到的是值的可遍历对象，可以遍历出值</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> value <span class="hljs-keyword">of</span> arr3.values())&#123;<br>    <span class="hljs-built_in">console</span>.log(value); <span class="hljs-comment">// a b c d</span><br>&#125;<br><span class="hljs-comment">// entries()可以得到索引和值组成的数组的可遍历对象</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> entries <span class="hljs-keyword">of</span> arr3.entries())&#123;<br>    <span class="hljs-built_in">console</span>.log(entries);<br>&#125;<br><span class="hljs-comment">// 结合解构赋值</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> [index, value] <span class="hljs-keyword">of</span> arr3.entries())&#123;<br>    <span class="hljs-built_in">console</span>.log(index,value);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="可遍历"><a href="#可遍历" class="headerlink" title="可遍历"></a>可遍历</h3><p>只要有Symbol.iterator方法，并且这个方法可以生成可遍历对象，就是可遍历的。</p>
<p>只要可遍历，就可以使用for…of循环来统一遍历。</p>
<h4 id="原生可遍历"><a href="#原生可遍历" class="headerlink" title="原生可遍历"></a>原生可遍历</h4><p>数组、字符串、Set、Map、arguments、NodeList这些原生可遍历。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>])&#123;<br>    <span class="hljs-built_in">console</span>.log(i);<br>&#125; <span class="hljs-comment">// 1 2 3</span><br><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]))&#123;<br>    <span class="hljs-built_in">console</span>.log(i);<br>&#125; <span class="hljs-comment">// 4 5 6</span><br><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">&#x27;p&#x27;</span>))&#123;<br>    <span class="hljs-built_in">console</span>.log(i);<br>    i.style.color=<span class="hljs-string">&#x27;red&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="非原生可遍历"><a href="#非原生可遍历" class="headerlink" title="非原生可遍历"></a>非原生可遍历</h4><p>没有Symbol.iterator属性的，可以为它手动添加该属性就可以使用for…of循环了。</p>
<p>1.一般的对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> person =&#123;<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>,<span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;male&#x27;</span>&#125;;<br><span class="hljs-comment">// 给一般的对象手动添加Symbol.iterator属性</span><br>person[<span class="hljs-built_in">Symbol</span>.iterator]=<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-keyword">let</span> index=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-function"><span class="hljs-title">next</span>(<span class="hljs-params"></span>)</span>&#123;<br>            index++;<br>            <span class="hljs-keyword">if</span>(index===<span class="hljs-number">1</span>)&#123;<br>                <span class="hljs-keyword">return</span>&#123;<br>                    <span class="hljs-attr">value</span>:person.age,<br>                    <span class="hljs-attr">done</span>:<span class="hljs-literal">false</span><br>                &#125;<br>            &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(index===<span class="hljs-number">2</span>)&#123;<br>                <span class="hljs-keyword">return</span>&#123;<br>                    <span class="hljs-attr">value</span>:person.sex,<br>                    <span class="hljs-attr">done</span>:<span class="hljs-literal">false</span><br>                &#125;<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-keyword">return</span>&#123;<br>                    <span class="hljs-attr">value</span>:<span class="hljs-literal">undefined</span>,<br>                    <span class="hljs-attr">done</span>:<span class="hljs-literal">true</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;;<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> person)&#123;<br>    <span class="hljs-built_in">console</span>.log(item);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>2.有length和索引值的对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> obj=&#123;<br>    <span class="hljs-number">0</span>:<span class="hljs-string">&#x27;alex&#x27;</span>,<br>    <span class="hljs-number">1</span>:<span class="hljs-string">&#x27;male&#x27;</span>,<br>    <span class="hljs-attr">length</span>:<span class="hljs-number">2</span><br>&#125;<br>obj[<span class="hljs-built_in">Symbol</span>.iterator]=<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-keyword">let</span> index=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-function"><span class="hljs-title">next</span>(<span class="hljs-params"></span>)</span>&#123;<br>            <span class="hljs-keyword">let</span> value,done;<br>            <span class="hljs-keyword">if</span>(index&lt;obj.length)&#123;<br>                value=obj[index];<br>                done=<span class="hljs-literal">false</span><br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                done=<span class="hljs-literal">true</span>;<br>            &#125;<br>            index++;<br>            <span class="hljs-keyword">return</span>&#123;<br>                value,<br>                done<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 或者直接使用数组原型链的Symbol.iterator属性</span><br>obj[<span class="hljs-built_in">Symbol</span>.iterator]=<span class="hljs-built_in">Array</span>.prototype[<span class="hljs-built_in">Symbol</span>.iterator];<br><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i <span class="hljs-keyword">of</span> obj)&#123;<br>    <span class="hljs-built_in">console</span>.log(i);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="使用Iterator的场合"><a href="#使用Iterator的场合" class="headerlink" title="使用Iterator的场合"></a>使用Iterator的场合</h3><p> 1.数组的展开运算符</p>
<p>只要是原生可遍历的，就可以使用数组的展开运算。数组、字符串、Set、Map、arguments、NodeList这些原生可遍历。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">console</span>.log(...[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]); <span class="hljs-comment">//1 2 3</span><br><span class="hljs-built_in">console</span>.log(...<span class="hljs-string">&quot;str&quot;</span>); <span class="hljs-comment">// s t r</span><br><span class="hljs-built_in">console</span>.log(...new <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]));<br></code></pre></td></tr></table></figure>

<p>2.数组的解构赋值</p>
<p>只要是原生可遍历的，就可以使用数组的进行解构赋值。因为可以在解构赋值前，进行展开运算让其变为数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><br><span class="hljs-keyword">const</span> [a,b]=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>];<br><span class="hljs-comment">// 在解构赋值前，&quot;hi&quot;进行了展开运算 [...&quot;hi&quot;]</span><br><span class="hljs-keyword">const</span> [c,d]=<span class="hljs-string">&quot;hi&quot;</span>;<br><span class="hljs-keyword">const</span> [e,f]=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">7</span>,<span class="hljs-number">8</span>]);<br><span class="hljs-built_in">console</span>.log(a,b,c,d,e,f);<br><br></code></pre></td></tr></table></figure>

<h3 id="Iterator总结"><a href="#Iterator总结" class="headerlink" title="Iterator总结"></a>Iterator总结</h3><p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210610222130.png" srcset="/img/loading.gif" lazyload alt="image-20210610222129343"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210610222157.png" srcset="/img/loading.gif" lazyload alt="image-20210610222156497"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210610222305.png" srcset="/img/loading.gif" lazyload alt="image-20210610222304196"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210610222325.png" srcset="/img/loading.gif" lazyload alt="image-20210610220808524"></p>
<h1 id="ES6新增方法"><a href="#ES6新增方法" class="headerlink" title="ES6新增方法"></a>ES6新增方法</h1><h2 id="字符串的新增方法"><a href="#字符串的新增方法" class="headerlink" title="字符串的新增方法"></a>字符串的新增方法</h2><h3 id="includes"><a href="#includes" class="headerlink" title="includes()"></a>includes()</h3><p><strong><code>includes()</code></strong> 方法用于判断一个字符串是否包含在另一个字符串中，根据情况返回 true 或 false。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.基本用法</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;abc&#x27;</span>.includes(<span class="hljs-string">&#x27;a&#x27;</span>)); <span class="hljs-comment">//true</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;abc&#x27;</span>.includes(<span class="hljs-string">&#x27;ab&#x27;</span>)); <span class="hljs-comment">//true</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;abc&#x27;</span>.includes(<span class="hljs-string">&#x27;ac&#x27;</span>)); <span class="hljs-comment">//false</span><br><br><span class="hljs-comment">// 2.第二个参数</span><br><span class="hljs-comment">// 表示开始搜索的位置，默认是0</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;abc&#x27;</span>.includes(<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-number">1</span>));<span class="hljs-comment">//false</span><br></code></pre></td></tr></table></figure>

<h3 id="padStart-和padEnd"><a href="#padStart-和padEnd" class="headerlink" title="padStart()和padEnd()"></a>padStart()和padEnd()</h3><p><strong><code>padStart()</code></strong> 方法用另一个字符串填充当前字符串(如果需要的话，会重复多次)，以便产生的字符串达到给定的长度。从当前字符串的左侧开始填充。</p>
<blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">str.padStart(targetLength [, padString])<br></code></pre></td></tr></table></figure>
</blockquote>
<p><code>targetLength</code></p>
<p>当前字符串需要填充到的目标长度。<strong>如果这个数值小于当前字符串的长度，则返回当前字符串本身。</strong></p>
<p><code>padString</code> 可选</p>
<p>填充字符串。如果字符串太长，使填充后的字符串长度超过了目标长度，则只保留最左侧的部分，其他部分会被截断。此参数的默认值为 “ “（空格）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-string">&#x27;abc&#x27;</span>.padStart(<span class="hljs-number">10</span>);         <span class="hljs-comment">// &quot;       abc&quot;</span><br><span class="hljs-string">&#x27;abc&#x27;</span>.padStart(<span class="hljs-number">10</span>, <span class="hljs-string">&quot;foo&quot;</span>);  <span class="hljs-comment">// &quot;foofoofabc&quot;</span><br><span class="hljs-string">&#x27;abc&#x27;</span>.padStart(<span class="hljs-number">6</span>,<span class="hljs-string">&quot;123465&quot;</span>); <span class="hljs-comment">// &quot;123abc&quot;</span><br><span class="hljs-string">&#x27;abc&#x27;</span>.padStart(<span class="hljs-number">8</span>, <span class="hljs-string">&quot;0&quot;</span>);     <span class="hljs-comment">// &quot;00000abc&quot;</span><br><span class="hljs-string">&#x27;abc&#x27;</span>.padStart(<span class="hljs-number">1</span>);          <span class="hljs-comment">// &quot;abc&quot;</span><br></code></pre></td></tr></table></figure>

<p><strong><code>padEnd()</code></strong> 方法会用一个字符串填充当前字符串（如果需要的话则重复填充），返回填充后达到指定长度的字符串。从当前字符串的末尾（右侧）开始填充。</p>
<h3 id="trimStart-和trimEnd"><a href="#trimStart-和trimEnd" class="headerlink" title="trimStart()和trimEnd()"></a>trimStart()和trimEnd()</h3><p><strong><code>trimStart()</code></strong> 方法从字符串的开头删除空格。<code>trimEnd() </code>方法从一个字符串的末端移除空白字符。**<code>trim()</code>** 方法会从一个字符串的两端删除空白字符。</p>
<p><code>trimLeft()</code> 是<code>trimStart()</code>的别名。<code>trimRight()</code> 是<code>trimEnd() </code>的别名。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> s=<span class="hljs-string">&quot;   abc  &quot;</span>;<br><span class="hljs-built_in">console</span>.log(s.trimStart()); <span class="hljs-comment">//&quot;abc  &quot;</span><br><span class="hljs-built_in">console</span>.log(s.trimEnd()); <span class="hljs-comment">//&quot;   abc&quot;</span><br><span class="hljs-built_in">console</span>.log(s.trim()); <span class="hljs-comment">//&quot;abc&quot;</span><br><span class="hljs-built_in">console</span>.log(s); <span class="hljs-comment">//&quot;   abc  &quot;</span><br></code></pre></td></tr></table></figure>

<h2 id="数组新增方法"><a href="#数组新增方法" class="headerlink" title="数组新增方法"></a>数组新增方法</h2><h3 id="includes-1"><a href="#includes-1" class="headerlink" title="includes()"></a>includes()</h3><p><code>includes()</code> 方法用来判断一个数组是否包含一个指定的值，根据情况，如果包含则返回 true，否则返回false。</p>
<blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">arr.includes(valueToFind[, fromIndex])<br></code></pre></td></tr></table></figure>
</blockquote>
<p><code>valueToFind</code></p>
<p>需要查找的元素值。<strong>Note:</strong> 使用 <code>includes()</code>比较字符串和字符时是区分大小写。</p>
<p><code>fromIndex</code> 可选</p>
<p>从<code>fromIndex</code> 索引处开始查找 <code>valueToFind</code>。如果为负值，则按升序从 <code>array.length + fromIndex</code> 的索引开始搜 。如果计算出的索引小于 0，则整个数组都会被搜索。默认为 0。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].includes(<span class="hljs-number">2</span>);     <span class="hljs-comment">// true</span><br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].includes(<span class="hljs-number">4</span>);     <span class="hljs-comment">// false</span><br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].includes(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>);  <span class="hljs-comment">// false</span><br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].includes(<span class="hljs-number">3</span>, -<span class="hljs-number">1</span>); <span class="hljs-comment">// true</span><br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-literal">NaN</span>].includes(<span class="hljs-literal">NaN</span>); <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure>

<h3 id="Array-from"><a href="#Array-from" class="headerlink" title="Array.from()"></a>Array.from()</h3><p><code>Array.from()</code> 方法从一个类似数组或可迭代对象创建一个新的，浅拷贝的数组实例。</p>
<blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">Array</span>.from(arrayLike[, mapFn[, thisArg]])<br></code></pre></td></tr></table></figure>
</blockquote>
<p><code>arrayLike</code></p>
<p>想要转换成数组的伪数组对象或可迭代对象。</p>
<p><code>mapFn</code> 可选</p>
<p>如果指定了该参数，新数组中的每个元素会执行该回调函数。</p>
<p><code>thisArg</code> 可选</p>
<p>可选参数，执行回调函数 <code>mapFn</code> 时 <code>this</code> 对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//从 String 生成数组</span><br><span class="hljs-built_in">Array</span>.from(<span class="hljs-string">&#x27;foo&#x27;</span>);<br><span class="hljs-comment">// [ &quot;f&quot;, &quot;o&quot;, &quot;o&quot; ]</span><br><br><span class="hljs-comment">//从Set生成数组</span><br><span class="hljs-keyword">const</span> set = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;baz&#x27;</span>, <span class="hljs-string">&#x27;foo&#x27;</span>]);<br><span class="hljs-built_in">Array</span>.from(set);<br><span class="hljs-comment">// [ &quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot; ]</span><br>[...new <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>])]; <span class="hljs-comment">//使用展开语法会更方便</span><br><br><span class="hljs-comment">//从 Map 生成数组</span><br><span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">8</span>]]);<br><span class="hljs-built_in">Array</span>.from(map);<br><span class="hljs-comment">// [[1, 2], [2, 4], [4, 8]]</span><br><br><span class="hljs-keyword">const</span> mapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>], [<span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>]]);<br><span class="hljs-built_in">Array</span>.from(mapper.values());<br><span class="hljs-comment">// [&#x27;a&#x27;, &#x27;b&#x27;];</span><br><br><span class="hljs-built_in">Array</span>.from(mapper.keys());<br><span class="hljs-comment">// [&#x27;1&#x27;, &#x27;2&#x27;];</span><br></code></pre></td></tr></table></figure>

<p>拥有length的任意对象都可以通过Array.from()转换为数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> obj=&#123;<span class="hljs-attr">length</span>:<span class="hljs-number">2</span>&#125;;<br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Array</span>.from(obj)); <br><span class="hljs-comment">// [undefined, undefined]</span><br><br><span class="hljs-keyword">const</span> obj1=&#123;<span class="hljs-attr">length</span>:<span class="hljs-number">2</span>,<span class="hljs-number">0</span>:<span class="hljs-string">&quot;liu&quot;</span>,<span class="hljs-number">1</span>:<span class="hljs-string">&quot;jiaqi&quot;</span>,<span class="hljs-number">3</span>:<span class="hljs-string">&quot;haha&quot;</span>&#125;;<br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Array</span>.from(obj1)); <span class="hljs-comment">//[&quot;liu&quot;, &quot;jiaqi&quot;]</span><br></code></pre></td></tr></table></figure>

<p>在Array.from()中使用箭头函数</p>
<p>作用类似于数组的map方法，用来对每个元素进行处理，将处理后的值放入返回的数组中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 在Array.from()中使用箭头函数</span><br><span class="hljs-comment">// 作用类似于数组的map方法，用来对每个元素进行处理，将处理后的值放入返回的数组中。</span><br><span class="hljs-built_in">console</span>.log([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>].map(<span class="hljs-function">(<span class="hljs-params">value</span>)=&gt;</span>value*<span class="hljs-number">2</span>)); <span class="hljs-comment">//2 4 6</span><br><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Array</span>.from(&#123;<span class="hljs-attr">length</span>:<span class="hljs-number">4</span>&#125;,<span class="hljs-function">(<span class="hljs-params">value,index</span>)=&gt;</span>value=index*<span class="hljs-number">2</span>));<br><span class="hljs-comment">// 0 2 4 6</span><br></code></pre></td></tr></table></figure>

<h3 id="find-和findIndex"><a href="#find-和findIndex" class="headerlink" title="find()和findIndex()"></a>find()和findIndex()</h3><p> <code>find()</code> 方法返回数组中满足提供的测试函数的<strong>第一个元素</strong>的值，否则返回undefined。</p>
<p><code>findIndex()</code>方法返回数组中满足提供的测试函数的第一个元素的<strong>索引</strong>。若没有找到对应元素则返回-1。</p>
<blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">arr.find(callback[, thisArg])<br></code></pre></td></tr></table></figure>
</blockquote>
<p><code>callback</code>在数组每一项上执行的函数，接收 3 个参数：</p>
<ul>
<li><code>element</code>当前遍历到的元素。</li>
<li><code>index</code>可选 当前遍历到的索引。</li>
<li><code>array</code>可选 数组本身。</li>
</ul>
<p><code>thisArg</code>可选,执行回调时用作<code>this</code> 的对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//返回找到的第一个质数</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPrime</span>(<span class="hljs-params">element, index, array</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> start = <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">while</span> (start &lt;= <span class="hljs-built_in">Math</span>.sqrt(element)) &#123;<br>    <span class="hljs-keyword">if</span> (element % start++ &lt; <span class="hljs-number">1</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> element &gt; <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-built_in">console</span>.log([<span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">12</span>].find(isPrime)); <span class="hljs-comment">// undefined, not found</span><br><span class="hljs-built_in">console</span>.log([<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>, <span class="hljs-number">12</span>].find(isPrime)); <span class="hljs-comment">// 5</span><br><br></code></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//用对象的属性查找数组里的对象</span><br><span class="hljs-keyword">var</span> inventory = [<br>    &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;apples&#x27;</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">2</span>&#125;,<br>    &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;bananas&#x27;</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">0</span>&#125;,<br>    &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;cherries&#x27;</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">5</span>&#125;<br>];<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findCherries</span>(<span class="hljs-params">fruit</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> fruit.name === <span class="hljs-string">&#x27;cherries&#x27;</span>;<br>&#125;<br><br><span class="hljs-built_in">console</span>.log(inventory.find(findCherries)); <span class="hljs-comment">// &#123; name: &#x27;cherries&#x27;, quantity: 5 &#125;</span><br></code></pre></td></tr></table></figure>



<h2 id="对象的新增方法"><a href="#对象的新增方法" class="headerlink" title="对象的新增方法"></a>对象的新增方法</h2><h3 id="Object-assign"><a href="#Object-assign" class="headerlink" title="Object.assign()"></a>Object.assign()</h3><h4 id="定义-2"><a href="#定义-2" class="headerlink" title="定义"></a>定义</h4><p><code>Object.assign()</code> 方法用于将所有可枚举属性的值从一个或多个源对象分配到目标对象。它将返回目标对象。</p>
<p>如果目标对象中的属性具有相同的键，则属性将被源对象中的属性覆盖。后面的源对象的属性将类似地覆盖前面的源对象的属性。</p>
<blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">Object</span>.assign(target, ...sources)<br></code></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> apple = &#123;<br>    <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;red&quot;</span>,<br>    <span class="hljs-attr">taste</span>: <span class="hljs-string">&quot;sweet&quot;</span><br>&#125;<br><br><span class="hljs-keyword">const</span> banana = &#123;<br>    <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;yellow&quot;</span>,<br>    <span class="hljs-attr">category</span>: <span class="hljs-string">&quot;fruit&quot;</span><br>&#125;<br><span class="hljs-comment">// Object.assign直接合并到了第一个对象中，返回的就是合并后的对象</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.assign(apple,banana));<br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.assign(apple,banana)===apple); <br><span class="hljs-comment">//因为此时的apple 已经被改变了 true</span><br><br><span class="hljs-comment">// 对象是引用类型的，Object.assign会直接修改第一个对象。</span><br><span class="hljs-comment">// 如果想要原来的对象不被修改，可以第一个参数放空对象</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.assign(&#123;&#125;,apple,banana));<br></code></pre></td></tr></table></figure>

<h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// Object.assign(目标对象，源对象);</span><br><span class="hljs-comment">// 1.基本数据类型作为源对象</span><br><span class="hljs-comment">// 与对象的展开类似，先转换为对象，再合并</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.assign(&#123;&#125;,<span class="hljs-literal">undefined</span>)); <span class="hljs-comment">//&#123;&#125;</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.assign(&#123;&#125;,<span class="hljs-literal">null</span>)); <span class="hljs-comment">//&#123;&#125;</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.assign(&#123;&#125;,<span class="hljs-number">22</span>)); <span class="hljs-comment">//&#123;&#125;</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.assign(&#123;&#125;,<span class="hljs-number">22</span>)); <span class="hljs-comment">//&#123;&#125;</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.assign(&#123;&#125;,<span class="hljs-string">&quot;str&quot;</span>)); <span class="hljs-comment">//&#123;0: &quot;s&quot;, 1: &quot;t&quot;, 2: &quot;r&quot;&#125;</span><br><br><span class="hljs-comment">// 2.同名属性的替换</span><br><span class="hljs-comment">// 后面的属性直接覆盖前面的属性</span><br><span class="hljs-keyword">const</span> apple = &#123;<br>    <span class="hljs-attr">color</span>: [<span class="hljs-string">&quot;蓝色&quot;</span>,<span class="hljs-string">&quot;紫色&quot;</span>],<br>    <span class="hljs-attr">taste</span>: <span class="hljs-string">&quot;sweet&quot;</span><br>&#125;<br><span class="hljs-keyword">const</span> banana = &#123;<br>    <span class="hljs-attr">color</span>: [<span class="hljs-string">&quot;红色&quot;</span>,<span class="hljs-string">&quot;黄色&quot;</span>],<br>    <span class="hljs-attr">category</span>: <span class="hljs-string">&quot;fruit&quot;</span><br>&#125;<br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.assign(apple,banana)); <span class="hljs-comment">//&#123;color:[&quot;红色&quot;, &quot;黄色&quot;], taste: &quot;sweet&quot;, category: &quot;fruit&quot;&#125;</span><br></code></pre></td></tr></table></figure>

<h4 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> user=<span class="hljs-function"><span class="hljs-params">useroptions</span>=&gt;</span>&#123;<br>    <span class="hljs-keyword">const</span> defaults=&#123;<br>        <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;alex&quot;</span>,<br>        <span class="hljs-attr">age</span>:<span class="hljs-number">0</span>,<br>        <span class="hljs-attr">gender</span>:<span class="hljs-string">&quot;male&quot;</span><br>    &#125;<br>    <span class="hljs-keyword">const</span> options=<span class="hljs-built_in">Object</span>.assign(&#123;&#125;,defaults,useroptions);<br>    <span class="hljs-built_in">console</span>.log(options);<br>&#125;;<br>user();<br></code></pre></td></tr></table></figure>

<h3 id="Object-keys-、Object-values-、Object-entries"><a href="#Object-keys-、Object-values-、Object-entries" class="headerlink" title="Object.keys()、Object.values()、Object.entries()"></a>Object.keys()、Object.values()、Object.entries()</h3><h4 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> person=&#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;Alex&quot;</span>,<br>    <span class="hljs-attr">age</span>:<span class="hljs-number">18</span><br>&#125;<br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.keys(person)); <span class="hljs-comment">// [&quot;name&quot;, &quot;age&quot;]</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.values(person)); <span class="hljs-comment">// [&quot;Alex&quot;, 18]</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.entries(person)); <span class="hljs-comment">// [ [&quot;name&quot;, &quot;Alex&quot;],[&quot;age&quot;, 18]]</span><br></code></pre></td></tr></table></figure>

<h4 id="与数组的类似方法的区别"><a href="#与数组的类似方法的区别" class="headerlink" title="与数组的类似方法的区别"></a>与数组的类似方法的区别</h4><p>数组的keys(), values(), entries()等方法都是实例方法，返回的都是可遍历对象。对象的Object.keys(), Object.values(),Object.values()等方法返回的都是数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 2.与数组类似的方法的区别</span><br><span class="hljs-built_in">console</span>.log([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>].keys()); <span class="hljs-comment">// 返回可遍历对象</span><br><span class="hljs-built_in">console</span>.log([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>].values()); <span class="hljs-comment">// 返回可遍历对象</span><br><span class="hljs-built_in">console</span>.log([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>].entries()); <span class="hljs-comment">// 返回可遍历对象</span><br></code></pre></td></tr></table></figure>

<h4 id="for…of"><a href="#for…of" class="headerlink" title="for…of"></a>for…of</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> person=&#123;<br><span class="hljs-attr">name</span>:<span class="hljs-string">&quot;Alex&quot;</span>,<br><span class="hljs-attr">age</span>:<span class="hljs-number">18</span><br>&#125;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key,value] <span class="hljs-keyword">of</span> <span class="hljs-built_in">Object</span>.entries(person))&#123;<br>    <span class="hljs-built_in">console</span>.log(key,value)<br>&#125;<br><br><span class="hljs-comment">// Object.keys(), Object.values(), Object.entires()</span><br><span class="hljs-comment">// 这三个方法并不能保证顺序，和for...in 一样无法保证顺序</span><br></code></pre></td></tr></table></figure>

<h2 id="新增方法总结"><a href="#新增方法总结" class="headerlink" title="新增方法总结"></a>新增方法总结</h2><p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210611160239.png" srcset="/img/loading.gif" lazyload alt="image-20210611160231073"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210611160311.png" srcset="/img/loading.gif" lazyload alt="image-20210611160310273"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210611160445.png" srcset="/img/loading.gif" lazyload alt="image-20210611160444694"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210611160657.png" srcset="/img/loading.gif" lazyload alt="image-20210611160655803"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210611160735.png" srcset="/img/loading.gif" lazyload alt="image-20210611160733628"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210611160905.png" srcset="/img/loading.gif" lazyload alt="image-20210611160904401"></p>
<h1 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h1><h3 id="定义-3"><a href="#定义-3" class="headerlink" title="定义"></a>定义</h3><p>Promise 一般用来解决层层嵌套的回调函数(回调地狱callback hell)的问题。</p>
<h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210611181352.png" srcset="/img/loading.gif" lazyload alt="image-20210611181350553"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.实例化构造函数生成实例对象</span><br><span class="hljs-comment">// Promise 解决的不是回调函数，而是用于解决回调地域的问题。</span><br><span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    resolve(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;alex&#x27;</span> &#125;);<br>    <span class="hljs-comment">// reject(new Error(&quot;reason&quot;));</span><br>&#125;);<br><span class="hljs-built_in">console</span>.log(p);<br><span class="hljs-comment">// 2.Promise的状态</span><br><span class="hljs-comment">// Promise的状态一旦完成变化，就不会再改变了 </span><br><span class="hljs-comment">// Promise有3种状态，一开始是pending(未完成),执行resolve,变成fulfilled(resolved)已成功, 执行reject，变成rejected，已失败</span><br><span class="hljs-comment">// 执行resolve();</span><br><span class="hljs-comment">// pending-&gt;fulfilled</span><br><span class="hljs-comment">// 执行reject();</span><br><span class="hljs-comment">// pending-&gt;rejected</span><br><br><span class="hljs-comment">// 3.then()方法</span><br><span class="hljs-comment">// 当Promise的状态变为fulfilled时，执行第一个then()方法</span><br><span class="hljs-comment">// 当Promise的状态变为rejected时，执行第二个then()方法</span><br>p.then(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;success&quot;</span>, data);<br>&#125;, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;error&quot;</span>,err);<br>&#125;);<br><br><span class="hljs-comment">// 4.resolve和reject函数的参数</span><br><span class="hljs-comment">// 执行resole或者reject函数所传的参数，可以被then中的回调函数接收</span><br></code></pre></td></tr></table></figure>

<h3 id="then"><a href="#then" class="headerlink" title="then()"></a>then()</h3><p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210611183500.png" srcset="/img/loading.gif" lazyload alt="image-20210611183459134"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210611183555.png" srcset="/img/loading.gif" lazyload alt="image-20210611183554286"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.then()什么时候执行</span><br><span class="hljs-comment">// pending-&gt;fulfilled时，执行then的第一个回调函数</span><br><span class="hljs-comment">// pending-&gt;rejected时，执行then的第二个回调函数</span><br><br><span class="hljs-comment">// 2.执行后的返回值</span><br><span class="hljs-comment">// then()执行后返回一个新的Promise对象，返回的新的Promise对象又可以继续调用then();</span><br><span class="hljs-keyword">const</span> p =<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;<br>    reject();<br>&#125;);<br><span class="hljs-comment">// 在then()的回调函数中，return后面的东西，会用Promise包装一下</span><br><span class="hljs-comment">// return undefined 等价于 return new Promise((resolve)=&gt;&#123;resolve(undefined);&#125;);</span><br><span class="hljs-comment">// then()执行后返回新的Promise对象，新的Promise对象调用then，默认会返回成功状态的Promise对象</span><br><span class="hljs-comment">// 如果想要返回失败状态的Promise对象，return的时候写完整。return new Promise((resolve,reject)=&gt;&#123;reject();&#125;)</span><br><br>p.then(<br>    <span class="hljs-function">()=&gt;</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;success1&#x27;</span>);<br>    &#125;,<br>    <span class="hljs-function">()=&gt;</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;error1&#x27;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">123</span>;<br>    &#125;<br>).then(<br>    <span class="hljs-function">(<span class="hljs-params">data</span>)=&gt;</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;success2&#x27;</span>,data);<br>    &#125;,<br>    <span class="hljs-function">()=&gt;</span>&#123;<br>        <br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;error2&#x27;</span>);<br>    &#125;<br>);<br><br><span class="hljs-comment">// 3.then()方法返回的Promise对象的状态是如何改变的</span><br></code></pre></td></tr></table></figure>

<h3 id="使用Promise解决回调地狱"><a href="#使用Promise解决回调地狱" class="headerlink" title="使用Promise解决回调地狱"></a>使用Promise解决回调地狱</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// Promise 一般用来解决层层嵌套的回调函数(回调地狱callback hell)的问题</span><br><span class="hljs-keyword">const</span> move = <span class="hljs-function">(<span class="hljs-params">el, &#123; x = <span class="hljs-number">0</span>, y = <span class="hljs-number">0</span> &#125; = &#123;&#125;, end = () =&gt; &#123; &#125;</span>) =&gt;</span> &#123;<br>    el.style.transform = <span class="hljs-string">`translate3d(<span class="hljs-subst">$&#123;x&#125;</span>px,<span class="hljs-subst">$&#123;y&#125;</span>px,0)`</span>;<br>    el.addEventListener(<br>        <span class="hljs-string">&#x27;transitionend&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>            end();<br>        &#125;, <span class="hljs-literal">false</span><br>    );<br>&#125;;<br><span class="hljs-keyword">const</span> box = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;box&quot;</span>);<br><span class="hljs-comment">// document.addEventListener(&#x27;click&#x27;,()=&gt;&#123;</span><br><span class="hljs-comment">//     move(box,&#123;x:150&#125;,()=&gt;&#123;</span><br><span class="hljs-comment">//         move(box,&#123;x:150,y:150&#125;,()=&gt;&#123;</span><br><span class="hljs-comment">//             move(box,&#123;y:150&#125;,()=&gt;&#123;</span><br><span class="hljs-comment">//                 move(box,&#123;x:0,y:0&#125;);</span><br><span class="hljs-comment">//             &#125;)</span><br><span class="hljs-comment">//         &#125;)</span><br><span class="hljs-comment">//     &#125;)</span><br><span class="hljs-comment">// &#125;,false);</span><br><span class="hljs-keyword">const</span> movePromise = <span class="hljs-function">(<span class="hljs-params">el, point</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> &#123;<br>        move(el, point, <span class="hljs-function">() =&gt;</span> &#123;<br>            resolve();<br>        &#125;)<br>    &#125;)<br>&#125;<br><br><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    movePromise(box, &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">150</span> &#125;).then(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> movePromise(box, &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">150</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">150</span> &#125;)<br>    &#125;).then(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> movePromise(box, &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">150</span> &#125;)<br>    &#125;).then(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> movePromise(box, &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> &#125;)<br>    &#125;);<br>&#125;, <span class="hljs-literal">false</span>);<br></code></pre></td></tr></table></figure>

<h3 id="catch"><a href="#catch" class="headerlink" title="catch()"></a>catch()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.尽管then()方法的第一个回调函数可以传成功后执行的回调函数，第二个传失败后执行的回调函数</span><br><span class="hljs-comment">// 2.但为了更好地语义化，一般只在then()中传成功后执行的，catch()传reject()后执行的回调函数</span><br><span class="hljs-comment">// catch专门用来处理rejected的状态，catch的本质是then的特例</span><br><span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;<br>    <span class="hljs-comment">// resolve(123);</span><br>    reject(<span class="hljs-string">&#x27;reason&#x27;</span>);<br>&#125;).then(<span class="hljs-function">(<span class="hljs-params">data</span>)=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(data);<br>&#125;).catch(<span class="hljs-function">(<span class="hljs-params">err</span>)=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(err);<br>    <span class="hljs-comment">// 同样会默认返回一个成功的Promise对象。</span><br>    <span class="hljs-comment">// 如果想要返回一个错误的Promise对象</span><br>    <span class="hljs-comment">// 可以throw一个错误</span><br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;errrrr&#x27;</span>);<br>&#125;);<br><span class="hljs-comment">// 3.catch()可以捕获前面的错误</span><br><span class="hljs-comment">// 一般总是Promise对象后面要跟着catch方法，这样可以处理Promise内部发生的错误</span><br></code></pre></td></tr></table></figure>

<h3 id="Promise-resolve-和Promise-reject"><a href="#Promise-resolve-和Promise-reject" class="headerlink" title="Promise.resolve()和Promise.reject()"></a>Promise.resolve()和Promise.reject()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.Promise.resolve()</span><br><span class="hljs-comment">// 是成功状态Promise的一种简写形式</span><br><span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> &#123; resolve(<span class="hljs-string">&quot;foo&quot;</span>); &#125;);<br><span class="hljs-comment">// 简写</span><br><span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">&quot;foo&quot;</span>);<br><br><span class="hljs-comment">//① 参数：一般参数</span><br><span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">&quot;foo&quot;</span>).then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(data));<br><span class="hljs-comment">//②当Promise.resolve()接收的是Promise对象时，直接返回的是这个Promise对象，什么也不做</span><br><span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>, <span class="hljs-string">&quot;我执行了&quot;</span>);<br>&#125;);<br><span class="hljs-built_in">Promise</span>.resolve(p1).then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(data);<br>&#125;)<br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Promise</span>.resolve(p1) === p1); <span class="hljs-comment">//true</span><br><span class="hljs-comment">// 当resolve函数接收的是Promise对象时，后面的then会根据传递的Promise对象的状态变化决定执行哪一个回调</span><br><span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> resolve(p1)).then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> &#123; <span class="hljs-built_in">console</span>.log(data) &#125;);<br><br><span class="hljs-comment">// ③具有then方法的对象，对象中的then()方法和new Promise()差不多</span><br><span class="hljs-keyword">const</span> thenable=&#123;<br>    <span class="hljs-comment">// 和new Promise()里的参数差不多</span><br>    <span class="hljs-function"><span class="hljs-title">then</span>(<span class="hljs-params">resolve, reject</span>)</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;thenable&quot;</span>);<br>        resolve(<span class="hljs-string">&quot;123&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-built_in">Promise</span>.resolve(thenable).then(<span class="hljs-function"><span class="hljs-params">data</span>=&gt;</span><span class="hljs-built_in">console</span>.log(data),<span class="hljs-function"><span class="hljs-params">err</span>=&gt;</span><span class="hljs-built_in">console</span>.log(err));<br><br><span class="hljs-comment">// 2.Promise.reject();</span><br><span class="hljs-comment">// 是失败状态的一种简写形式</span><br><span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;<br>    reject(<span class="hljs-string">&#x27;reason&#x27;</span>);<br>&#125;);<br><span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&#x27;reason&#x27;</span>);<br><span class="hljs-comment">// 不管什么参数都会原封不动的向后传递，作为后续方法的参数</span><br><span class="hljs-built_in">Promise</span>.reject(p1).catch(<span class="hljs-function">(<span class="hljs-params">err</span>)=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(err);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all()"></a>Promise.all()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// Promise.all()用来关注多个Promise对象的状态变化</span><br><span class="hljs-comment">// 可以传入多个Promise实例，包装成一个新的Promise对象返回</span><br><span class="hljs-keyword">const</span> delay=<span class="hljs-function"><span class="hljs-params">ms</span>=&gt;</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span>=&gt;</span>&#123;<br>        <span class="hljs-built_in">setTimeout</span>(resolve,ms);<br>    &#125;)<br>&#125;;<br><span class="hljs-keyword">const</span> p1=delay(<span class="hljs-number">1000</span>).then(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;p1 finished&#x27;</span>);<br>    <span class="hljs-comment">// return Promise.reject(&quot;uifsf&quot;);</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;我是p1&#x27;</span>;<br>&#125;);<br><span class="hljs-keyword">const</span> p2=delay(<span class="hljs-number">2000</span>).then(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;p2 finished&#x27;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;我是p2&#x27;</span>;<br>&#125;);<br><span class="hljs-comment">// Promise.all()的状态变化与所有传入的Promise实例对象状态变化有关</span><br><span class="hljs-comment">// 所有状态都变成了resolved，最终的状态才会变为resolved</span><br><span class="hljs-comment">// 只要有一个变成了rejected，最终的状态才会变为rejected</span><br><br><span class="hljs-comment">// 要给Promise.all()中传入数组，或者任何可遍历的参数</span><br><span class="hljs-keyword">const</span> p=<span class="hljs-built_in">Promise</span>.all([p1,p2]);<br>p.then(<span class="hljs-function"><span class="hljs-params">data</span>=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(data);<br>&#125;,<span class="hljs-function">(<span class="hljs-params">err</span>)=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(err);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="Promise-race-和Promise-allSettled"><a href="#Promise-race-和Promise-allSettled" class="headerlink" title="Promise.race()和Promise.allSettled()"></a>Promise.race()和Promise.allSettled()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.Promise.race()</span><br><span class="hljs-keyword">const</span> delay=<span class="hljs-function"><span class="hljs-params">ms</span>=&gt;</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span>=&gt;</span>&#123;<br>        <span class="hljs-built_in">setTimeout</span>(resolve,ms);<br>    &#125;);<br>&#125;;<br><span class="hljs-keyword">const</span> p1=delay(<span class="hljs-number">1000</span>).then(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;p1 finished&#x27;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我是p1&quot;</span>;<br>&#125;);<br><span class="hljs-keyword">const</span> p2=delay(<span class="hljs-number">2000</span>).then(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;p2 finised&#x27;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我是p2&quot;</span>;<br>&#125;);<br><span class="hljs-comment">// Promise.race()的状态取决于第一个完成的Promise实例对象</span><br><span class="hljs-comment">// 如果第一个完成的成功了，就是最终的成功</span><br><span class="hljs-comment">// 如果第一个完成的失败了，就是最终的失败</span><br><span class="hljs-keyword">const</span> racePromise=<span class="hljs-built_in">Promise</span>.race([p1,p2]);<br>racePromise.then(<span class="hljs-function"><span class="hljs-params">data</span>=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(data);<br>&#125;,<span class="hljs-function">(<span class="hljs-params">err</span>)=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(err);<br>&#125;);<br></code></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 2.Promise.allSetted()</span><br><span class="hljs-keyword">const</span> delay=<span class="hljs-function"><span class="hljs-params">ms</span>=&gt;</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span>=&gt;</span>&#123;<br>        <span class="hljs-built_in">setTimeout</span>(resolve,ms);<br>    &#125;);<br>&#125;;<br><span class="hljs-keyword">const</span> p1=delay(<span class="hljs-number">1000</span>).then(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;p1 finished&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&quot;fjsf&quot;</span>);<br>    <span class="hljs-comment">// return &quot;我是p1&quot;;</span><br>&#125;);<br><br><span class="hljs-keyword">const</span> p2=delay(<span class="hljs-number">200</span>).then(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;p2 finished&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我是p2&quot;</span>;<br>&#125;);<br><br><span class="hljs-keyword">const</span> allSettedPromise=<span class="hljs-built_in">Promise</span>.allSettled([p1,p2]);<br><span class="hljs-comment">// Promise.allSetted()的状态与传入的Promise的状态无关</span><br><span class="hljs-comment">// 永远都是成功的，它只会忠实的记录各个Promise的表现</span><br><br>allSettedPromise.then(<span class="hljs-function">(<span class="hljs-params">data</span>)=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;succeed&quot;</span>,data);<br>&#125;,<span class="hljs-function">(<span class="hljs-params">err</span>)=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;fail&quot;</span>,err);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项"></a>注意事项</h3><p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210612210208.png" srcset="/img/loading.gif" lazyload alt="image-20210612210200175"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.resolve和reject函数执行后的代码</span><br><span class="hljs-comment">// 推荐在调用resolve或reject函数的时候加上return，不再执行它们后面的代码</span><br><span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    resolve(<span class="hljs-number">123</span>);<br>    <span class="hljs-comment">// reject(&quot;reason&quot;);</span><br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;hi&quot;</span>); <span class="hljs-comment">//还可以执行</span><br>&#125;);<br><br><span class="hljs-comment">// 2.Promise.all/race/allSettled的参数</span><br><span class="hljs-comment">// 参数如果不是Promise数组，会将不是Promise的数组元素转变成Promise对象</span><br><span class="hljs-comment">// Promise.all([1,2,3]).then(datas=&gt;&#123;</span><br><span class="hljs-comment">//     console.log(datas);</span><br><span class="hljs-comment">// &#125;);</span><br><span class="hljs-comment">// 等价于</span><br><span class="hljs-built_in">Promise</span>.all([<br>    <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-number">1</span>),<br>    <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-number">2</span>),<br>    <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-number">3</span>)<br>]).then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(data);<br>&#125;) <span class="hljs-comment">//[1,2,3]</span><br><br><span class="hljs-comment">// 除了数组，任何可遍历的都可以作为数组</span><br><span class="hljs-comment">// 数组、字符串、Set、Map、NodeList、arguments</span><br><span class="hljs-built_in">Promise</span>.all(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])).then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(data);<br>&#125;) <span class="hljs-comment">//[1,2,3]</span><br><br><span class="hljs-comment">// 3.Promise.all/race/allsettled错误处理</span><br><span class="hljs-comment">// 错误既可以单独处理，也可以统一处理</span><br><span class="hljs-comment">// 一旦被处理，就不会再处理一遍</span><br><span class="hljs-keyword">const</span> delay = <span class="hljs-function"><span class="hljs-params">ms</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> &#123;<br>        <span class="hljs-built_in">setTimeout</span>(resolve, ms);<br>    &#125;);<br>&#125;;<br><span class="hljs-keyword">const</span> p1 = delay(<span class="hljs-number">1000</span>).then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;p1 finished&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我是P1&quot;</span>;<br>&#125;);<br><span class="hljs-keyword">const</span> p2 = delay(<span class="hljs-number">2000</span>).then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;p2 finished&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&#x27;rej&#x27;</span>);<br><br>&#125;);<br><br><span class="hljs-keyword">const</span> allPromise = <span class="hljs-built_in">Promise</span>.all([p1, p2]);<br>allPromise.then(<span class="hljs-function">(<span class="hljs-params">datas</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(datas);<br>&#125;).catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(err);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>Promise应用异步加载图片</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">        <span class="hljs-selector-id">#img</span>&#123;</span><br><span class="css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">80%</span>;</span><br><span class="css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">10%</span>;</span><br><span class="css">        &#125;</span><br><span class="css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;img&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://img.mukewang.com/szimg/5feb016d097497d905400304.jpg&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">        <span class="hljs-comment">// 1.异步加载图片</span></span><br><span class="javascript">        <span class="hljs-keyword">const</span> loadImgAsync=<span class="hljs-function"><span class="hljs-params">url</span>=&gt;</span>&#123;</span><br><span class="javascript">            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="javascript">                <span class="hljs-comment">// Image()函数将会创建一个新的HTMLImageElement实例。</span></span><br><span class="javascript">                <span class="hljs-comment">// 它的功能等价于 document.createElement(&#x27;img&#x27;)</span></span><br><span class="javascript">                <span class="hljs-keyword">const</span> img=<span class="hljs-keyword">new</span> Image();</span><br><span class="javascript">                <span class="hljs-comment">// Promise函数中不用写具体过程，只需要决定用resolve还是reject即可</span></span><br><span class="javascript">                <span class="hljs-comment">// onload 属性是一个事件处理程序用于处理Window, XMLHttpRequest, &lt;img&gt; 等元素的加载事件，当资源已加载时被触发。     </span></span><br><span class="javascript">                img.onload=<span class="hljs-function">()=&gt;</span>&#123;</span><br><span class="javascript">                    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;sb&quot;</span>);</span><br><span class="javascript">                    resolve(img);</span><br><span class="javascript">                &#125;;</span><br><span class="javascript">                <span class="hljs-comment">// 当一项资源（如&lt;img&gt;或&lt;script&gt;）加载失败，加载资源的元素会触发一个Event接口的error事件，并执行该元素上的onerror()处理函数。</span></span><br><span class="javascript">                img.onerror=<span class="hljs-function">()=&gt;</span>&#123;</span><br><span class="javascript">                    reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`couldn&#x27;t load image at <span class="hljs-subst">$&#123;url&#125;</span>`</span>));</span><br><span class="javascript">                &#125;</span><br><span class="javascript">                img.src=url;</span><br><span class="javascript">            &#125;);</span><br><span class="javascript">        &#125;</span><br><span class="javascript">        <span class="hljs-keyword">let</span> url1=<span class="hljs-string">&#x27;https://img4.mukewang.com/szimg/60b9864a09995aa605400304.png&#x27;</span>;</span><br><span class="javascript">        <span class="hljs-keyword">const</span> imgDom=<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;img&#x27;</span>);</span><br><span class="javascript">        loadImgAsync(url1).then(<span class="hljs-function"><span class="hljs-params">img</span>=&gt;</span>&#123;</span><br><span class="javascript">            <span class="hljs-built_in">console</span>.log(img.src);</span><br><span class="javascript">            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;</span><br><span class="javascript">                imgDom.src=img.src;</span><br><span class="javascript">            &#125;,<span class="hljs-number">1000</span>);</span><br><span class="javascript">        &#125;).catch(<span class="hljs-function"><span class="hljs-params">err</span>=&gt;</span>&#123;</span><br><span class="javascript">            <span class="hljs-built_in">console</span>.log(err);</span><br><span class="javascript">        &#125;);</span><br><span class="javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210613141556.png" srcset="/img/loading.gif" lazyload alt="image-20210613141548090"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210613141646.png" srcset="/img/loading.gif" lazyload alt="image-20210613141645235"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210613141718.png" srcset="/img/loading.gif" lazyload alt="image-20210613141717621"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210613141850.png" srcset="/img/loading.gif" lazyload alt="image-20210613141849863"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210613142008.png" srcset="/img/loading.gif" lazyload alt="image-20210613142007368"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210613142051.png" srcset="/img/loading.gif" lazyload alt="image-20210613142050967"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210613142136.png" srcset="/img/loading.gif" lazyload alt="image-20210613142135558"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210613142151.png" srcset="/img/loading.gif" lazyload alt="image-20210613142150152"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210613142217.png" srcset="/img/loading.gif" lazyload alt="image-20210613142216303"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210613163043.png" srcset="/img/loading.gif" lazyload alt="image-20210613163042772"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210613163154.png" srcset="/img/loading.gif" lazyload alt="image-20210613163153293"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210613163220.png" srcset="/img/loading.gif" lazyload alt="image-20210613163219353"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210613163246.png" srcset="/img/loading.gif" lazyload alt="image-20210613163245239"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210613163304.png" srcset="/img/loading.gif" lazyload alt="image-20210613163303168"></p>
<h1 id="class"><a href="#class" class="headerlink" title="class"></a>class</h1><h3 id="定义-4"><a href="#定义-4" class="headerlink" title="定义"></a>定义</h3><p><strong>class 声明</strong>创建一个基于原型继承的具有给定名称的新类。</p>
<p>要注意类的写法，并没有圆括号直接跟上了花括号，方法和方法之间不需要用逗号分隔。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 类可以看做是对象的模板，用一个类可以创建出许多不同的对象</span><br><span class="hljs-comment">// 类名一般来说，首字母是大写的</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span></span>&#123;<br>    <span class="hljs-comment">// 实例化时必须执行构造方法，所以必须有构造方法，但是可以不写出来</span><br>    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">name,age</span>)</span>&#123;<br>        <span class="hljs-built_in">this</span>.name=name;<br>        <span class="hljs-built_in">this</span>.age=age;<br>        <span class="hljs-comment">// 一般只在构造方法中定义属性，方法不在构造方法中定义</span><br>    &#125;<br>    <span class="hljs-comment">// 各个实例共用的方法</span><br>    <span class="hljs-function"><span class="hljs-title">speak</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;speak&#x27;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 实例对象</span><br><span class="hljs-keyword">const</span> zs=<span class="hljs-keyword">new</span> Person(<span class="hljs-string">&#x27;张三&#x27;</span>,<span class="hljs-number">18</span>);<br><span class="hljs-keyword">const</span> ls=<span class="hljs-keyword">new</span> Person(<span class="hljs-string">&#x27;ls&#x27;</span>,<span class="hljs-number">58</span>);<br><span class="hljs-built_in">console</span>.log(zs.speak===ls.speak); <span class="hljs-comment">//true</span><br></code></pre></td></tr></table></figure>

<p>声明的Person类本质上是一个函数，和构造函数差不多。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> Person); <span class="hljs-comment">//function</span><br><span class="hljs-built_in">console</span>.log(Person.prototype.speak);<br></code></pre></td></tr></table></figure>

<p>对比一下Person构造函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 构造函数</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person1</span>(<span class="hljs-params">name,age</span>)</span>&#123;<br>    <span class="hljs-built_in">this</span>.name=name;<br>    <span class="hljs-built_in">this</span>.age=age;<br>&#125;<br>Person1.prototype.speak=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;speak&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="2种定义形式"><a href="#2种定义形式" class="headerlink" title="2种定义形式"></a>2种定义形式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.声明形式</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span>&#123;<br><br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">speak</span>(<span class="hljs-params"></span>)</span>&#123;&#125;<br>&#125;<br><br><span class="hljs-comment">// 2.表达式形式</span><br><span class="hljs-keyword">const</span> Person1=<span class="hljs-class"><span class="hljs-keyword">class</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span>&#123;<br><br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<h3 id="立即执行的类"><a href="#立即执行的类" class="headerlink" title="立即执行的类"></a>立即执行的类</h3><p>类也可以像立即执行的匿名函数一样立即执行，但要记得在类前面加上关键字<code>new</code>，否则会报错。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 立即执行的类</span><br><span class="hljs-keyword">new</span> (<span class="hljs-class"><span class="hljs-keyword">class</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;hahah&quot;</span>);<br>    &#125;<br>&#125;)();<br><br><span class="hljs-comment">// 立即执行函数</span><br><span class="hljs-comment">// (function()&#123;</span><br><br><span class="hljs-comment">// &#125;)();</span><br></code></pre></td></tr></table></figure>

<h3 id="实例属性、静态方法、静态属性"><a href="#实例属性、静态方法、静态属性" class="headerlink" title="实例属性、静态方法、静态属性"></a>实例属性、静态方法、静态属性</h3><h4 id="1-实例属性"><a href="#1-实例属性" class="headerlink" title="1.实例属性"></a>1.实例属性</h4><p>实例属性一般可以用作默认值，它不能用<code>var</code>、<code>let</code>、<code>const</code>等关键字声明。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.实例属性</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span></span>&#123;<br>    <span class="hljs-comment">//constructor外 不能用关键字声明属性，也不能用this</span><br>    <span class="hljs-comment">// 一般用作默认值</span><br>    name=<span class="hljs-string">&quot;zhangsan&quot;</span><br>    age=<span class="hljs-number">18</span>;<br>    <span class="hljs-comment">// 实例方法 方法是值为函数的特殊属性</span><br>    getAge=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.age;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">name</span>)</span>&#123;<br>        <span class="hljs-built_in">this</span>.name=name;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">const</span> p=<span class="hljs-keyword">new</span> Person(<span class="hljs-string">&#x27;alex&#x27;</span>);<br><span class="hljs-built_in">console</span>.log(p.name,p.age);<span class="hljs-comment">// alex 18</span><br><span class="hljs-built_in">console</span>.log(p.getAge()); <span class="hljs-comment">//18</span><br></code></pre></td></tr></table></figure>

<h4 id="2-静态方法"><a href="#2-静态方法" class="headerlink" title="2.静态方法"></a>2.静态方法</h4><p>静态方法是类的方法，不需要实例化类就能够调用。用关键字static来声明静态方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">name,sex</span>)</span>&#123;<br>        <span class="hljs-built_in">this</span>.name=name;<br>        <span class="hljs-built_in">this</span>.sex=sex;<br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-title">speak</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;haha...&#x27;</span>);<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>); <span class="hljs-comment">//this指向Person类</span><br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">speak</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;awsl&quot;</span>);<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>); <span class="hljs-comment">//this指向实例对象</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">// 调用类的方法 静态方法</span><br>Person.speak();  <span class="hljs-comment">//haha...</span><br><span class="hljs-keyword">const</span> xm=<span class="hljs-keyword">new</span> Person(<span class="hljs-string">&quot;xm&quot;</span>,<span class="hljs-number">12</span>);<br>xm.speak(); <span class="hljs-comment">//awsl</span><br><br><span class="hljs-comment">//也可以把类的方法写在</span><br><br></code></pre></td></tr></table></figure>

<h1 id="module"><a href="#module" class="headerlink" title="module"></a>module</h1><h3 id="定义-5"><a href="#定义-5" class="headerlink" title="定义"></a>定义</h3><p>模块是一个一个的局部作用域的代码块。模块系统可以解决①模块化的问题②消除全局变量③管理加载顺序。</p>
<h3 id="例子一"><a href="#例子一" class="headerlink" title="例子一"></a>例子一</h3><p>一个模块即使没有导出，也可以将其导入。要注意在<code>script</code>标签中 加上 <code>type=&quot;module&quot;</code>，导入后代码会执行一遍，多次导入也仅仅会执行一遍。</p>
<blockquote>
<p>exp1.html</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./module.js&#x27;</span>  <span class="hljs-comment">//18</span></span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>module.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> age=<span class="hljs-number">18</span>;<br><span class="hljs-built_in">console</span>.log(age);<br></code></pre></td></tr></table></figure>

<p>没有导出，直接导入就相当于写成:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">scr</span>=<span class="hljs-string">&#x27;./module.js&#x27;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&#x27;module&#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="例子二"><a href="#例子二" class="headerlink" title="例子二"></a>例子二</h3><p>一个模块只能有一个export default。</p>
<blockquote>
<p>exp2.html</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-comment">//可以随便取名</span></span><br><span class="javascript"><span class="hljs-keyword">import</span> age <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;moudle.js&#x27;</span>;</span><br><span class="javascript"><span class="hljs-built_in">console</span>.log(age); <span class="hljs-comment">//18</span></span><br><span class="javascript"></span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>module.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> age=<span class="hljs-number">18</span>;<br><span class="hljs-comment">// 一个模块只能有一个export default</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> age;<br></code></pre></td></tr></table></figure>

<h3 id="例子三"><a href="#例子三" class="headerlink" title="例子三"></a>例子三</h3><blockquote>
<p>exp3.html</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">// import age from &#x27;./module.js&#x27;; </span></span><br><span class="javascript">    <span class="hljs-comment">// 上面的是export default对应的import</span></span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">// 法一：普通导入</span></span><br><span class="javascript">    <span class="hljs-comment">// 不能随意命名，需要和导出的名字一样</span></span><br><span class="javascript">    <span class="hljs-comment">// 因此无法导出匿名函数、类等</span></span><br><span class="javascript">    <span class="hljs-keyword">import</span> &#123;age,gender&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./module.js&#x27;</span>;</span><br><span class="javascript">    </span><br><span class="javascript">    <span class="hljs-comment">// 法二：导入时起别名</span></span><br><span class="javascript">    <span class="hljs-keyword">import</span> &#123;func,userName <span class="hljs-keyword">as</span> person&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./module.js&#x27;</span>;</span><br><span class="javascript">    </span><br><span class="javascript">    <span class="hljs-comment">// 法三： 整体导入(会同时导入export和export default导出的)，obj为别名</span></span><br><span class="javascript">    <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> obj <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./module.js&#x27;</span>;</span><br><span class="javascript">    <span class="hljs-built_in">console</span>.log(age,gender,func,person);</span><br><span class="javascript">    <span class="hljs-built_in">console</span>.log(obj);</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">// 法四：同时导入export和export default导出的参数</span></span><br><span class="javascript">    <span class="hljs-comment">// 注意export default导出的要写在前面</span></span><br><span class="javascript">    <span class="hljs-keyword">import</span> weight,&#123;height&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./module.js&#x27;</span>;</span><br><span class="javascript">    <span class="hljs-built_in">console</span>.log(weight,height); <span class="hljs-comment">//56 168</span></span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>module.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 法一：export后面接声明或语句</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> age =<span class="hljs-number">18</span>;<br><br><span class="hljs-comment">// 法二： export后接 &#123;argument&#125;;</span><br><span class="hljs-keyword">const</span> gender=<span class="hljs-string">&quot;male&quot;</span>;<br><span class="hljs-keyword">export</span> &#123;gender&#125;; <span class="hljs-comment">//√</span><br><span class="hljs-comment">// export gender; ×</span><br><br><span class="hljs-comment">// 注意不能导出匿名函数或者类等</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>)</span>&#123;&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Name</span></span>&#123;&#125;<br><br><br><span class="hljs-comment">// 法三：导出为别名</span><br><span class="hljs-keyword">export</span> &#123;fn <span class="hljs-keyword">as</span> func,Name <span class="hljs-keyword">as</span> userName&#125;;<br><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-number">56</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> height=<span class="hljs-number">168</span>;<br></code></pre></td></tr></table></figure>

<h3 id="注意事项-2"><a href="#注意事项-2" class="headerlink" title="注意事项"></a>注意事项</h3><p>1.模块顶层的<code>this</code>指向</p>
<p>顶层是值不在for块级、function函数作用域中，直接在模块中的作用域。</p>
<p>在模块中，顶层的this是指向undefined的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">this</span>!==<span class="hljs-string">&#x27;undefined&#x27;</span>)&#123;<br>    <span class="hljs-comment">// 如果this不为undefined，说明并不是用模块的方式来加载的</span><br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&quot;没有以模块的形式导入&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>2.import和import()</p>
<p>import关键字具有提升效果，会提升到整个模块的头部、率先执行。也即import执行的时候，其他代码还没有开始执行。因此import和export命令只能在模块的顶层，<strong>不能放在在代码块中执行</strong>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><br><span class="hljs-comment">// 会直接报错！！！</span><br><span class="hljs-keyword">if</span> (PC)&#123;<br>    <span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;pc.js&#x27;</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(mobile)&#123;<br>    <span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;mobile.js&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>而import()可以按条件导入，且会返回promise对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> (PC)&#123;<br>    <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;pc.js&#x27;</span>).then().catch();<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(mobile)&#123;<br>    <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;mobile.js&#x27;</span>).then().catch();<br>&#125;<br></code></pre></td></tr></table></figure>

<p>3.先导入再导出的复合写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 把age从别的模块导入，再又导出，相当于一个中转站</span><br><span class="hljs-comment">// export &#123;age&#125; from &#x27;./module.js&#x27;; </span><br><span class="hljs-comment">// 复合写法导出的，无法在当前模块使用</span><br><span class="hljs-comment">// 相当于下面的import和export语句，但是上面的复合写法age无法正常输出</span><br><span class="hljs-keyword">import</span> &#123;age&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./module.js&#x27;</span>;<br><span class="hljs-built_in">console</span>.log(age); <span class="hljs-comment">// 可以正常输出</span><br><span class="hljs-keyword">export</span> &#123;age&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./module.js&#x27;</span>;<br><span class="hljs-built_in">console</span>.log(age); <span class="hljs-comment">// 可以正常输出</span><br></code></pre></td></tr></table></figure>

<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210615232944.png" srcset="/img/loading.gif" lazyload alt="image-20210615232937033"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210615233124.png" srcset="/img/loading.gif" lazyload alt="image-20210615233123778"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210615233158.png" srcset="/img/loading.gif" lazyload alt="image-20210615233157075"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210615233229.png" srcset="/img/loading.gif" lazyload alt="image-20210615233228936"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210615233314.png" srcset="/img/loading.gif" lazyload alt="image-20210615233313046"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210615233404.png" srcset="/img/loading.gif" lazyload alt="image-20210615233403786"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210615233452.png" srcset="/img/loading.gif" lazyload alt="image-20210615233451256"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210615233558.png" srcset="/img/loading.gif" lazyload alt="image-20210615233557251"></p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210615233652.png" srcset="/img/loading.gif" lazyload alt="image-20210615233651225"></p>
<h1 id="node入门"><a href="#node入门" class="headerlink" title="node入门"></a>node入门</h1><p>笔记内容源自：<a target="_blank" rel="noopener" href="https://youtu.be/TlB_eWDSMt4">https://youtu.be/TlB_eWDSMt4</a></p>
<p>在powershell中输入<code>code .</code>会用VS Code打开当前文件夹。</p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210616170542.png" srcset="/img/loading.gif" lazyload alt="image-20210616170534238"></p>
<p> 首先进入到要执行js的文件夹，然后输入 node +要运行的程序名，即可运行js。</p>
<p>在node中，没有window和document对象，但在node中有其他的对象可以操作文件、操作系统、网络等。</p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210616171059.png" srcset="/img/loading.gif" lazyload alt="image-20210616171058446"></p>
<p>在浏览器中中运行JavaScript，可以通过window.setTimeout()来调用setTimeout全局函数。在node中，则可以通过global.setTimeout()来调用，变量和函数不会添加到global对象中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> message=<span class="hljs-string">&#x27;&#x27;</span>; <br><span class="hljs-comment">//在浏览器中变量message会被添加到window对象中</span><br><span class="hljs-comment">//在node中变量message不会被添加到global对象中</span><br><br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">global</span>.message); <span class="hljs-comment">//undefined</span><br></code></pre></td></tr></table></figure>

<p>在node中任何文件都被视为模块(module)，在文件中定义的变量或函数的作用域限制在了该文件。如果需要使用这些私有变量或函数，需要明确地export它。</p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210616172238.png" srcset="/img/loading.gif" lazyload alt="image-20210616172237280"></p>
<p>任何node应用程序都至少有一个main 模块(文件)，我们称之为main module。</p>
<p>使用require()来加载模块，require函数的参数时是目标加载模块的路径。当导出不止一个参数时，require会返回一个从目标模块导出的对象。</p>
<blockquote>
<p>app.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> logger = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./logger&#x27;</span>)<br><span class="hljs-comment">//&#123; log: [Function: log], url: &#x27;http://mylogger.io/log&#x27; &#125;</span><br><span class="hljs-built_in">console</span>.log(logger);<br><br><span class="hljs-comment">//调用另外一个模块的函数</span><br>logger.log(<span class="hljs-string">&quot;message&quot;</span>)<br></code></pre></td></tr></table></figure>

<blockquote>
<p>logger.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span>  url=<span class="hljs-string">&#x27;http://mylogger.io/log&#x27;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">log</span>(<span class="hljs-params">message</span>)</span>&#123;<br>    <span class="hljs-comment">// send an http request</span><br>    <span class="hljs-built_in">console</span>.log(message);<br>&#125;<br><br><span class="hljs-comment">//输出的名字可以自定义</span><br><span class="hljs-built_in">module</span>.exports.log=log;<br><span class="hljs-built_in">module</span>.exports.url=url;<br></code></pre></td></tr></table></figure>

<p>最后，console.log(logger)会输出一个对象。</p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210617112306.png" srcset="/img/loading.gif" lazyload alt="image-20210617112257229"></p>
<p>如果只需要导出一个参数，导出时可以不自定义名字，这样require函数返回的不是导出模块的参数对象，而是返回的导出模块导出的变量名或常量名。</p>
<blockquote>
<p>app.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> log = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./logger&#x27;</span>)<br><br>log(<span class="hljs-string">&quot;message&quot;</span>);<br></code></pre></td></tr></table></figure>

<blockquote>
<p>logger.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span>  url=<span class="hljs-string">&#x27;http://mylogger.io/log&#x27;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">log</span>(<span class="hljs-params">message</span>)</span>&#123;<br>    <span class="hljs-comment">// send an http request</span><br>    <span class="hljs-built_in">console</span>.log(message);<br>&#125;<br><br><br><span class="hljs-built_in">module</span>.exports=log;<br></code></pre></td></tr></table></figure>

<h1 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h1><p>babel官网： <a target="_blank" rel="noopener" href="https://babeljs.io/">https://babeljs.io/</a>。</p>
<p>主要用于将采用 ECMAScript 2015+ 语法编写的代码转换为向后兼容的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其他环境中。</p>
<p>Babel本身可以编译ES6的大部分语法，比如let、 const、箭头函数、类。但是对于ES6新增的API，比如Set、Map、 Promise等全局对象都不能直接编译，需要借助其它的模块。Babel一般需要配合 Webpack来编译模块语法。</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/c3b181a491acea93cf6d8ef6a58c848d.png" srcset="/img/loading.gif" lazyload alt="image-20210618115716149"></p>
<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><p>要在项目目录文件下，在powershell中安装babel所需要的包。首先要<code>npm init</code>，初始化项目，回车后，会提示包名，注意包名不能是中文。</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/833503aaf604e173ec462d091e6c9f2a.png" srcset="/img/loading.gif" lazyload alt="image-20210618120620517"><br><img src="https://img-blog.csdnimg.cn/img_convert/18f61389a04283749f3fe5fec2fd72fc.png" srcset="/img/loading.gif" lazyload alt="image-20210618120938972"></p>
<p>一系列回车后，项目中会多了一个package.json的文件，执行<code>npm init</code>就是为了得到这个json文件。这个json文件会记录安装的其他的包。</p>
<img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210618121541.png" srcset="/img/loading.gif" lazyload alt="image-20210618121540287" style="zoom:33%;" />

<h2 id="安装babel"><a href="#安装babel" class="headerlink" title="安装babel"></a>安装babel</h2><p>安装babel的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev @babel/core @babel/cli @babel/preset-env<br></code></pre></td></tr></table></figure>

<p><code>--save-dev</code>：<code>save</code>表示要把它们的信息写入 package.json, <code>dev</code>表示是开发模式下。</p>
<p><code> @babel/core @babel/cli @babel/preset-env</code>表示三个一般都要安装的babel包。</p>
<blockquote>
<p>PS：只要有<code>package.json</code>，就可以直接在命名行中输入<code>npm install</code>安装所有的该json文件中提到的所有包。</p>
</blockquote>
<h2 id="配置babel"><a href="#配置babel" class="headerlink" title="配置babel"></a>配置babel</h2><p><img src="https://img-blog.csdnimg.cn/img_convert/f1c3c2ba0abdba32f6fbda1eda7926fe.png" srcset="/img/loading.gif" lazyload alt="image-20210618122619509"><br>需要在根目录<code>package.json</code>文件中添加下面的代码。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>  <span class="hljs-attr">&quot;build&quot;</span>: <span class="hljs-string">&quot;babel src -d dist&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/img_convert/703d2d400cda8e83635ec81522c221bb.png" srcset="/img/loading.gif" lazyload alt="image-20210618123402148"><br><code>babel src -d lib</code>是<code>babel src --out-dir dist</code>的缩写，也就是从src目录输出到lib目录。</p>
<hr>
<p>在项目的根目录中创建名为 <code>babel.config.json</code>的配置文件。</p>
<p>如果想要转换<code>let</code> 、<code>const</code>，必须要在<code>target</code>中写<code>ie:10</code>，因为目前除了ie不支持几乎所有版本的浏览器都支持。不写的话就代表不把ie10作为目标浏览器，就不会转换<code>const</code>、<code>let</code>、<code>箭头函数</code>等这些几年前就出来的语法。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;presets&quot;</span>: [<br>    [<br>      <span class="hljs-string">&quot;@babel/env&quot;</span>,<br>      &#123;<br>        <span class="hljs-attr">&quot;targets&quot;</span>: &#123;<br>            <span class="hljs-attr">&quot;ie&quot;</span>:<span class="hljs-string">&quot;10&quot;</span>,<br>          <span class="hljs-attr">&quot;edge&quot;</span>: <span class="hljs-string">&quot;17&quot;</span>,<br>          <span class="hljs-attr">&quot;firefox&quot;</span>: <span class="hljs-string">&quot;60&quot;</span>,<br>          <span class="hljs-attr">&quot;chrome&quot;</span>: <span class="hljs-string">&quot;67&quot;</span>,<br>          <span class="hljs-attr">&quot;safari&quot;</span>: <span class="hljs-string">&quot;11.1&quot;</span><br>        &#125;,<br>        <span class="hljs-attr">&quot;useBuiltIns&quot;</span>: <span class="hljs-string">&quot;usage&quot;</span>,<br>        <span class="hljs-attr">&quot;corejs&quot;</span>: <span class="hljs-string">&quot;3.6.5&quot;</span><br>      &#125;<br>    ]<br>  ]<br>&#125;<br></code></pre></td></tr></table></figure>
<p>当然，如果缺省<code>target</code>，直接写如下代码，默认会转换为ES5。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;presets&quot;</span>: [<span class="hljs-string">&quot;@babel/env&quot;</span>]<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm run build<br></code></pre></td></tr></table></figure>

<p>build就是<code>package.json</code>script中自定义的名字，通过npm run build开始执行。可以在项目中看到多了名为lib的文件夹，里面有babel编译后的js文件。</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/a52e2d447d3daf8b9d66240b53e3bdad.png" srcset="/img/loading.gif" lazyload alt="image-20210618124246687"></p>
<p><strong>最后，我走了很多很多弯路，因为我tm没有看官方文档</strong>。要是我看看文档，我也就知道了<code>const</code>、<code>let</code>为什么没有转换。因为要定义target，要把ie也作为目标浏览器。</p>
<p><a target="_blank" rel="noopener" href="https://babel.docschina.org/docs/en/usage/">中文官方文档</a>拜托我自己多看官方文档，再到处提问。</p>
<h1 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h1><p><a target="_blank" rel="noopener" href="https://www.webpackjs.com/">webpack中文官网</a></p>
<p>webpack是静态模块打包器，当使用webpack处理应用程序时，会将这些模块打包成一个或多个文件。</p>
<p>它可以处理js/css/图片/字体/图标等文件，用于处理静态(本地)文件。</p>
<p>模块化是一种将系统分离成独立功能部分的方法，严格定义模块接口、模块间具有透明性。</p>
<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><h3 id="入口-entry"><a href="#入口-entry" class="headerlink" title="入口(entry)"></a>入口(entry)</h3><p><strong>入口起点(entry point)</strong> 指示 webpack 应该使用哪个模块，来作为构建其内部 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/dependency-graph/">依赖图(dependency graph)</a> 的开始。进入入口起点后，webpack 会找出有哪些模块和库是入口起点（直接和间接）依赖的。</p>
<p>默认值是 <code>./src/index.js</code>，但你可以通过在 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration">webpack configuration</a> 中配置 <code>entry</code> 属性，来指定一个（或多个）不同的入口起点。例如：</p>
<blockquote>
<p><strong>webpack.config.js</strong></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">entry</span>: <span class="hljs-string">&#x27;./path/to/my/entry/file.js&#x27;</span>,<br>&#125;;<br></code></pre></td></tr></table></figure>

<h4 id="多个入口"><a href="#多个入口" class="headerlink" title="多个入口"></a>多个入口</h4><p>用法：<code>entry: &#123; &lt;entryChunkName&gt; string | [string] &#125; | &#123;&#125;</code></p>
<blockquote>
<p><strong>webpack.config.js</strong></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">entry</span>: &#123;<br>    <span class="hljs-attr">app</span>: <span class="hljs-string">&#x27;./src/app.js&#x27;</span>,<br>    <span class="hljs-attr">adminApp</span>: <span class="hljs-string">&#x27;./src/adminApp.js&#x27;</span>,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure>

<h4 id="描述入口的对象"><a href="#描述入口的对象" class="headerlink" title="描述入口的对象"></a>描述入口的对象</h4><p>用于描述入口的对象。你可以使用如下属性：</p>
<ul>
<li><code>dependOn</code>: 当前入口所依赖的入口。它们必须在该入口被加载前被加载。</li>
<li><code>filename</code>: 指定要输出的文件名称。</li>
<li><code>import</code>: 启动时需加载的模块。</li>
<li><code>library</code>: 指定 library 选项，为当前 entry 构建一个 library。</li>
<li><code>runtime</code>: 运行时 chunk 的名字。如果设置了，就会创建一个以这个名字命名的运行时 chunk，否则将使用现有的入口作为运行时。</li>
<li><code>publicPath</code>: 当该入口的输出文件在浏览器中被引用时，为它们指定一个公共 URL 地址。请查看 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/output/#outputpublicpath">output.publicPath</a>。</li>
</ul>
<p><code>runtime</code> 和 <code>dependOn</code> 不应在同一个入口上同时使用，所以如下配置无效，并且会抛出错误：</p>
<blockquote>
<p><strong>webpack.config.js</strong></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">entry</span>: &#123;<br>    <span class="hljs-attr">a2</span>: <span class="hljs-string">&#x27;./a&#x27;</span>,<br>    <span class="hljs-attr">b2</span>: &#123;<br>      <span class="hljs-attr">runtime</span>: <span class="hljs-string">&#x27;x2&#x27;</span>,<br>      <span class="hljs-attr">dependOn</span>: <span class="hljs-string">&#x27;a2&#x27;</span>,<br>      <span class="hljs-attr">import</span>: <span class="hljs-string">&#x27;./b&#x27;</span>,<br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>确保 <code>runtime</code> 不能指向已存在的入口名称，例如下面配置会抛出一个错误：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">entry</span>: &#123;<br>    <span class="hljs-attr">a1</span>: <span class="hljs-string">&#x27;./a&#x27;</span>,<br>    <span class="hljs-attr">b1</span>: &#123;<br>      <span class="hljs-attr">runtime</span>: <span class="hljs-string">&#x27;a1&#x27;</span>,<br>      <span class="hljs-attr">import</span>: <span class="hljs-string">&#x27;./b&#x27;</span>,<br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>另外 <code>dependOn</code> 不能是循环引用的，下面的例子也会出现错误：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">entry</span>: &#123;<br>    <span class="hljs-attr">a3</span>: &#123;<br>      <span class="hljs-attr">import</span>: <span class="hljs-string">&#x27;./a&#x27;</span>,<br>      <span class="hljs-attr">dependOn</span>: <span class="hljs-string">&#x27;b3&#x27;</span>,<br>    &#125;,<br>    <span class="hljs-attr">b3</span>: &#123;<br>      <span class="hljs-attr">import</span>: <span class="hljs-string">&#x27;./b&#x27;</span>,<br>      <span class="hljs-attr">dependOn</span>: <span class="hljs-string">&#x27;a3&#x27;</span>,<br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure>



<h3 id="输出-output"><a href="#输出-output" class="headerlink" title="输出(output)"></a>输出(output)</h3><p><strong>output</strong> 属性告诉 webpack 在哪里输出它所创建的 <em>bundle</em>，以及如何命名这些文件。主要输出文件的默认值是 <code>./dist/main.js</code>，其他生成文件默认放置在 <code>./dist</code> 文件夹中。</p>
<p>注意，即使可以存在多个 <code>entry</code> 起点，但只能指定一个 <code>output</code> 配置。</p>
<p>你可以通过在配置中指定一个 <code>output</code> 字段，来配置这些处理过程：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">entry</span>: <span class="hljs-string">&#x27;./path/to/my/entry/file.js&#x27;</span>,<br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-comment">// path:绝对路径</span><br>    <span class="hljs-attr">path</span>: path.resolve(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>),<br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;my-first-webpack.bundle.js&#x27;</span>,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>在上面的示例中，我们通过 <code>output.filename</code> 和 <code>output.path</code> 属性，来告诉 webpack bundle 的名称，以及我们想要 bundle 生成(emit)到哪里。在代码最上面导入的 path 模块是什么，它是一个 <a target="_blank" rel="noopener" href="https://nodejs.org/api/modules.html">Node.js 核心模块</a>，用于操作文件路径。</p>
<p>如果有多个入口文件，出口文件需要改名，否则就会覆盖。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path=<span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-built_in">module</span>.exports=&#123;<br>    <span class="hljs-attr">entry</span>:&#123;<br>        <span class="hljs-string">&quot;main&quot;</span>:<span class="hljs-string">&#x27;./src/index.js&#x27;</span>,<br>        <span class="hljs-string">&quot;app&quot;</span>:<span class="hljs-string">&#x27;./src/module.js&#x27;</span><br>    &#125;,<br>    <span class="hljs-attr">output</span>:&#123;<br>        <span class="hljs-comment">// [name]表示入口的名字</span><br>        <span class="hljs-attr">filename</span>:<span class="hljs-string">&#x27;[name].bundle.js&#x27;</span>,<br>        <span class="hljs-attr">path</span>:path.resolve(__dirname,<span class="hljs-string">&#x27;dist&#x27;</span>),  <br>        <span class="hljs-comment">// 清除没有用到的文件</span><br>        <span class="hljs-attr">clean</span>:<span class="hljs-literal">true</span><br>        <br>    &#125;,<br>    <span class="hljs-attr">mode</span>:<span class="hljs-string">&#x27;development&#x27;</span>,<br>&#125;;<br></code></pre></td></tr></table></figure>

<h3 id="loader"><a href="#loader" class="headerlink" title="loader"></a><a target="_blank" rel="noopener" href="https://www.webpackjs.com/loaders/babel-loader/">loader</a></h3><p>webpack 只能理解 JavaScript 和 JSON 文件，这是 webpack 开箱可用的自带能力。<strong>loader</strong> 让 webpack 能够去处理其他类型的文件，并将它们转换为有效 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/modules">模块</a>，以供应用程序使用，以及被添加到依赖图中。</p>
<blockquote>
<h5 id="Warning"><a href="#Warning" class="headerlink" title="Warning"></a>Warning</h5><p>注意，loader 能够 <code>import</code> 导入任何类型的模块（例如 <code>.css</code> 文件），这是 webpack 特有的功能，其他打包程序或任务执行器的可能并不支持。我们认为这种语言扩展是很有必要的，因为这可以使开发人员创建出更准确的依赖关系图。</p>
</blockquote>
<p>在更高层面，在 webpack 的配置中，<strong>loader</strong> 有两个属性：</p>
<ol>
<li><code>test</code> 属性，识别出哪些文件会被转换。</li>
<li><code>use</code> 属性，定义出在进行转换时，应该使用哪个 loader。</li>
</ol>
<blockquote>
<p><strong>webpack.config.js</strong></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;my-first-webpack.bundle.js&#x27;</span>,<br>  &#125;,<br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [&#123; <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.txt$/</span>, use: <span class="hljs-string">&#x27;raw-loader&#x27;</span> &#125;],<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>以上配置中，对一个单独的 module 对象定义了 <code>rules</code> 属性，里面包含两个必须属性：<code>test</code> 和 <code>use</code>。这告诉 webpack 编译器(compiler) 如下信息：</p>
<blockquote>
<p>“嘿，webpack 编译器，当你碰到「在 <code>require()</code>/<code>import</code> 语句中被解析为 ‘.txt’ 的路径」时，在你对它打包之前，先 <strong>use(使用)</strong> <code>raw-loader</code> 转换一下。”</p>
</blockquote>
<blockquote>
<h5 id="Warning-1"><a href="#Warning-1" class="headerlink" title="Warning"></a>Warning</h5><p>重要的是要记住，在 webpack 配置中定义 rules 时，要定义在 <code>module.rules</code> 而不是 <code>rules</code> 中。为了使你便于理解，如果没有按照正确方式去做，webpack 会给出警告。</p>
</blockquote>
<h3 id="插件-plugin"><a href="#插件-plugin" class="headerlink" title="插件(plugin)"></a><a target="_blank" rel="noopener" href="https://www.webpackjs.com/plugins/">插件(plugin)</a></h3><p>loader 用于转换某些类型的模块，而插件则可以用于执行范围更广的任务。包括：打包优化，资源管理，注入环境变量。</p>
<p>想要使用一个插件，你只需要 <code>require()</code> 它，然后把它添加到 <code>plugins</code> 数组中。多数插件可以通过选项(option)自定义。你也可以在一个配置文件中因为不同目的而多次使用同一个插件，这时需要通过使用 <code>new</code> 操作符来创建一个插件实例。</p>
<blockquote>
<p><strong>webpack.config.js</strong></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> HtmlWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;html-webpack-plugin&#x27;</span>); <span class="hljs-comment">// 通过 npm 安装</span><br><span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;webpack&#x27;</span>); <span class="hljs-comment">// 用于访问内置插件</span><br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [&#123; <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.txt$/</span>, use: <span class="hljs-string">&#x27;raw-loader&#x27;</span> &#125;],<br>  &#125;,<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-keyword">new</span> HtmlWebpackPlugin(&#123; <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;./src/index.html&#x27;</span> &#125;)],<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>在上面的示例中，<code>html-webpack-plugin</code> 为应用程序生成一个 HTML 文件，并自动注入所有生成的 bundle。</p>
<h3 id="模式-mode"><a href="#模式-mode" class="headerlink" title="模式(mode)"></a>模式(mode)</h3><p>通过选择 <code>development</code>, <code>production</code> 或 <code>none</code> 之中的一个，来设置 <code>mode</code> 参数，你可以启用 webpack 内置在相应环境下的优化。其默认值为 <code>production</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;production&#x27;</span>,<br>&#125;;<br></code></pre></td></tr></table></figure>

<h3 id="浏览器兼容性-browser-compatibility"><a href="#浏览器兼容性-browser-compatibility" class="headerlink" title="浏览器兼容性(browser compatibility)"></a>浏览器兼容性(browser compatibility)</h3><p>webpack 支持所有符合 <a target="_blank" rel="noopener" href="https://kangax.github.io/compat-table/es5/">ES5 标准</a> 的浏览器（不支持 IE8 及以下版本）。webpack 的 <code>import()</code> 和 <code>require.ensure()</code> 需要 <code>Promise</code>。如果你想要支持旧版本浏览器，在使用这些表达式之前，还需要 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/guides/shimming/">提前加载 polyfill</a>。</p>
<h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><p><a target="_blank" rel="noopener" href="https://webpack.docschina.org/guides%EF%BC%8C%E7%94%A8%E8%BF%99%E4%B8%AA%E5%85%A5%E9%97%A8%E9%9D%9E%E5%B8%B8%E6%A3%92%EF%BC%8C%E8%AE%B2%E8%A7%A3%E9%9D%9E%E5%B8%B8%E8%AF%A6%E7%BB%86%EF%BC%8C%E5%86%85%E5%AE%B9%E4%B9%9F%E8%B6%85%E7%BA%A7%E4%B8%B0%E5%AF%8C%EF%BC%8C%E5%8F%AA%E7%BB%83%E4%B8%80%E9%81%8D%E6%98%AF%E8%AE%B0%E4%B8%8D%E4%BD%8F%E7%9A%84%E3%80%82">https://webpack.docschina.org/guides，用这个入门非常棒，讲解非常详细，内容也超级丰富，只练一遍是记不住的。</a></p>
<h3 id="极简教程"><a href="#极简教程" class="headerlink" title="极简教程"></a>极简教程</h3><p>1.首先要先在项目中初始化，<code>npm init -y</code>，会生成一个package.json文件，-y表示全部默认，省去回车过程。</p>
<p>2.在powershell中输入<code>npm install --save-dev webpack webpack-cli</code>来安装webpack。</p>
<p>3.项目根目录下创建一个名为<code>webpack.config.js</code>的配置文件，在这个配置文件中用module.exports来导出配置。</p>
<p>下面的代码的意思为入口为’./src/indec.js’，出口为’dist’文件夹，文件名为’bundle.js’。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path=<span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-built_in">module</span>.exports=&#123;<br>    <span class="hljs-attr">entry</span>:<span class="hljs-string">&#x27;./src/index.js&#x27;</span>,<br>    <span class="hljs-attr">output</span>:&#123;<br>        <span class="hljs-attr">path</span>:path.resolve(__dirname,<span class="hljs-string">&#x27;dist&#x27;</span>),<br>        <span class="hljs-attr">filename</span>:<span class="hljs-string">&quot;bundle.js&quot;</span><br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>4.在<code>package.json</code>文件中的scrpits下添加如下代码：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>  <span class="hljs-attr">&quot;build&quot;</span>:<span class="hljs-string">&quot;webpack&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>5.在终端中输入<code>npm run build</code>，webpack即会开始编译，可以在dist目录下看到编译结果。</p>
<p>如果在webpack配置文件中(默认为webpack.config.js)中将模式改为<strong>development</strong>(默认为production)，编译后的文件会看起来更加清晰。</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs diff">const path=require(&#x27;path&#x27;);<br><br>module.exports=&#123;<br>    entry:&#x27;./src/index.js&#x27;,<br>    output:&#123;<br>        path:path.resolve(__dirname,&#x27;dist&#x27;),<br>        filename:&quot;bundle.js&quot;<br>    &#125;,<br> +  mode:&#x27;development&#x27;,<br>&#125;;<br></code></pre></td></tr></table></figure>

<h2 id="插件plugins"><a href="#插件plugins" class="headerlink" title="插件plugins"></a><a target="_blank" rel="noopener" href="https://www.webpackjs.com/plugins/">插件plugins</a></h2><p>loader被用于帮助webpack处理各种模块，而插件则可用于执行范围更广的任务。</p>
<h3 id="HtmlWebpackPlugin"><a href="#HtmlWebpackPlugin" class="headerlink" title="HtmlWebpackPlugin"></a><a target="_blank" rel="noopener" href="https://www.webpackjs.com/plugins/html-webpack-plugin/">HtmlWebpackPlugin</a></h3><p>如果我们更改了一个入口起点的名称，甚至添加了一个新的入口，会发生什么？会在构建时重新命名生成的 bundle，但是我们的 <code>index.html</code> 文件的<code>script</code>标签仍然引用旧的名称。让我们用 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/plugins/html-webpack-plugin"><code>HtmlWebpackPlugin</code></a> 来解决这个问题。</p>
<p>有了这个插件，就不用在<code>npm run build</code>改变了js的名字后手动去改变html中<code>script</code>标签引入的js路径。</p>
<h4 id="单入口配置"><a href="#单入口配置" class="headerlink" title="单入口配置"></a>单入口配置</h4><p>首先安装插件，并且调整 <code>webpack.config.js</code> 文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev html-webpack-plugin<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>webpack.config.js</strong></p>
</blockquote>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs diff"> const path = require(&#x27;path&#x27;);<br><span class="hljs-addition">+ const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);</span><br><br> module.exports = &#123;<br>   entry: &#123;<br>     index: &#x27;./src/index.js&#x27;,<br>   &#125;,<br><span class="hljs-addition">+  plugins: [</span><br><span class="hljs-addition">+    new HtmlWebpackPlugin(&#123;</span><br><span class="hljs-addition">+      //指定一个html文件作为模板</span><br><span class="hljs-addition">+      template:&quot;./index.html&quot;</span><br><span class="hljs-addition">+    &#125;),</span><br><span class="hljs-addition">+  ],</span><br>   output: &#123;<br>     filename: &#x27;[name].bundle.js&#x27;,<br>     path: path.resolve(__dirname, &#x27;dist&#x27;),<br>   &#125;,<br>   mode:&#x27;development&#x27;<br> &#125;;<br></code></pre></td></tr></table></figure>

<p>虽然在 <code>dist/</code> 文件夹我们已经有了 <code>index.html</code> 这个文件，然而 <code>HtmlWebpackPlugin</code> 还是会默认生成它自己的 <code>index.html</code> 文件。也就是说，它会用新生成的 <code>index.html</code> 文件，替换我们的原有文件。</p>
<h4 id="多html配置"><a href="#多html配置" class="headerlink" title="多html配置"></a>多html配置</h4><p>配置含有2个html和2个js的项目。</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs diff">const path=require(&#x27;path&#x27;);<br>const HtmlWebpackPlugin=require(&#x27;html-webpack-plugin&#x27;);<br><br>module.exports=&#123;<br>    mode:&#x27;development&#x27;,<br>    // 多入口<br><span class="hljs-addition">+    entry:&#123;</span><br><span class="hljs-addition">+        index:&#x27;./src/index.js&#x27;,</span><br><span class="hljs-addition">+        search:&#x27;./src/search.js&#x27;</span><br><span class="hljs-addition">+    &#125;,</span><br>    output:&#123;<br>        filename:&#x27;[name].js&#x27;,<br>        path:path.resolve(__dirname,&quot;dist&quot;),<br>    &#125;,<br>    // 多入口 有几个入口就实例化几次<br><span class="hljs-addition">+    plugins:[</span><br><span class="hljs-addition">+        new HtmlWebpackPlugin(&#123;</span><br><span class="hljs-addition">+            //指定一个html文件作为模板</span><br><span class="hljs-addition">+           template:&quot;./index.html&quot;,</span><br><span class="hljs-addition">+            //多个html必须要命名，否则默认为index.html</span><br><span class="hljs-addition">+            //同名文件，后生成的文件会覆盖前面的</span><br><span class="hljs-addition">+            filename:&#x27;index.html&#x27;,</span><br><span class="hljs-addition">+            //指定要引入的js文件，否则会引入所有的js文件</span><br><span class="hljs-addition">+            chunks:[&#x27;index&#x27;] //写entry中的名字</span><br><span class="hljs-addition">+        &#125;),</span><br><span class="hljs-addition">+        new HtmlWebpackPlugin(&#123;</span><br><span class="hljs-addition">+            template:&quot;./search.html&quot;,</span><br><span class="hljs-addition">+            filename:&#x27;./search.html&#x27;,</span><br><span class="hljs-addition">+            // 同时引入index和search两个文件</span><br><span class="hljs-addition">+            chunks:[&#x27;index&#x27;,&#x27;search&#x27;],</span><br><span class="hljs-addition">+        &#125;)</span><br><span class="hljs-addition">+    ]</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="其他功能"><a href="#其他功能" class="headerlink" title="其他功能"></a>其他功能</h4><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs diff">const path = require(&#x27;path&#x27;);<br>const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);<br><br> module.exports = &#123;<br>   entry: &#123;<br>     index: &#x27;./src/index.js&#x27;,<br>   &#125;,<br>  plugins: [<br>   new HtmlWebpackPlugin(&#123;<br>     //指定一个html文件作为模板<br>     template:&quot;./index.html&quot;,<br><span class="hljs-addition">+     minify:&#123;</span><br><span class="hljs-addition">+         //删除index.html中的注释</span><br><span class="hljs-addition">+         removeComments:true,</span><br><span class="hljs-addition">+         // 删除index.html中的空格</span><br><span class="hljs-addition">+         collapseWhitespace:true,</span><br><span class="hljs-addition">+         //删除html标签属性值的双引号</span><br><span class="hljs-addition">+         removeAttributeQuotes:true</span><br><span class="hljs-addition">+     &#125;</span><br>    &#125;),<br>  ],<br>   output: &#123;<br>     filename: &#x27;[name].js&#x27;,<br>     path: path.resolve(__dirname, &#x27;dist&#x27;),<br>   &#125;,<br>   mode:&#x27;development&#x27;<br> &#125;;<br></code></pre></td></tr></table></figure>

<h2 id="loader-1"><a href="#loader-1" class="headerlink" title="loader"></a><a target="_blank" rel="noopener" href="https://www.webpackjs.com/loaders/babel-loader/">loader</a></h2><p>loader可以用webpack能够处理非JS文件(css、图片、字体等)的模块。</p>
<h3 id="使用loader"><a href="#使用loader" class="headerlink" title="使用loader"></a>使用loader</h3><p>在你的应用程序中，有两种使用 loader 的方式：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/loaders/#configuration">配置方式</a>（推荐）：在 <strong>webpack.config.js</strong> 文件中指定 loader。</li>
<li><a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/loaders/#inline">内联方式</a>：在每个 <code>import</code> 语句中显式指定 loader。</li>
</ul>
<h4 id="配置方式"><a href="#配置方式" class="headerlink" title="配置方式"></a>配置方式</h4><p><a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/module/#modulerules"><code>module.rules</code></a> 允许你在 webpack 配置中指定多个 loader。 这种方式是展示 loader 的一种简明方式，并且有助于使代码变得简洁和易于维护。同时让你对各个 loader 有个全局概览：</p>
<p>loader <strong>从右到左（或从下到上）</strong>地取值(evaluate)/执行(execute)。在下面的示例中，从 sass-loader 开始执行，然后继续执行 css-loader，最后以 style-loader 为结束。查看 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/loaders/#loader-features">loader 功能</a> 章节，了解有关 loader 顺序的更多信息。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,<br>        use: [<br>          <span class="hljs-comment">// [style-loader](/loaders/style-loader)</span><br>          &#123; <span class="hljs-attr">loader</span>: <span class="hljs-string">&#x27;style-loader&#x27;</span> &#125;,<br>          <span class="hljs-comment">// [css-loader](/loaders/css-loader)</span><br>          &#123;<br>            <span class="hljs-attr">loader</span>: <span class="hljs-string">&#x27;css-loader&#x27;</span>,<br>            <span class="hljs-attr">options</span>: &#123;<br>              <span class="hljs-attr">modules</span>: <span class="hljs-literal">true</span><br>            &#125;<br>          &#125;,<br>          <span class="hljs-comment">// [sass-loader](/loaders/sass-loader)</span><br>          &#123; <span class="hljs-attr">loader</span>: <span class="hljs-string">&#x27;sass-loader&#x27;</span> &#125;<br>        ]<br>      &#125;<br>    ]<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<h4 id="内联方式-不推荐"><a href="#内联方式-不推荐" class="headerlink" title="内联方式(不推荐)"></a>内联方式(不推荐)</h4><p>可以在 <code>import</code> 语句或任何 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/api/module-methods">与 “import” 方法同等的引用方式</a> 中指定 loader。使用 <code>!</code> 将资源中的 loader 分开。每个部分都会相对于当前目录解析。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> Styles <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;style-loader!css-loader?modules!./styles.css&#x27;</span>;<br></code></pre></td></tr></table></figure>

<h3 id="已废用file-loader"><a href="#已废用file-loader" class="headerlink" title="已废用file-loader"></a>已废用file-loader</h3><p><strong>v5 版本已废弃</strong>file-loader: 请向 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/guides/asset-modules/"><code>asset modules</code></a> 迁移。资源模块(asset module)是一种模块类型，它允许使用资源文件（字体，图标等）而无需配置额外 loader。</p>
<p>在 webpack 5 之前，通常使用：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/raw-loader/"><code>raw-loader</code></a> 将文件导入为字符串</li>
<li><a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/url-loader/"><code>url-loader</code></a> 将文件作为 data URI 内联到 bundle 中</li>
<li><a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/file-loader/"><code>file-loader</code></a> 将文件发送到输出目录</li>
</ul>
<p>资源模块类型(asset module type)，通过添加 4 种新的模块类型，来替换所有这些 loader：</p>
<ul>
<li><code>asset/resource</code> 发送一个单独的文件并导出 URL。之前通过使用 <code>file-loader</code> 实现。</li>
<li><code>asset/inline</code> 导出一个资源的 data URI。之前通过使用 <code>url-loader</code> 实现。</li>
<li><code>asset/source</code> 导出资源的源代码。之前通过使用 <code>raw-loader</code> 实现。</li>
<li><code>asset</code> 在导出一个 data URI 和发送一个单独的文件之间自动选择。之前通过使用 <code>url-loader</code>，并且配置资源体积限制实现。</li>
</ul>
<h3 id="babel-loader"><a href="#babel-loader" class="headerlink" title="babel-loader"></a>babel-loader</h3><p>先要安装babel，毕竟活是babel干的，webpack只是打包的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev @babel/core @babel/cli @babel/preset-env<br></code></pre></td></tr></table></figure>

<p>接着安装babel-loader这个插件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev babel-loader<br></code></pre></td></tr></table></figure>

<p>接下来，配置babel，在根目录下创建<code>babel.config.json</code>的文件，并写下如下代码。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><br>&#123;<br>  <span class="hljs-attr">&quot;presets&quot;</span>: [<span class="hljs-string">&quot;@babel/env&quot;</span>]<br>&#125;<br></code></pre></td></tr></table></figure>

<p>下一步，便是在<code>webpack.config.js</code>文件中配置loader。</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs diff">const path = require(&#x27;path&#x27;);<br>module.exports = &#123;<br>    entry: &#123;<br>        &quot;index&quot;: &#x27;./src/module.js&#x27;<br>    &#125;,<br>    output: &#123;<br>        filename: &#x27;[name].bundle.js&#x27;,<br>        path: path.resolve(__dirname, &#x27;dist&#x27;),<br>    &#125;,<br><span class="hljs-addition">+    module: &#123;</span><br><span class="hljs-addition">+       rules: [</span><br><span class="hljs-addition">+            &#123;</span><br><span class="hljs-addition">+                test: /\.js$/,</span><br><span class="hljs-addition">+                // 排除node_modules里面的js文件</span><br><span class="hljs-addition">+                exclude: /node_modules/,</span><br><span class="hljs-addition">+                use: &quot;babel-loader&quot;</span><br><span class="hljs-addition">+            &#125;,</span><br><span class="hljs-addition">+        ],</span><br><span class="hljs-addition">+    &#125;,</span><br>    mode: &#x27;development&#x27;,<br>   <br>&#125;;<br></code></pre></td></tr></table></figure>

<p>如果想要转换promise这些，需要安装babel的<a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-polyfill">垫片插件</a>。</p>
<p>第一步要先安装<code>core-js</code>。</p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210620124723.png" srcset="/img/loading.gif" lazyload alt="image-20210620124715403"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev core-js<br></code></pre></td></tr></table></figure>

<p>接着在源文件夹下(src)的js代码中引入该模块。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;core-js/stable&quot;</span>;<br></code></pre></td></tr></table></figure>

<p>值得注意的是安装babel-loader和core-js的版本，尝试了很多次发现，他们需要低版本。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;devDependencies&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;@babel/core&quot;</span>: <span class="hljs-string">&quot;^7.11.0&quot;</span>,<br>    <span class="hljs-attr">&quot;@babel/preset-env&quot;</span>: <span class="hljs-string">&quot;^7.11.0&quot;</span>,<br>    <span class="hljs-attr">&quot;babel-loader&quot;</span>: <span class="hljs-string">&quot;^8.1.0&quot;</span>,<br>    <span class="hljs-attr">&quot;core-js&quot;</span>: <span class="hljs-string">&quot;^3.6.5&quot;</span>,<br>    <span class="hljs-attr">&quot;webpack&quot;</span>: <span class="hljs-string">&quot;^4.44.1&quot;</span>,<br>    <span class="hljs-attr">&quot;webpack-cli&quot;</span>: <span class="hljs-string">&quot;^3.3.12&quot;</span><br>  &#125;<br></code></pre></td></tr></table></figure>

<h2 id="综合应用"><a href="#综合应用" class="headerlink" title="综合应用"></a>综合应用</h2><h3 id="加载css"><a href="#加载css" class="headerlink" title="加载css"></a>加载css</h3><h4 id="style-loader-css-loader"><a href="#style-loader-css-loader" class="headerlink" title="style-loader+css-loader"></a>style-loader+css-loader</h4><p>首先要在src文件夹下的某个js文件中导入css文件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./src/style.css&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>为了在 JavaScript 模块中 <code>import</code> 一个 CSS 文件，你需要安装 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/style-loader">style-loader</a> 和 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/css-loader">css-loader</a>，并在 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/module"><code>module</code> 配置</a> 中添加这些 loader：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev style-loader css-loader<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>webpack.config.js</strong></p>
</blockquote>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs diff"> const path = require(&#x27;path&#x27;);<br><br> module.exports = &#123;<br>   entry: &#x27;./src/index.js&#x27;,<br>   output: &#123;<br>     filename: &#x27;bundle.js&#x27;,<br>     path: path.resolve(__dirname, &#x27;dist&#x27;),<br>   &#125;,<br><span class="hljs-addition">+  module: &#123;</span><br><span class="hljs-addition">+    rules: [</span><br><span class="hljs-addition">+      &#123;</span><br><span class="hljs-addition">+        test: /\.css$/i,</span><br><span class="hljs-addition">+        use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;],</span><br><span class="hljs-addition">+      &#125;,</span><br><span class="hljs-addition">+    ],</span><br><span class="hljs-addition">+  &#125;,</span><br> &#125;;<br></code></pre></td></tr></table></figure>

<p>模块 loader 可以链式调用。链中的每个 loader 都将对资源进行转换。链会逆序执行。第一个 loader 将其结果（被转换后的资源）传递给下一个 loader，依此类推。最后，webpack 期望链中的最后的 loader 返回 JavaScript。</p>
<p>应保证 loader 的先后顺序：<a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/style-loader"><code>&#39;style-loader&#39;</code></a> 在前，而 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/css-loader"><code>&#39;css-loader&#39;</code></a> 在后。loader数组是从右到左执行，先通过’css-loader’识别css文件，再通过<code>style-loader</code>将css代码嵌入到style标签中。（在控制台可以看到）</p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210620190458.png" srcset="/img/loading.gif" lazyload alt="image-20210620190450697"></p>
<h4 id="插件-loader"><a href="#插件-loader" class="headerlink" title="插件+loader"></a>插件+loader</h4><p>和上面的<code>style-loader</code>在style标签中内联不同，插件<code>mini-css-extract-plugin</code>会让html文件通过<code>link</code>标签引入css文件</p>
<p>首先要在src文件夹下的某个js文件中导入css文件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./src/style.css&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>接着安装插件<code>mini-css-extract-plugin</code>和<code>css-loader</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev css-loader mini-css-extract-plugin<br></code></pre></td></tr></table></figure>

<p>配置<code>webpack.config.js</code></p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs diff"> const path = require(&#x27;path&#x27;);<br><span class="hljs-addition">+ const MiniCssExtractPlugin=require(&#x27;mini-css-extract-plugin&#x27;);</span><br><br> module.exports = &#123;<br>   entry: &#x27;./src/index.js&#x27;,<br>   output: &#123;<br>     filename: &#x27;bundle.js&#x27;,<br>     path: path.resolve(__dirname, &#x27;dist&#x27;),<br>   &#125;,<br><span class="hljs-addition">+  module: &#123;</span><br><span class="hljs-addition">+    rules: [</span><br><span class="hljs-addition">+      &#123;</span><br><span class="hljs-addition">+        test: /\.css$/i,</span><br><span class="hljs-addition">+        //注意导入顺序</span><br><span class="hljs-addition">+        use: [MiniCssExtractPlugin.loader, &#x27;css-loader&#x27;],</span><br><span class="hljs-addition">+      &#125;,</span><br><span class="hljs-addition">+    ],</span><br><span class="hljs-addition">+  &#125;,</span><br><span class="hljs-addition">+	plugins: [</span><br><span class="hljs-addition">+        new MiniCssExtractPlugin(&#123;</span><br><span class="hljs-addition">+            //指定生成的css的文件名</span><br><span class="hljs-addition">+            filename:&#x27;[name].css&#x27;</span><br><span class="hljs-addition">+        &#125;),</span><br><span class="hljs-addition">+    ],</span><br> &#125;;<br></code></pre></td></tr></table></figure>

<p>最后，可以在dist文件夹下看到生成的css文件。</p>
<img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210620194806.png" srcset="/img/loading.gif" lazyload alt="image-20210620194803569" style="zoom:33%;" />

<p>而且在控制台可以看到样式是通过<code>link</code>标签引入的。</p>
<p><img src="https://gitee.com/zyxbj/image-warehouse/raw/master/pics/20210620194915.png" srcset="/img/loading.gif" lazyload alt="image-20210620194914627"></p>
<h3 id="加载图片"><a href="#加载图片" class="headerlink" title="加载图片"></a>加载图片</h3><p>如果是远程图片，则可以直接显示。而本地图片通过webpack打包，需要额外处理。</p>
<blockquote>
<p><strong>webpack.config.js</strong></p>
</blockquote>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs diff"> const path = require(&#x27;path&#x27;);<br><br> module.exports = &#123;<br>   entry: &#x27;./src/index.js&#x27;,<br>   output: &#123;<br>     filename: &#x27;bundle.js&#x27;,<br>     path: path.resolve(__dirname, &#x27;dist&#x27;),<br>   &#125;,<br>   module: &#123;<br>     rules: [<br>       &#123;<br>         test: /\.css$/i,<br>         use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;],<br>       &#125;,<br><span class="hljs-addition">+      &#123;</span><br><span class="hljs-addition">+        test: /\.(png|svg|jpg|jpeg|gif)$/i,</span><br><span class="hljs-addition">+        type: &#x27;asset/resource&#x27;,</span><br><span class="hljs-addition">+      &#125;,</span><br>     ],<br>   &#125;,<br> &#125;;<br></code></pre></td></tr></table></figure>

<p>现在，在 <code>import MyImage from &#39;./my-image.png&#39;</code> 时，此图像将被处理并添加到 <code>output</code> 目录，<em>并且</em> <code>MyImage</code> 变量将包含该图像在处理后的最终 url。在使用 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/css-loader">css-loader</a> 时，如前所示，会使用类似过程处理你的 CSS 中的 <code>url(&#39;./my-image.png&#39;)</code>。loader 会识别这是一个本地文件，并将 <code>&#39;./my-image.png&#39;</code> 路径，替换为 <code>output</code> 目录中图像的最终路径。而 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/html-loader">html-loader</a> 以相同的方式处理 <code>&lt;img src=&quot;./my-image.png&quot; /&gt;</code>。</p>
<h4 id="js中使用图片"><a href="#js中使用图片" class="headerlink" title="js中使用图片"></a>js中使用图片</h4><p>如果需要在js文件中使用图片，也可以用<code>asset module</code>这个loader，无需额外安装其他的loader。只需要在js中使用<code>import</code>引入图片即可。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 把图片当做模块引入</span><br><span class="hljs-keyword">import</span> logo <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./image/img.png&#x27;</span>;<br><br><span class="hljs-built_in">console</span>.log(logo); <span class="hljs-comment">// 会输出图片的路径</span><br><span class="hljs-keyword">const</span> myLogo = <span class="hljs-keyword">new</span> Image();<br>myLogo.src = logo;<br><span class="hljs-built_in">document</span>.body.appendChild(myLogo)<br></code></pre></td></tr></table></figure>

<h4 id="自定义文件名"><a href="#自定义文件名" class="headerlink" title="自定义文件名"></a>自定义文件名</h4><p>默认情况下，<code>asset/resource</code> 模块以 <code>[hash][ext][query]</code> 文件名发送到输出目录。</p>
<p>可以通过在 webpack 配置中设置 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/output/#outputassetmodulefilename"><code>output.assetModuleFilename</code></a> 来修改此模板字符串：</p>
<blockquote>
<p> <strong>webpack.config.js</strong></p>
</blockquote>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs diff">const path = require(&#x27;path&#x27;);<br><br>module.exports = &#123;<br>  entry: &#x27;./src/index.js&#x27;,<br>  output: &#123;<br>    filename: &#x27;main.js&#x27;,<br>    path: path.resolve(__dirname, &#x27;dist&#x27;),<br><span class="hljs-addition">+   assetModuleFilename: &#x27;images/[hash][ext][query]&#x27;</span><br>  &#125;,<br>  module: &#123;<br>    rules: [<br>      &#123;<br>        test: /\.png/,<br>        type: &#x27;asset/resource&#x27;<br>      &#125;<br>    ]<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>如可以设置为<code>assetModuleFilename: &#39;images/[name][ext]&#39;</code>，此时的[name]指图片本身的名字，而是entry中的名字，[ext]是指”filename extension”，用它表示文件原来的后缀。</p>
<p>另一种自定义输出文件名的方式是，将某些资源发送到指定目录：</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs diff">const path = require(&#x27;path&#x27;);<br><br>module.exports = &#123;<br>  entry: &#x27;./src/index.js&#x27;,<br>  output: &#123;<br>    filename: &#x27;main.js&#x27;,<br>    path: path.resolve(__dirname, &#x27;dist&#x27;),<br><span class="hljs-addition">+   assetModuleFilename: &#x27;images/[hash][ext][query]&#x27;</span><br>  &#125;,<br>  module: &#123;<br>    rules: [<br>      &#123;<br>        test: /\.png/,<br>        type: &#x27;asset/resource&#x27;<br><span class="hljs-deletion">-     &#125;</span><br><span class="hljs-addition">+     &#125;,</span><br><span class="hljs-addition">+     &#123;</span><br><span class="hljs-addition">+       test: /\.html/,</span><br><span class="hljs-addition">+       type: &#x27;asset/resource&#x27;,</span><br><span class="hljs-addition">+       generator: &#123;</span><br><span class="hljs-addition">+         filename: &#x27;static/[hash][ext][query]&#x27;</span><br><span class="hljs-addition">+       &#125;</span><br><span class="hljs-addition">+     &#125;</span><br>    ]<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>使用此配置，所有 <code>html</code> 文件都将被发送到输出目录中的 <code>static</code> 目录中。</p>
<p><code>Rule.generator.filename</code> 与 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/output/#outputassetmodulefilename"><code>output.assetModuleFilename</code></a> 相同，并且仅适用于 <code>asset</code> 和 <code>asset/resource</code> 模块类型。</p>
<h4 id="添加公共路径"><a href="#添加公共路径" class="headerlink" title="添加公共路径"></a>添加公共路径</h4><p>当使用<code> MiniCssExtractPlugin</code>生成的css在dist下一个文件夹时(如<code>dist/css/style.css</code>)，此时如果不设置生成的css的公共路径(<code>publicPath</code>)，图片不会正常显示。</p>
<p>因为<code>css-loader</code>以为生成的<code>style.css</code>文件直接在dist目录下，所以图片路径会默认设置为<code>url(./随机名字.png)</code>，而事实上图片的正确的路径为<code>url(../随机名字.png)</code>。</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs diff">  img-demo<br>  |- package.json<br>  |- webpack.config.js<br>  |- /dist<br>    |- index.js<br>    |- index.html<br><span class="hljs-addition">+   |- 随机字符.png</span><br><span class="hljs-addition">+   |- /css</span><br><span class="hljs-addition">+    	|- style.css</span><br>  |- /src<br>    |- icon.png<br>    |- style.css<br>    |- index.js<br>  |- /node_modules<br></code></pre></td></tr></table></figure>

<p>因此，需要在<code>options</code>中设置<code>publicPath</code>为<code>../</code>，这样该css文件引入的所有url前面都会加上<code>../</code>的前缀。</p>
<blockquote>
<p><strong>webpack.config.js</strong></p>
</blockquote>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs diff">const path = require(&#x27;path&#x27;);<br>const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);<br>const MiniCssExtractPlugin=require(&#x27;mini-css-extract-plugin&#x27;);<br><br>module.exports = &#123;<br>    entry: &#123;<br>        index: &#x27;./src/index.js&#x27;,<br>    &#125;,<br>    output: &#123;<br>        filename: &#x27;[name].js&#x27;,<br>        path: path.resolve(__dirname, &#x27;dist&#x27;),<br>    &#125;,<br>    module:&#123;<br>        rules:[<br>            &#123;<br>                test:/\.css$/i,<br>                //此时生成的css在dist/css的文件夹下，要设置公共路径<br>                //这样该css文件所有的url前面都会加上../的前缀。<br><span class="hljs-addition">+                use:[&#123;</span><br><span class="hljs-addition">+                    loader:MiniCssExtractPlugin.loader,</span><br><span class="hljs-addition">+                    options:&#123;</span><br><span class="hljs-addition">+                        publicPath:&#x27;../&#x27;</span><br><span class="hljs-addition">+                    &#125;</span><br><span class="hljs-addition">+                &#125;, &#x27;css-loader&#x27;]&#125;,</span><br>            &#123;<br>                test:/\.(png|svg|jepg|gif)/,<br>                type:&#x27;asset/resource&#x27;<br>            &#125;<br>        ]  <br>    &#125;,<br>    plugins: [<br>        new HtmlWebpackPlugin(&#123;<br>            //指定一个html文件作为模板<br>            template: &quot;./index.html&quot;<br>        &#125;),<br><span class="hljs-addition">+        new MiniCssExtractPlugin(&#123;</span><br><span class="hljs-addition">+            //在dist/css文件夹下创建一个index.css文件</span><br><span class="hljs-addition">+            filename:&#x27;css/[name].css&#x27;</span><br><span class="hljs-addition">+        &#125;)</span><br>    ],<br>    mode: &#x27;development&#x27;<br>&#125;;<br></code></pre></td></tr></table></figure>

<h4 id="html中的图片"><a href="#html中的图片" class="headerlink" title="html中的图片"></a>html中的图片</h4><p>css中引入的图片可以用<code>type:asset/resource;</code> ，html中的图片则需要额外安装loader<code>html-withimg-loader</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev html-withimg-loader<br></code></pre></td></tr></table></figure>

<p>此时，我只写出新增的代码，其他的如图片loader，html-webpack-plugin和mini-css-extract-plugin插件用法参考上面的代码。</p>
<p><strong>注意</strong>:这个<code>html-withimg-loader</code>必须要配合处理图片的loader——<code>asset  module</code> 一起使用，因为真正能够加载图片的还是<code>asset module</code>，<code>html-withimg-loader</code>用来处理路径问题。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>:&#123;<br>    <span class="hljs-attr">rules</span>:[<br>        &#123;<br>            <span class="hljs-attr">test</span>:<span class="hljs-regexp">/\.(html|htm)/i</span>,<br>            use:<span class="hljs-string">&#x27;html-withimg-loader&#x27;</span><br>        &#125;<br>    ]  <br>&#125;,<br></code></pre></td></tr></table></figure>

<h4 id="asset-inline"><a href="#asset-inline" class="headerlink" title="asset/inline"></a>asset/inline</h4><p>asset/inline输出的 data URI，默认是呈现为使用 Base64 算法编码的文件内容。</p>
<p><strong>webpack.config.js</strong></p>
<blockquote>
<p>关于<a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/module/#ruleparserdataurlcondition">rules.parser</a></p>
</blockquote>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs diff">const path = require(&#x27;path&#x27;);<br><br>module.exports = &#123;<br>  entry: &#x27;./src/index.js&#x27;,<br>  output: &#123;<br>    filename: &#x27;main.js&#x27;,<br>    path: path.resolve(__dirname, &#x27;dist&#x27;),<br>  &#125;,<br>  module: &#123;<br>    rules: [<br><span class="hljs-addition">+      &#123;</span><br><span class="hljs-addition">+       test: /\.svg/,</span><br><span class="hljs-addition">+       type: &#x27;asset/inline&#x27;,</span><br><span class="hljs-addition">+		parser:&#123;</span><br><span class="hljs-addition">+			dataUrlCondition:</span><br><span class="hljs-addition">+				maxSize:10000</span><br><span class="hljs-addition">+      			//表示10kb</span><br><span class="hljs-addition">+       &#125;</span><br><span class="hljs-addition">+     &#125;,</span><br><br>    ]<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>maxSize为10000，表示小于10kb将其转换为base64格式，大于则按照asset/resource来处理。一般只对较小的图片进行这种操作，因为转为base64格式后，图片会以base64格式来存在js中。</p>
<h3 id="配置开发环境"><a href="#配置开发环境" class="headerlink" title="配置开发环境"></a>配置开发环境</h3><h4 id="使用source-map-追踪错误"><a href="#使用source-map-追踪错误" class="headerlink" title="使用source map 追踪错误"></a>使用source map 追踪错误</h4><p>当 webpack 打包源代码时，可能会很难追踪到 error(错误) 和 warning(警告) 在源代码中的原始位置。例如，如果将三个源文件（<code>a.js</code>, <code>b.js</code> 和 <code>c.js</code>）打包到一个 bundle（<code>bundle.js</code>）中，而其中一个源文件包含一个错误，那么堆栈跟踪就会直接指向到 <code>bundle.js</code>。你可能需要准确地知道错误来自于哪个源文件，所以这种提示这通常不会提供太多帮助。</p>
<p>为了更容易地追踪 error 和 warning，JavaScript 提供了 <a target="_blank" rel="noopener" href="http://blog.teamtreehouse.com/introduction-source-maps">source maps</a> 功能，可以将编译后的代码映射回原始源代码。如果一个错误来自于 <code>b.js</code>，source map 就会明确的告诉你。</p>
<p>source map 有许多 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/devtool">可用选项</a>，请务必仔细阅读它们，以便可以根据需要进行配置。</p>
<p>对于本指南，我们将使用 <code>inline-source-map</code> 选项，这有助于解释说明示例意图（此配置仅用于示例，不要用于生产环境）：</p>
<p><strong>webpack.config.js</strong></p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs diff"> const path = require(&#x27;path&#x27;);<br> const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);<br><br> module.exports = &#123;<br>   mode: &#x27;development&#x27;,<br>   entry: &#123;<br>     index: &#x27;./src/index.js&#x27;,<br>     print: &#x27;./src/print.js&#x27;,<br>   &#125;,<br><span class="hljs-addition">+  devtool: &#x27;inline-source-map&#x27;,</span><br>   plugins: [<br>     new HtmlWebpackPlugin(&#123;<br>       title: &#x27;Development&#x27;,<br>     &#125;),<br>   ],<br>   output: &#123;<br>     filename: &#x27;[name].bundle.js&#x27;,<br>     path: path.resolve(__dirname, &#x27;dist&#x27;),<br>     clean: true,<br>   &#125;,<br> &#125;;<br></code></pre></td></tr></table></figure>

<h3 id="使用-webpack-dev-server"><a href="#使用-webpack-dev-server" class="headerlink" title="使用 webpack-dev-server"></a>使用 webpack-dev-server</h3><p><code>webpack-dev-server</code> 为你提供了一个基本的 web server，并且具有 live reloading(实时重新加载) 功能。设置如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev webpack-dev-server<br></code></pre></td></tr></table></figure>

<p>修改配置文件，告知 dev server，从什么位置查找文件：</p>
<p><strong>webpack.config.js</strong></p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs diff"> const path = require(&#x27;path&#x27;);<br> const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);<br><br> module.exports = &#123;<br>   mode: &#x27;development&#x27;,<br>   entry: &#123;<br>     index: &#x27;./src/index.js&#x27;,<br>     print: &#x27;./src/print.js&#x27;,<br>   &#125;,<br>   devtool: &#x27;inline-source-map&#x27;,<br><span class="hljs-addition">+  devServer: &#123;</span><br><span class="hljs-addition">+    contentBase: &#x27;./dist&#x27;,</span><br><span class="hljs-addition">+  &#125;,</span><br>   plugins: [<br>     new HtmlWebpackPlugin(&#123;<br>       title: &#x27;Development&#x27;,<br>     &#125;),<br>   ],<br>   output: &#123;<br>     filename: &#x27;[name].bundle.js&#x27;,<br>     path: path.resolve(__dirname, &#x27;dist&#x27;),<br>     clean: true,<br>   &#125;,<br> &#125;;<br></code></pre></td></tr></table></figure>

<p>以上配置告知 <code>webpack-dev-server</code>，将 <code>dist</code> 目录下的文件 serve 到 <code>localhost:8080</code> 下。（serve，将资源作为 server 的可访问文件）</p>
<p><strong>package.json</strong></p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs diff"> &#123;<br>   &quot;name&quot;: &quot;webpack-demo&quot;,<br>   &quot;version&quot;: &quot;1.0.0&quot;,<br>   &quot;description&quot;: &quot;&quot;,<br>   &quot;private&quot;: true,<br>   &quot;scripts&quot;: &#123;<br>     &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,<br>     &quot;watch&quot;: &quot;webpack --watch&quot;,<br><span class="hljs-addition">+    &quot;start&quot;: &quot;webpack serve --open&quot;,</span><br>     &quot;build&quot;: &quot;webpack&quot;<br>   &#125;,<br>   &quot;keywords&quot;: [],<br>   &quot;author&quot;: &quot;&quot;,<br>   &quot;license&quot;: &quot;ISC&quot;,<br>   &quot;devDependencies&quot;: &#123;<br>     &quot;html-webpack-plugin&quot;: &quot;^4.5.0&quot;,<br>     &quot;webpack&quot;: &quot;^5.4.0&quot;,<br>     &quot;webpack-cli&quot;: &quot;^4.2.0&quot;,<br>     &quot;webpack-dev-server&quot;: &quot;^3.11.0&quot;<br>   &#125;,<br>   &quot;dependencies&quot;: &#123;<br>     &quot;lodash&quot;: &quot;^4.17.20&quot;<br>   &#125;<br> &#125;<br></code></pre></td></tr></table></figure>

<p>现在，在命令行中运行 <code>npm start</code>，我们会看到浏览器自动加载页面。如果你更改任何源文件并保存它们，web server 将在编译代码后自动重新加载。试试看！</p>
<p><code>webpack-dev-server</code> 具有许多可配置的选项。关于其他更多配置，请查看 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/dev-server">配置文档</a>。</p>
<blockquote>
<h6 id="Warning-2"><a href="#Warning-2" class="headerlink" title="Warning"></a>Warning</h6><p>webpack-dev-server 在编译之后不会写入到任何输出文件。而是将 bundle 文件保留在内存中，然后将它们 serve 到 server 中，就好像它们是挂载在 server 根路径上的真实文件一样。如果你的页面希望在其他不同路径中找到 bundle 文件，则可以通过 dev server 配置中的 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/dev-server/#devserverpublicpath-"><code>publicPath</code></a> 选项进行修改。</p>
</blockquote>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/JavaScript/">JavaScript</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/07/27/%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E6%8F%8F%E8%BF%B0%E7%AC%A6%E5%92%8C%E8%AE%BF%E9%97%AE%E5%99%A8%E5%B1%9E%E6%80%A7/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">对象属性描述符和访问器属性</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script  src="/js/local-search.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
